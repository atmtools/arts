2011-11-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-2-0-19

	* src/ppath.cc (ppath_start_stepping): Now also "upward"
	observations are allowed when the sensor is above the model
	atmosphere. The idea is to allow the cloudbox to include TOA.

2011-11-05  Jana Mendrok <jana.mendrok@ltu.se>

	* arts-2-0-18

	* src/cloudbox.cc:

	(IWCtopnd_MH97): for large IWC (obviously outside the original
	parameterization range) number densities in small particle mode got
	negative. now, if so, explicitly set to 0. though not specified by MH97,
	this should be fine, since even the small mode rather creates particles
	with Dm>100um, which should be covered by the large mode.

2011-11-05  Jana Mendrok <jana.mendrok@ltu.se>

	* arts-2-0-17

	* src/cloudbox.cc:

	(IWCtopnd_MH97): bugfix. cases with all ice in <100um mode (lowT &
	small IWC) lead to NaN at >100um mode lead to all pnd set to 0. now
	producing proper pnd_field (relevant more for IR than MW, I guess).

	(chk_pndsum): bugfixed interface, where vol and density where swapped.
	modified pnd scaling correction - don't let pnd==0 slip through, when
	xwc!=0, so rather test for xwc==0 instead of x.sum()==0. potentially
	caused huge deviations that went uncatched...

	* src/cloudbox.cc: corresponding chk_pndsum interface adaption.


2011-11-02  Daniel Kreyling <daniel.kreyling@nict.go.jp>

	* arts 2-0-16

	* src/m_cloudbox.cc: (pnd_fieldSetup) Added new globally
	applicable particle size distribution for ice and snow particles,
	based on the work of A.J. Heymsfield (apparently not published
	yet). In ARTS terms the new PSD is called 'H11' and can be used
	for scattering calculations just like 'MH97'.

	* src/cloudbox.cc (pnd_H11): new function to evaluate the
	distribution at given scattering particle sizes
	(scale_H11): scaling the 'H11' PND values to total ice or snow
	massdensity.

	*src/methods.cc: updated doku for 'H11'

	*src/workspace.cc: updated doku for 'H11'


2011-10-27  Jana Mendrok <jana.mendrok@ltu.se>

	* arts-2-0-15

	* src/methods.cc,agendas.cc,workspace.cc: more broken doc links fixed

2011-10-27  Jana Mendrok <jana.mendrok@ltu.se>

	* arts-2-0-14

	* src/methods.cc: fixed some doxygen doc (references to workspace
	methods/variables)

	* includes/smr: added sensor definitions for ciwsir, cloudice, iss-smr,
	(jaxa-)smr

2011-10-17  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-2-0-13

	* src/absorption.h (LineRecord): Updated doxygen documentation for
	this class. (Basically added information on the XML header and
	footer.) Triggered by Agnes asking about a description of the ARTS
	catalogue format.

2011-10-04  Oliver Lemke  <olemke@core-dump.info>

	* arts-2-0-12

	* src/agendas.cc: Ooops, don't fix it if it ain't broken.

2011-10-04  Oliver Lemke  <olemke@core-dump.info>

	* arts-2-0-11

	* src/docserver.{cc,h}:

	Mark broken *LINKS* red.

	Add a 'Doc check' page that lists all broken links. Add link to this
	page in footer.

	(insert_breadcrumb_token, insert_breadcrumbs): Fix broken breadcrumbs.

	(description_add_links): Also search through GIn and GOut to determine
	if *LINK* target exists.

	* src/methods.cc:

	Put space around * if used as multiplication operator in docs.

	* src/agendas.cc: Minor doc fix.

2011-09-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-2-0-10

	* src/m_rte.cc (yCalc2): Some bug fixes. Changes needed elsewhere
	before a switch to this version cen be made. 

2011-09-15  Oliver Lemke  <olemke@core-dump.info>

	* arts-2-0-9

	* CMakeLists.txt: Provide some love for Cygwin users.

2011-09-15  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-2-0-8

	* src/m_basic_types.cc (ArrayOfIndexSetConstant): Created.

	* src/m_sensor.cc (sensor_responseFromArrayData): Created.
	(sensor_response_arraySingle): Created.

	* src/workspace.cc: Introduced sensor_response_array, 
	sensor_response_index, sensor_response_f_array,
	sensor_response_pol_array, sensor_response_za_array and
	sensor_response_aa_array

2011-09-14  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-2-0-7

	* src/m_montecarlo.cc(MCGeneral): Bugfix
	  - Move check for g==0 to outside if...else block checking for
	    different scenarios; this is problematic in any case.

	* src/montecarlo.cc(mcPathTraceGeneral): Bugfix
	  - Don't calculate log(exp(very_negative_number)), result might
	    become 0, causing problems later. Use the very_negative_number
		directly instead.

2011-09-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-2-0-6

	* src/agendas.cc: Added sensor_response_agenda. 

	* src/m_rte.cc (yCalc2): A version of yCalc using
	sensor_response_agenda. Not yet activated (just backup of the
	coding so far).

2011-09-09  Oliver Lemke  <olemke@core-dump.info>

	* arts-2-0-5

	* src/matpackII.cc:

	Fix bug in Sparse copy constructor. Crashed when trying to copy empty
	Sparse matrices.

	* src/xml_io_instantiation.h, src/array.h, src/xml_io_array_types.cc,
	src/xml_io_types.h, src/groups.cc, src/nc_io_array_types.cc:

	Add ArrayOfSparse.

2011-09-08  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-2-0-4

	* src/m_montecarlo.cc (MCGeneral): Bugfix
	  
	  - If the lowest layer has large extent and a thick cloud, g may be 0
	  due to underflow, but then I_i should be 0 as well.  Don't turn it
	  into nan for no reason!

2011-09-08  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-2-0-3

	* src/m_jacobian.cc (jacobianCalcPolyfit): Improved error message.

2011-09-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-2-0-2

	* src/arts.{h,cc}:

	Add ArtsOut parameter to arts_exit_with_error_message and
	exit_or_rethrow. Fixes a bug reported by Gerrit where runtime error
	output only ended up on stderr but was missing from the rep file.

	* src/main.cc,
	src/m_atmosphere.cc (batch_atm_fields_compactFromArrayOfMatrix),
	src/m_agenda.cc (Arts, Arts2), src/absorption.{h,cc} (xsec_species),
	src/m_abs_lookup.cc (abs_lookupCreate), src/m_batch.cc (ybatchCalc):

	Pass out0 to arts_exit_with_error_message and exit_or_rethrow.

	* src/m_abs.cc (abs_xsec_per_speciesAddLines),
	src/absorption.{h,cc} (xsec_species), 

	Add verbosity argument to xsec_species.

	* rte.{h,cc} (iyb_calc), src/m_jacobian.cc:

	Add verbosity argument to iyb_calc.

	* src/groups.cc (get_wsv_group_ids): Removed unused variable it.

	* doc/arts-splash.gif: Remove 'pre2.0'.

2011-09-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-2-0-1

	* src/arts.h: Change ARTS-1-1-x -> ARTS-2 in doc header.

	* src/docserver.{cc,h}, src/main.cc: Refactor docserver into a class.

	* src/methods.h, src/methods_aux.cc:

	Add declarations for format_paragraph and get_short_wsv_description.

2011-09-02  Oliver Lemke  <olemke@core-dump.info>

	* arts-2-0-0

	* ChangeLog: ARTS-2 release!

2011-08-29  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-17-26

	* src/m_sensor.cc (sensor_responsePolarisation): Fixed typo in
	error message.

	* src/workspace.cc: Moved self-reference in description of
	sensor_pol,

	* src/methods.cc: to the description of sensor_responsePolarisation.

2011-08-26  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-17-25

	* src/m_cloudbox.cc:

	(ScatteringParticlesSelect): Be more verbose to out3
	(pnd_fieldSetup): Bugfix if monodisperse (cannot scale by binwidth).
	However, does this work at all?

2011-08-26  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-17-24

	* doc/uguide/sensor.tex: Wrote a first simple version of
	this section. Tried to cover the general aspects.

	* doc/uguide/montecarlo.tex: Added comment refering to other
	version of VRTE (in Sec 5.4).

	* doc/uguide/rte_theory.tex: Changed last part of Sec 5.4, to
	follow the nomenclature used in the article.

	* doc/uguide/CMakeLists.txt: Fixed typo for rte_theory.tex.

2011-08-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-17-23

	* src/methods.cc:

	Update verbosity documentation. Remove TestVerbosity.

	Add support for appending SingleScatteringData and ScatteringMetadata
	elements to the corresponding arrays.

	* src/m_append.h:

	Add template function for appending single elements to arrays.

	* src/m_general.cc: Remove TestVerbosity.

2011-08-26  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-17-22

	* doc/uguide/wfuns.tex: Completed.

2011-08-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-17-21

	* src/methods.cc (ReadXML): Set default value of filename to "".

2011-08-25  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-17-20

	* doc/uguide/wfuns.tex: Write section on pointing WFs.

	* tests/ClearSky/TestClearSky.arts: iybinterp -> interp

	* tests/Wfuns/TestWfuns.arts: Added more detailed test of pointing WF.

	* src/m_jacobian.cc (jacobianCalcAbsSpeciesPerturbations): Added
	Perturbations to the name (for clarity).
	(jacobianCalcTemperaturePerturbations): As above.

	(jacobianCalcFreqShiftAndStretchInterp): Renamed (following
	pattern for PointingZa).

	(jacobianCalcPointingZaInterp): Created.

2011-08-24  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-17-19

	* If you are using pointing WFs, change "iybrecalc" to "recalc"
	(iyb was reduntant information)

	* tests/ClearSky/TestClearSky.arts: Adopted to change below.

	* src/m_jacobian.cc (jacobianAddPointingZa): Added option
	"interp". And renamed changed option "iybrecalc" to "recalc".

	(jacobianCalcPointingZaRecalc): Renamed.

	* src/constants.cc: Added POINTING_CALCMODE_B.

	* tests/Wfuns/TestWfuns.arts: Modified and extended (now also
	testing T-wfuns).

	* tests/Wfuns/common_wfuns_defs.arts: Removed.

	* src/m_rte.cc (iyEmissionStandardClearsky): Code slightly
	restructured (frequency loop broken up), to hopefully make things
	clearer and avoid repeating operations.
	(iyBeerLambertStandardClearsky): Changes as above.

	* doc/uguide/wfuns.tex: Finished temperature section.

2011-08-21  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-17-18

	* doc/uguide/wfuns.tex: More work on T wfuns.

	* doc/uguide/atmosphere.tex: Made a short section around
	hydrostatic equilibrium.

2011-08-19  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-17-17

	* doc/uguide/wfuns.tex: Some work on T-wfs section.

2011-08-18  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-17-16

	* doc/uguide/wfuns.tex: Some rearrangements. Absorbing species
	finished (and code checked).

2011-08-18  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-17-15

	* Analytical weighting functions are now treated correctly with
	respect to jacobian_agenda.

	* src/m_jacobian.cc (jacobianCalcTemperatureAnalytical): Created
	(just a dummy function).
	(jacobianAddTemperature): The function above is now added to
	jacobian_agenda if analytical calculations selected.

	* src/m_rte.cc (yCalc): Check that jacobian_agenda.nelem()>0
	removed. This as the agenda will contain methods even if just
	analytical calculations (some dummy functions).

2011-08-18  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-17-14

	* tests/testall.py, tests/CMakeLists.txt: Add Wfuns testcase.

2011-08-17  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-17-13

	* doc/uguide/wfuns.tex: Some new text.

	* src/m_basic_types.cc (MatrixCompare): Created.

	* tests/Wfuns: Started on this test folder. For somewhat more
	stringent tests of jacobian claculations.

2011-08-17  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-17-12

	* New implementation to control verbosity (out0-out3).

	The verbosity is now no longer controlled by a global variables.

	The WSV Verbosity holds that information and is automatically passed
	to every workspace method.

	If you want to use out0-out3 your WSM has to create the appropriate
	streams as a local variable. There are four convenience macros defined
	to ease that process. You can just call CREATE_OUT0, CREATE_OUT1,
	CREATE_OUT2 and/or CREATE_OUT3 at the beginning of your function and
	use out0-out3 as usual.

	If you have non-workspace methods that need access to out0-out3, you
	have to pass the Verbosity WSV as a function parameter and use the
	CREATE_OUTX macros in the subfunction to create the local streams.

	All existing functions have been adapted to use the new Verbosity
	implementation.

	In the controlfile, you can use verbositySet, verbositySetAgenda,
	verbositySetScreen and/or verbositySetFile to change the verbosity
	on-the-fly. This gives the possibility to activate, e.g. level 3
	debugging output for only one function or a small block of functions
	even inside an agenda.

	* src/messages.{cc,h}:

	Remove old Messages implementation. Replaced by new Verbosity class.

	Remove global threadprivate variable in_main_agenda. Also handled by
	Verbosity object.

	* src/agenda_class.cc (Agenda::execute):

	Utilize the new verbosity.

	Reinitialize the OUT1 and OUT3 streams when iterating over the methods
	of this agenda.

	* src/m_agenda.cc, src/methods.cc:

	Add proper Arts2 WSM. Leave old Arts WSM there with a note that it's
	obsolete.

	* src/make_auto_md_h.cc, src/make_auto_md_cc.cc:

	Pass verbosity argument to all WSMs.

	* src/parser.{cc,h}: Add verbosity member to parser class.
	
	* src/m_optproperties.cc, src/xml_io_instantiation.h,
	src/m_conversion.h, src/cloudbox.h, src/optproperties.h,
	src/continua.h, src/m_atmosphere.cc, src/m_copy.h, src/m_extract.h,
	src/gas_abs_lookup.h, src/m_agenda.cc, src/docserver.cc,
	src/abs_species_tags.cc, src/xml_io_array_types.cc, src/m_delete.h,
	src/geomag_calc.cc, src/m_abs.cc, src/m_basic_types.cc, src/xml_io.cc,
	src/m_general.cc, src/rte.cc, src/disort.h, src/nc_io_types.h,
	src/m_montecarlo.cc, src/m_disort.cc, src/absorption.cc,
	src/token.cc, src/m_sensor.cc, src/nc_io.h, src/rte.h, src/doit.h,
	src/montecarlo.cc, src/methods.cc, src/disort.cc, src/montecarlo.h,
	src/methods.h, src/agenda_class.h, src/sensor.cc, src/ppath.h,
	src/m_xml.h, src/xml_io_private.h, src/m_basic_types.h,
	src/m_cloudbox.cc, src/m_general.h, src/agenda_class.cc,
	src/m_refraction.cc, src/m_abs_lookup.cc, src/ppath.cc,
	src/m_nc.h, src/xml_io_compound_types.cc, src/optproperties.cc,
	src/cloudbox.cc, src/m_jacobian.cc, src/main.cc, src/rng.h,
	src/nc_io_instantiation.h, src/m_physics.cc, src/m_ignore.h,
	src/m_rte.cc, src/arts.cc, src/sensor.h, src/xml_io_types.h,
	src/continua.cc, src/absorption.h, src/gas_abs_lookup.cc, src/xml_io.h,
	src/m_select.h, src/m_batch.cc, src/agendas.cc, src/m_surface.cc,
	src/m_doit.cc, src/xml_io_basic_types.cc, src/m_append.h,
	src/nc_io.cc, src/workspace.cc, src/doit.cc, src/m_fos.cc, src/rng.cc,
	src/m_ppath.cc:

	Add verbosity argument to all WSMs and functions that use outX. Also
	create the output streams by calling the appropriate CREATE_OUT0-3
	macro depending on which streams the functions need.

	* src/test_xml.cc, src/test_binaryio.cc, src/test_sparse.cc:

	Add verbosity argument to xml_write_to_file and xml_read_from_file.

	* CMakeLists.txt: Remove threadprivate check.

	* cmake/modules/CheckOpenMPThreadprivate.cmake: Removed.

2011-08-02  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-17-11

	* src/agenda_class.cc (Agenda::execute):

	Don't use ostringstreams here. They have a significant impact on
	performance:

	arts -r010 TestDOITBatch.arts:

	ubuntu5: with ostringstream 39s, without 32s. 1.22x faster
	MacBook Pro: with ostringstream 75s, without 43s. 1.73x faster

	make -j4 check:

	ubuntu5: with ostringstream 44s, without 41s. 1.07x faster
	MacBook Pro: with ostringstream 104s, without 61s. 1.71x faster

	ubuntu5: Xeon CPU, 8 physical cores
	MacBook Pro: i7 CPU, 4 physical cores, 4 logical cores

	The problem lies in the C library. ostringstream references a locale
	object that is protected by a global mutex. The more threads are used,
	the more they block each other.

	Even running arts with -r000 to skip all output, the problem persists
	as the ostringstreams are created anyway.

2011-08-02  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-17-10

	* src/docserver.cc, src/xml_io.cc, src/montecarlo.cc,
	src/methods_aux.cc, src/m_rte.cc, src/nc_io.cc:

	Remove unused variables.

	* src/m_cloudbox.cc:

	Put lat1,2 and lon1,2 into DEBUG() to avoid unused variable warnings
	in release mode.

	* src/arts_getopt.c: Make sure to never deference null pointer.

	* src/binio.cc: Add f to float number.

2011-07-22  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-17-9

	* includes/avhrr/{NOAA19_AVHRR.f_grid_fast.xml,
					  avhrr_sensor_fast.arts,
					  avhrr_fast.arts,
					  NOAA19_AVHRR.W_fast.xml}:
	  - Added fast setup for AVHRR. So far only NOAA-19, channel 5.
	
	* src/m_sensor.cc:
	  
	  (f_gridFromSensorHIRS): Bugfix
	  - Check that spacing is positive (avoid assertion)

	  (WMRFSelectChannels): Bugfix
	  - Verify some frequencies are left

	  (sensor_responseWMRF):
	  - Check non-empty sensor_response
	
	* src/methods.cc: Cosmetics

	* src/matpackII.cc(transpose):
	  - Was segfaulting on empty matrix. Now returns new empty matrix.


2011-07-21  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-17-8

	* tests/AVHRR/TestAVHRR.ybatch.xml: Updated
	  - Updated after cleaning up yesterdays code (millikelvins
	  difference).

2011-07-20  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-17-7

	* includes/avhrr/*.backend_channel_response.xml:
	  - Cleaned this up; removed all frequencies before and after
	    response values start to be negative, all those values are very
		small and hovering around zero. This reduces the number of
		frequencies by around 2/3rd.
	
	* includes/avhrr/get_avhrr_srf.py:
	  - Code to clean up the frequencies; some more HTML fixes as well.

2011-07-18  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-17-6

	* includes/hirs/README: Added
	  - Document how to use those "split" include files.

2011-07-16  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-17-5

	* doc/uguide/wfuns.tex: Some improvements of the introductory
	sections.  

2011-07-15  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-17-4

	* src/main.cc(main): Output starting time to out2.

2011-07-15  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-17-3

	* FOS and BLcloudbox are now using common code as far as possible.
	This revision also provide the basis to extend the methods to also
	handle the (jacobians later left for future work).
	This should also close the revision of the iyEmission, iyBL, iyMC
	and iyFOS methods on interface level.
	
	* src/m_fos.cc (iyFOS): Restructured, in the same way as
	iyBeerLambertStandardCloudbox.
	
	* src/workspace.cc: The scope of fos_use_mean_scat_data extended
	and renamed to use_mean_scat_data (now a general variable used of
	both FOS and BL).

	* src/m_rte.cc (iyBeerLambertStandardCloudbox): Restructured. Now
	using get_ppath_cloudrtvars. iy_transmission now handled, and the
	function is then prepared to also handle jacobians.

	* src/rte.cc (get_ppath_pnd): New function, to complement
	get_ppath_atmvars inside the cloudbox.
	(ext2trans): Created this function (based on trans_step_std). This
	for improved modularity.
	(trans_step_std): Now using ext2trans.
	(get_ppath_cloudrtvars): New function covering core parts for
	iyBeerLambertStandardCloudbox and iyFOS.
	(mirror_los): New function. Determined the backward direction.

	* src/special_interp.cc (interp_cloudfield_gp2itw): Now
	distinction between in and out gridpos. This to make it clear that
	the gridpos-es are changed by the function.

2011-07-13  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-17-2
	
	* Needed control file changes: Any setting of iy_aux_do shall be
	removed. DoNothing shall be replaced with Ignore or Touch.

	* Status: Beer-Lambert with cloudbox and FOS not yet revised.
	Other RT methods revised. DOIT can now provide an error, but so far
	just set to a hard-coded value.
	
	* src/m_ignore.h: Removed DoNothing. Has been flagged as
	DEPRECATED for years!

	* src/methods.cc: Updated text for affected methods. 

	* tests/OdinSMR/TestOdinSMR.arts: Added calls (not active) showing
	how to instead do transmission calculations.

	* src/m_rte.cc: Changes related to iy_aux and iy_error throughout
	the file.

	* tests/DOIT/TestDOIT.arts: Added saving of y_aux and y_error, to
	remind/show about that these WSV now are filled when using DOIT
	(but yet no proper error estimate (but attenuation between
	cloudbox and sensor is considered)).

	* TODO: Restarted this file (just old stuff). Wrote down a few
	lines about things to fix/consider for DOIT.

	* src/m_doit.cc (iyInterpCloudboxField): Added handling of iy_aux
	and iy_error. However, the later only with a hard-coded and fixed
	error. 
	(iyInterpPolyCloudboxField): As above.

	* src/physics_funcs.cc (rayjean): New function.

	* src/m_jacobian.cc: Adopted call of iyb_calc.

	* src/workspace.cc: Changed the content of iy_aux and y_aux. These
	variables hold now just one quantity (with transmission as main
	case). Removed iy_aux_do (just made things complicated, with little
	efficiency gain).

2011-07-13  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-17-1

	* Split HIRS includes and added AVHRR setup

	* includes/hirs/hirs_fast.arts, includes/hirs/hirs_reference.arts:
	  - Split those in various subfiles that can (if wanted) be included
	    separately. The overall include-file remains for ease of use and
		backward compatibility. Now it is possible to use HIRS with your
		own lookup table. For example, rather than including
		hirs/hirs_reference.arts, one would do:

		INCLUDE "hirs/hirs_general.arts"
		INCLUDE "hirs/hirs_spectroscopy.arts"
		INCLUDE "hirs/hirs_sensor_common.arts"
		INCLUDE "hirs/hirs_sensor_reference.arts"

	* includes/hirs/hirs_general.arts,
	  includes/hirs/hirs_spectroscopy.arts,
	  includes/hirs/hirs_sensor_common.arts,
	  includes/hirs/hirs_hitran.arts: Added
	  - Those are the same for the reference and the fast setup. They are
	    actually also largely the same for AVHRR (see below).

	* includes/hirs/hirs_sensor_fast.arts,
	  includes/hirs/hirs_sensor_reference.arts: Added
	  - Here is the core functionality that differs between the fast and
	    the reference setup. This is the only part one probably always
		wants to include when using HIRS.

	* includes/avhrr/get_avhrr_srf.py: Added
	  - Script used to extract SRF from NOAA KLM User's Guide.

	* includes/avhrr/NOAA15_AVHRR.f_backend.xml,
	  includes/avhrr/NOAA15_AVHRR.backend_channel_response.xml,
	  includes/avhrr/NOAA16_AVHRR.f_backend.xml,
	  includes/avhrr/NOAA16_AVHRR.backend_channel_response.xml,
	  includes/avhrr/NOAA17_AVHRR.f_backend.xml,
	  includes/avhrr/NOAA17_AVHRR.backend_channel_response.xml,
	  includes/avhrr/NOAA18_AVHRR.f_backend.xml,
	  includes/avhrr/NOAA18_AVHRR.backend_channel_response.xml,
	  includes/avhrr/NOAA19_AVHRR.f_backend.xml,
	  includes/avhrr/NOAA19_AVHRR.backend_channel_response.xml,
	  includes/avhrr/METOPA_AVHRR.f_backend.xml,
	  includes/avhrr/METOPA_AVHRR.backend_channel_response.xml: Added
	  - Added SRF for AVHRR on KLM from NOAA KLM User's Guide.

	* includes/avhrr/get_sensor_los.py: Added
	  - Small script to calculate sensor LOS (1D).

	* includes/avhrr/avhrr.sensor_los.xml: Added
	  - Sensor line of sights, for AVHRR LAC/FRAC.

	* includes/avhrr/avhrr_reference.arts,
	  includes/avhrr/avhrr_sensor_common.arts,
	  includes/avhrr/avhrr_sensor_reference.arts,
	  includes/avhrr/README: Added
	  - Added setup for AVHRR. So far only the reference case.

	* tests/AVHRR/TestAVHRR.arts, tests/AVHRR/TestAVHRR.ybatch.xml: Added
	  - Added test case, based on TestHIRS.arts. Warning! slow:
		  This run took 5832.06s (37804.05s CPU time)
		For the Garand cases.

2011-07-12  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-17-0

	* Yet a new sub-version. Forgot that I planned to clean-up (and
	extend) the handling of iy_aux and iy_error, needing changes of
	iy_clearsky_agenda and iy_cloudbox_agenda. Hopefully few control
	file changes needed. So far, just that Ignore(ppath) shall be removed
	from definition of iy_cloudbox_agenda. There should be no effects
	on iy and y.
	(Work in  progress. Compiles with warnings. Checks OK.)

	* tests/DOIT/TestDOIT.arts: Removed call of Ignore(ppath) in
	definition of iy_cloudbox_agenda.

	* includes/agendasDOIT.arts: As above.
	
	* src/m_doit.cc (iyInterpPolyCloudboxField): As below.

	* src/m_doit.cc (iyInterpCloudboxField): Adopted with respect to
	in/out variables, but no calculations added yet.

	* src/m_rte.cc (iyEmissionStandardClearsky): Adopted to changes of
	iy_clearsky_agenda.
	(iyBeerLambertStandardClearsky): Adopted to changes of
	iy_clearsky_agenda.
	(iyMC): Adopted to changes of iy_clearsky_agenda.

	* src/agendas.cc (iy_clearsky_agenda): All of iy_error,
	iy_error_type, iy_aux and diy_dx are npw both in and out vars.
	Improved the sorting of in-variables.
	(iy_cloudbox_agenda): Added iy_error, iy_error_type, iy_aux and
	diy_dx is in/out-variables. Removed ppath as in-var.
	
	* src/make_array.h: Added definition of array with length 36 (to
	handle iyEmissionStandardClearsky). 

	* src/m_rte.cc (add_extrap): Renamed the "fix" fix_extrap to
	add_extrap (but kept so far as a local help function). 

2011-07-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-16-10

	* doc/uguide/Figs/wfuns: New folder. Added some figures from AUG-1. 

	* doc/uguide/references.bib: Added Read et al 2006.

	* doc/uguide/wfuns.tex: Continued writing.

	* doc/uguide/atmosphere.tex: Added two senstences about basis
	functions.

2011-07-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-16-9

	* tests: Removed 'Ignore(rte_doppler)' in 6 files. Now not needed. 

2011-07-08  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-16-8

	* src/m_abs.cc (abs_scalar_gasCalcLBL): Implemented Doppler shift.
	Is now handled internally, instead of on the agenda level.

	* src/m_abs_lookup.cc (abs_scalar_gasExtractFromLookup):
	Implemented Doppler shift. Also, removed input variable f_grid,
	since it was only used for an error check. While the check itself
	makes sense, I believe this method is not the right place for
	it. Also, performance reasons anyway prevent a thorough check
	here.
	(f_gridFromGasAbsLookup): Adapted to modified GetFgrid function.
	(p_gridFromGasAbsLookup): Adapted to modified GetPgrid function.
	(calc_lookup_error): Adapted to new abs_scalar_gasCalcLBL.

	* src/methods.cc (abs_scalar_gasCalcLBL): Added input variable
	rte_doppler, updated documentation.
	(abs_scalar_gasExtractFromLookup): Added input variables
	rte_doppler and extpolfac, updated documentation.

	* src/gas_abs_lookup.h (GetFgrid, GetPgrid): Reimplemented, now
	returns const reference to internal data member, instead of making
	a copy.

	* src/gas_abs_lookup.cc (GetFgrid, GetPgrid): See above.

	* includes/general.arts, tests/DOITBatch/TestDOITBatch.arts,
	tests/MonteCarlo/TestMonteCarloGeneral.arts,
	tests/DISORT/TestDISORT.arts, tests/HIRS/TestHIRS.arts,
	tests/Abs/TestAbsDoppler.arts, tests/AMSU/TestAMSU_generic.arts,
	tests/OdinSMR/TestOdinSMR.arts, tests/OdinSMR/TestOdinSMR_1D.arts:
	Updated abs_scalar_gas_agenda.

	* doc/uguide/absorption.tex (Gas absorption in radiative transfer
	simulations): Updated stuff related to Doppler.

2011-07-08  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-16-7

	* doc/uguide/wfuns.tex: Continued writing. Far from complete.

2011-07-08  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-16-6

	* doc/uguide/references.bib: Added Eriksson 2000, and final data
	for ARTS-2 article.

	* doc/uguide/CMakeLists.txt: Included wfuns.tex. Removed some
	arts-1 section files that probably never will be activated.

	* doc/uguide/arts_user.tex: Included wfuns.tex.

	* doc/uguide/wfuns.tex: Started.

	* src/workspace.cc: Small change for y_unit.

	* doc/uguide/rte.tex: Spell checking. Extended. Added information
	around emission_agenda, iy_space_Agenda and units.

	* src/methods.cc: Clarified the unit for all methods returning
	"Planck data" (MatrixCBR, emissionPlanck and MatrixPlanck).

2011-07-07  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-16-5

	* doc/uguide/arts_theory.tex: Added Thomas Kuhn and Nikolay Koulev
	as contributing authors, for their contribution to the absorption
	part.

2011-07-07  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-16-4

	* doc/uguide/absorption.tex: Implemented Patrick comments. (Ok,
	some of them, at least.)

	* doc/uguide/absorption_theory.tex: First complete draft of
	this. Finished for now, from my point of view.

	* doc/uguide/Figs/abs_theory/: Added this directory, which
	contains three figures used by the hydrometeor absorption chapter
	(which is part of the file absorption_theory).

2011-07-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-16-3

	* Winds now implemented for all "clear-sky RT" WSM. Tests made
	that Doppler shifts have the correct sign for 1-3D, and different
	combinations of LOS and wind directions.
	Wind jacobians will come later!

	* src/m_rte.cc (iyBeerLambertStandardClearsky): Now considering
	winds.
	(iyEmissionStandardClearskyBasic): Now considering winds.

	* src/rte.cc (get_ptvmr_for_ppath): Removed. Replaced by
	get_ppath_atmvars.
	(get_step_vars_for_standardRT): Removed. Replaced by
	get_ppath_rtvars.

	* tests/GroundBased/TestWinds.arts: Now a complete control file
	for testing winds.

2011-07-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-16-2

	* Winds now fully implemented in iyEmissionStandardClearsky, but
	no testing at all. (Checks work, so all should be OK for zero winds.)

	* tests/GroundBased/TestWinds.arts: Started.

	* src/rte.cc (get_ppath_atmvars): Modified version of existing
	function, but also handling wind fields.
	(get_ppath_rtvars): Modified version of existing
	function, but also calculating Doppler wind shifts.

	* src/m_rte.cc (iyEmissionStandardClearsky): Now using.
	get_ppath_atmvars and get_ppath_atmvars. Wind fields added as input.

	* src/m_jacobian.cc (jacobianCalcTemperature): Added z_surface as
	input, to call new version of z_fieldFromHSE.

	* src/m_atmosphere.cc (z_fieldFromHSE): It is now checked that no
	 gap between *z_surface* and "*z_field* has been genereted.

	* src/montecarlo.cc (opt_propCalc2): Commented out this function.
	Not called by any function. A copy of opt_propCalc, except of some
	missing asserts!

	* doc/uguide/winds.tex: Fixed some spelling mistakes. Added
	definition of frequency to select (v0).

	* src/agendas.cc: Removed comment on "transmission calculations",
	as this now can be achieved without involving this agenda.

	* src/methods.cc: Improved description for basics_checkedCalc and
	cloudbox_checkedCalc.

2011-07-06  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-16-1

	* New sub-version as this commit requires some small changes of
	most control files:
	1. atm_checkedCalc renamed to basics_checkedCalc.
	2. If you are calling yCalc or MCGeneral, a call of
	   cloudbox_checkedCalc must be added. 
	3. If you are not using include.arts, you also need to set the 
	   wind fields (to be empty).
	
	* tests/*/Test*.arts: Added call of cloudbox_checkedCalc. 

	* src/m_rte.cc (yCalc): Now using cloudbox_checked.

	* src/m_cloudbox.cc (cloudbox_checkedCalc): New WSM. Extended
	version of chk_cloudbox (winds are demanded to be zero.).
	(pnd_fieldExpand1D): Now using cloudbox_checked.

	* src/check_input.cc (chk_cloudbox): Removed. 

	* src/m_atmosphere.cc (atm_checkedCalc): Removed.
	(basics_checkedCalc): Extended version of atm_checkedCalc.
	Now also considering the winds, stokes_dim and f_grid.
	(z_fieldFromHSE): atm_checked -> basics_checked.
	
	* includes/general.arts: Wind fields are now defined, all set to
	be empty (i.e. no winds).

	* src/workspace.cc: Wind fields now named as u, v and w (following
	nomenclature established in AUG). Renamed at_checked to
	basics_checked, and extended its scope (in the description).
	Introduced cloudbox_checked.

2011-07-06  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-15-50

	* doc/uguide/absorption_theory.tex (Line absorption): Finished
	revising this section. Continuum section next.

	* doc/uguide/references.bib (kuntz:99): Added.

	* doc/uguide/montecarlo.tex: Bugfix: Some references used \label
	instead of \ref, resulting in "multiply defined label" TeX
	warnings.

2011-07-05  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-15-49

	* doc/uguide/absorption.tex: Cosmetics.

2011-07-05  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-15-48

	* doc/uguide/absorption.tex (sec:absorption:lookup): Revised
	lookup table section. Draft of absorption chapter in AGU
	complete now! Revision of absorption in theory guide will follow
	in the next days.

	* doc/uguide/common.tex (\startsymbols, \startsymbolswithunits):
	Bug fix: The caption was included with the closing command of the
	symbol table (\stopsymbols, \stopsymbolswithunits). As a
	consequence, a \label command inside the symbol table was not
	assigned to the table itself, but to the entire chapter. Now the
	label works correctly, but the caption is on top of the table, not
	at the bottom. Don't know any other easy fix for this.

	* doc/uguide/references.bib (buehler:absor:11): Updated.

2011-07-04  Daniel Kreyling  <daniel.kreyling(at)physik.uni-muenchen.de>

	* arts-1-15-47

	* src/cloudbox.cc (IWCtopnd_MH97):
	Corrected a quite fundamental conception error. The two modes of
	this distribution are cumulative. So far the code was just
	calculating rather the first mode or the second mode and returning
	the individual values.
	(chk_pndsum):
	After correcting the error in the size distribution, the
	deviations of summed up particle number densities to input IWC are
	reduced. If the deviation is more than 10%, ARTS will give a
	warning to "out1". Additionally the pnd values will always get
	rescaled with the ratios of initial IWC to summed up pnds.  The
	ratios are written to "out2".

	* src/methods.cc:
	Updated documentation for pnd_fieldSetup.

2011-07-04  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-15-46

        * doc/uguide/absorption.tex, doc/uguide/development.tex,
	doc/uguide/integration.tex, doc/uguide/matrix_vector.tex,
	doc/uguide/common.tex, doc/uguide/surface.tex,
	doc/uguide/concept.tex, doc/uguide/scattering.tex,
	doc/uguide/batch.tex, doc/uguide/winds.tex,
	doc/uguide/interpolation.tex, doc/uguide/gridded_fields.tex,
	doc/uguide/clouds.tex, doc/uguide/rte.tex, doc/uguide/agendas.tex,
	doc/uguide/lin_alg.tex, doc/uguide/atmosphere.tex,
	doc/uguide/sensor.tex, doc/uguide/ppath.tex:
	New feature! Names of workspace variables, methods, and agendas in
	the guide documents now link to the corresponding built-in
	documentation. For this, command \artsstyle was replaced by two
	new commands: \builtindoc and \shortcode. The former should be
	used for everything that has a built-in documentation, the latter
	for everything else. Commands \wsvindex, \wsmindex, etc. also now
	implicitly use \builtindoc, so they will generate the correct
	links.
	I hope this feature will at some point in the future also allow an
	automatic check whether all the names of workspace variables and
	methods in the user guide are correct, simply by automatically
	looking for broken links.
	Credit for the new feature is largely due to Oliver! The LaTeX
	part was very easy, all the work is done by the built-in docserver.

2011-07-01  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-15-45

	* doc/uguide/absorption.tex: All planned text there now, but old
	lookup table section still needs check/cleanup.

2011-06-30  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-15-44

	* doc/uguide/absorption.tex: Still work in progress.

2011-06-29  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-43

	* src/docserver.cc:

	(ds_find_token_type): Add ds_ prefix to function name. Optimize
	implementation.

	(ds_doc_description_add_links): Apply same optimizations as in
	ds_find_token_type.

	* src/workspace.cc: Change iy_fos_agenda -> fos_y_agenda in fos_y docs.

2011-06-29  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-15-42

	* doc/uguide/absorption.tex: More writing. Far from finished.

2011-06-29  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-41

	* doc/uguide/common.tex:

	New environment 'code' for multiline verbatim code and controlfile
	examples.

	* doc/uguide/*.tex:

	lstlistings is out, fancyvrb is in. The former has a bug that squishes
	the spacing between sections under some cirumstances.

2011-06-29  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-40

	* src/docserver.cc:

	(ds_insert_index, ds_insert_doc): Add support for "/all/".

	(find_token_type): Add method to determine token type.

2011-06-28  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-15-39

	* doc/uguide/absorption.tex: Started on rewriting this. Work in
	progress!

	* doc/uguide/absorption_theory.tex: Minor \label changes.

	* doc/uguide/: Emptied the SVN ignore list. Since we are now
	building in a separate directory, there should be no LaTeX output
	files here, so no reason to ignore anything.

2011-06-23  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-15-38

	* doc/uguide/absorption_theory.tex: More work on this. Far from complete!

	* doc/uguide/references.bib (cverdes:05): Added (Carmen's
	partition function paper).

2011-06-22  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-15-37

	* src/methods.cc (abs_lineshapeDefine): Removed the option of a
	linear forefactor (makes no physical sense, removal was already
	decided at last ARTS workshop).

	* src/continua.cc: Only cosmetics.

	* src/lineshapes.cc (define_lineshape_norm_data): Removed the option of a
	linear forefactor.

	* doc/uguide/arts_theory.tex: Include new chapter absorption_theory.tex.

	* doc/uguide/CMakeLists.txt (arts_user): Added absorption.tex,
	which was missing, although it is already a part of the document.
	(arts_theory): Added absorption_theory.tex, the new chapter.

	* doc/uguide/absorption_theory.tex: Added. This will become the new
	absorption chapter in the theory guide. Most of the ARTS-1
	absorption documentation will go here. My plan is to then add a
	short practical part in the user guide, with appropriate references to
	the theory guide. Work in progress!

	* doc/uguide/references.bib: Added some references needed by
	absorption_theory.tex.

	* doc/uguide/old_absorption.tex: Removed. This was obsolete, an
	earlier attempt to move absorption documentation to ARTS-2, but
	the ARTS-1 documentation has changed so much in the mean time that
	I make a fresh start.

2011-06-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-36

	* doc/uguide/arts_theory.tex:

	No need for further delays... only one verbatim here.

	* doc/uguide/app_wsv.tex: Removed. Unused.

	* doc/uguide/CMakeLists.txt: Add common.tex to all three targets.

	* doc/uguide/common.tex: Remove verbatim package.

2011-06-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-35

	* doc/uguide/absorption.tex, doc/uguide/development.tex,
	doc/uguide/integration.tex, doc/uguide/matrix_vector.tex,
	doc/uguide/concept.tex, doc/uguide/scattering.tex,
	doc/uguide/arts_user.tex, doc/uguide/CMakeLists.txt,
	doc/uguide/batch.tex, doc/uguide/interpolation.tex,
	doc/uguide/gridded_fields.tex, doc/uguide/clouds.tex,
	doc/uguide/sensor.tex, doc/uguide/arts_developer.tex:

	Replace all verbatim environments with lstlisting and remove font size
	workarounds like \small or \footnotesize.

	arts_theory files will follow after Stefan finished working on it.

	* doc/uguide/CMakeLists.txt: Add missing integration.tex.

2011-06-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-34

	* doc/uguide/common.tex:

	Use same font family for lstlisting as for verbatim and artsstyle.

	* doc/uguide/agendas.tex:

	Bring contents up to date.

	Replace all verbatim environments with lstlisting.

	* doc/uguide/concept.tex: Remove resolved fixme.

	* src/arts.h, src/workspace.cc (get_wsv_id):

	Add function overload that takes a char* as input for debugging
	convenience.

	* src/methods.cc: Update r_geoidSpherical a bit.

2011-06-22  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-15-33

	* src/m_cloudbox.cc(pnd_fieldSetup): Bugfix
	  - Initialise pnd_field even if cloudbox is of (set zero-sized).

	* src/m_montecarlo.cc(MCGeneral): Bugfix
	  - If there are no scattering particles, throw an exception (was
	  assertion).

2011-06-22  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-15-32

	* doc/uguide/winds.tex: A complete version (described stuff not
	yet implemented).

	* doc/uguide/arts_user.tex: Added geoid and wind sections under
	PE. Moved batch section from PE to SB.

2011-06-21  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-15-31

	* src/m_cloudbox.cc(pnd_fieldSetup): Bugfix
	  - Added check for bounds in cloudbox vs. t_field and
	    massdensity_field.

2011-06-21  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-15-30

	* doc/uguide/CMakeLists.txt: Added winds.tex.

	* doc/uguide/winds.tex: Started.

	* doc/uguide/arts_user.tex: Now includes a wind section.

2011-06-17  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-15-29

	* src/m_montecarlo.cc(MCGeneral): Minor change
	  - Removed argument z_field_is_1D, unused.

	* src/montecarlo.cc:
	  (mcPathTraceGeneral): Minor change
	  - Removed argument z_field_is_1D, unused.
	  - Removed meaningless line Index rubbish=z_field_is_1D;rubbish+=1;
	  (mcPathTraceIPA): Fixed typo in comment
	  (Sample_los): Cleanup
	  - Removed documentation that beared no link to contents.
	  - Added small comment documenting what is implemented here
	
	* src/methods.cc:
	  (iyMC): Minor change
	  - Removed unused z_field_is_1D.
	  (MCGeneral): Minor change
	  - Removed unused z_field_is_1D.
	
	* src/montecarlo.h:
	  (mcPathTraceGeneral): Minor change
	  - Removed unused z_field_is_1D.
	
	* src/cloudbox.cc:
	  (barometric_heightformula): Minor change
	  - Fixed typo in comment
	
	* src/m_rte.cc:
	  (iYMC): Minor change
	  - Removed unused z_field_is_1D.
	
	* src/workspace.cc:
	  (f_index): Expanded documentation
	  - Pointed out that in some contexts, f_index can be negative,
	  meaning all frequencies.

2011-06-16  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-15-28

	* src/montecarlo.cc(matrix_exp_p30): Expanded
	  - Fill M(3,3)

2011-06-15  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-27

	* src/docserver.cc: Keep the navigation bar always visible.

2011-06-15  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-15-26

	* doc/uguide/rte_theory.tex: Revised. Made an attempt to make it
	less obvious that text from several places has been appended.
	Removed some overlap and basic stuff, such as the section on blackbody
	radiation.

	* doc/uguide/polarization.tex: Corrected some typos. Added some
	references, fixing some FIXME. Removed two FIXME that did not look
	critical. Changed to UK spelling.

2011-06-15  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-25

	* src/docserver.cc:

	Display the 'Go to' links on every pages for easier navigation.

	Replace the tables on index pages by divs.

	Improved layout on mobile devices.

2011-06-14  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-15-24

	* doc/uguide/surface.tex: Added an equation that had got lost.
	Polished on text for Lambertian surfaces.

	* doc/uguide/rte_theory.tex: Fixed typos in surface section.

	* doc/uguide/arts_theory.tex: Changed order on polarisation and RT
	sections.

2011-06-14  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-23

	* mc_interp.{h,cc} (interp):

	Refactor the interpolation routines to avoid creating unnecessary
	temporary objects. Instead of returning (->copying) a Vector/Matrix,
	pass in a VectorView/MatrixView. Change implementation of interpolation
	loops to avoid the need for a temporary Vector/Matrix. Change
	ArrayOfVector/Matrix input argument to a constant reference.

	* montecarlo.cc: Adapt for changes in mc_interp.

2011-06-13  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-15-22

	* doc/uguide/rte_theory.tex: Added a section for surfaces and
	moved large parts of the old AUG surface section.

	* doc/uguide/surface.tex: In revision. Not comple.

	* src/m_surface.cc (surfaceLambertianSimple): "Activated" the
	method. It has not been tested heavily, but the theoretical
	aspects appear to be OK.

2011-06-13  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-15-21

	* doc/uguide/ppath.tex: This section modified and revised.

	* src/m_general.cc (Print):
	* src/xml_io_compound_types.cc:
	* src/ppath.cc: Adopted to removed fields: method and refraction.

	* src/ppath.h: Removed fields method and refraction. They fill no
	practical purpose.

2011-06-13  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-15-20

	* doc/uguide/rte.tex (section{Propagation paths}): Some
	corrections and moved some information to ppath section.

	* doc/uguide/ppath.tex: Moved geoid part to surface section. Work
	in progress.

	* doc/uguide/surface.tex: Added geiod text from ppath section. Work
	in progress.

	* doc/uguide/rte.tex: Extended and revised.

	* doc/uguide/arts_user.tex: Placed surface section before ppath one.

2011-06-10  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-15-19

	* doc/uguide/rte.tex: Started on revision.

	* doc/uguide/atmosphere.tex: Changed from calling the part chapter
	to section.

	* doc/uguide/formalism.tex: Removed some outdated information.

2011-06-10  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-15-18

	* Started some more active work on AUG. Let's start with a
	relatively clean history for the AUG chapters, now when relasing
	arts-2. To leave room for documenting future changes.

	* doc/uguide/atmosphere.tex: Some new text, mainly to better
	clarify that several vertical coordinates must be used. Revised.

	* doc/uguide/arts_user.tex: Activated the surface chapter, as
	there are references to this chapter from other chapters.

	* doc/uguide/concept.tex: Checked. Removed details from old history.

2011-06-09  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-17

	* src/main.cc: Also output timing info in case a runtime error occured.

2011-06-09  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-15-16

	* src/xml_io_compound_types.cc:
	  (SingleScatteringData::xml_read_from_stream):
	  Verify zenith-angle grid covers the full range.
	  If not, throw runtime-error.

2011-06-09  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-15

	* src/methods.cc, src/make_auto_md_cc.cc:

	Automatically generate Create methods for all groups.

	* src/m_create.cc: Removed.

	* src/CMakeLists.txt: Removed m_create.cc from sources.

	* doc/uguide/concept.tex: Updated.

	* src/groups.cc: Removed unused group SLIData2.

2011-06-08  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-15-14

	* doc/uguide/concept.tex: Some editorial changes, following Gerrit's
	comments.

	* src/methods.cc: Eliminated the outdated term "supergeneric" from
	all method descriptions.

2011-06-08  Jana Mendrok <jana.mendrok@ltu.se>

	* arts-1-15-13

	* src/m_cloudbox.cc, src/cloudbox.cc, src/methods.cc:

	Allow wildcards ("*") and omitting for sizemin and sizemax tags of
	part_species. Doc adapted accordingly.

2011-06-02  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-15-12

	* Gave on my attempt to "open up" the RT methods. In the end I had
	to add so many variables and metodhs, that the small gain was
	outweighted by increased complexity. Made a first small step
	towards adding winds.

	* src/workspace.cc: Added wind_x_field, wind_y_field and
	wind_z_field.

	* src/m_ppath.cc: Removed functions added in my last commit.

	* includes/general.arts: Removed definition of
	ppath_atmvars_agenda. 

	* src/agendas.cc: Removed ppath_atmvars_agenda.

	* src/methods.cc: Corrected description for
	iyEmissionStandardClearsky. Put some methods at correct place
	alphabetically.

	* src/rte.cc (get_step_vars_for_standardRT): Cosmetic changes.

	* src/m_rte.cc (iyXXXXX): Cosmetic changes.
	
2011-05-31  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-15-11

	* src/optproperties.cc(interpolate_scat_angle): bugfix
	  - nans can occur not only when aa_sca-aa_inc ~= 0, but also
	    abs(aa_sca-aa_inc) ~= 360. Account for this.

2011-05-30  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-15-10

	* src/methods.cc: Cleanup
	  - Wherever keywords were described in the main documentation string
	    but the actual GIN_DESC were FIXME DOC, moved this documentation
		to the GIN_DESC. For two methods, FIXME DOC remains, because I
		didn't know what to write. Those are: *ybatchMetProfiles* and
		*ybatchMetProfilesClear*.
	
	* src/m_abs_lookup.cc(abs_scalar_gasExtractFromLookup):
	  - As discussed with Stefan, uncommented the full check for equal
	    frequency grids and, as a compromise, replaced this by a check
		checking just the length. Ultimately, 
		In theory, this check should happen here, so that the user cannot
		trigger an assertion. However, this method is very deep inside and
		thus a check here is very expensive. Alternatives would be:
		- When abs_lookup_is_adapted is set to 1 (by abs_lookupAdapt), set
		  all the appropiate variables read-only. This is not currently
		  possible in ARTS. Ideally, only abs_lookupAdapt should be able
		  to set abs_lookup_is_adapted.
		- When any of the relevant variables is changed, set
		  abs_lookup_is_adapted to 0. That is probably not easy to
		  implement.

2011-05-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-9

	* src/m_general.cc, src/methods.cc:

	Add WSM verbosityInit which initializes the verbosity WSV with
	defaults or the levels specified on the command line.

	* includes/general.arts: Add call to verbosityInit.

	* src/docserver.cc (ds_insert_index):

	Change the 'Jump to' link targets to point to the separate index pages
	instead of the anchors on the main pages.

2011-05-25  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-15-8

	* includes/general.arts: Added standard definition of
	ppath_atmvars_agenda (setting winds to zero).

	* src/m_rte.cc (iyEmissionStandardClearsky): Now using
	ppath_atmvars_agenda.
	
	* src/m_ppath.cc (interpolation_weightsFromPpathForAtmFields)
	(ppath_pFromPgrid, ppath_tFromTfield, ppath_vmrFromVMRfield)
	(ppath_windsZero): New WSMs.

	* src/workspace.cc: Removed obselete variables ppath_transmissions
	and ppath_array. Added WSV:
	interpolation_weights, ppath_p, ppath_t, ppath_vmr, ppath_winds

	* src/groups.cc: Removed ArrayOfPpath. Not used any longer.

2011-05-24  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-15-7

	* src/m_rte.cc (fix_extrap): Missed to use referencing here.
	(Noticed by Oliver. Thanks.)

	* src/ppath.h (struct Ppath): Renamed filed p to nreal. To store real
	part of refractive index.
	Removed fields t and vmr (not used for a long time!)

2011-05-24  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-15-6

	* src/m_rte.cc (diy_from_path_to_rgrids): Added a small
	(temporary?) fix to obtain the correct basis function outside the
	range covered by a retrieval grid. I had misunderstood how the
	gridpos function handles extrapolation.

2011-05-24  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-15-5

	* src/m_atmosphere.cc:
	  (batch_atm_fields_compactAddConstant): Added
	  - Added WSM to add constat to batch_atm_fields. I need this because
	    I need to add a constant profile to some, but a constant value to
		others, and need to add those in the same order as in abs_species.
		Hence, I cannot use the constant-setting in
		batch_atm_fields_compactFromArrayOfMatrix directly.
	  (batch_atm_fields_compactFromArrayOfMatrix): Adapted
	  - Parallelise for-loop.

	* src/m_abs_lookup.cc (abs_scalar_gasExtractFromLookup): Adapted
	  - Added check to verify the lookup table frequency grid is the same
	    as the radiative transfer frequency grid. I included hirs_fast,
		then set my frequency grid monochromatically (hirs_fast still
		contains a lot of other settings useful for IR), and got an
		assertion. Now this raises a runtime-error instead. To be
		discussed: maybe this check should be somewhere else?
		This method now needs f_grid as an input (that should be no
		problem, as it's unlikely anybody calling this method does not
		have f_grid set, or?)

	* src/methods.cc: Adapted
	  - Added batch_atm_fields_compactAddConstant (see above).
	  - Added f_grid as dependency to abs_scalar_gasExtractFromLookup (see
	    above).
	  - For VectorInsertGridPoints, fixed FIXME DOCS with appropiate
	    documentation.
	  - For AtmRawRead, removed reference to *p_field_raw*. What could
	    this possibly have meant, ever?

	* src/workspace.cc: Adapted
	  - For doit_za_grid_opt, replaced *DoitGridOptimization* by
	    *doit_za_grid_optCalc*.
	  - For abs_lookup, replaced FIXME with reference to the appropiate
	    chapter in the AUG.

	* src/optproperties.cc: Fixed documentation bugs
	  (ext_matTransform): docbugfix
	  - I guess ext_mat_lab/ext_mat_data is the extinction matrix and not the
	    absorption vector.
	  (pha_matTransform): dogbugfix
	  - I guess pha_mat_lab/pha_mat_data is the phase matrix and not the
	    absorption vector.
	
	* src/check_input.cc: Fixed bug
	  - When outputting error message, output names of two vectors, not
	    just one.

2011-05-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-4

	* cmake/scripts/update_doxyfile.cmake, doc/doxygen/Doxyfile.in:

	Add build/src to the Doxygen input path. Since we no longer build
	inside the source tree, the auto_* files are generated in the
	build/src directory. If doxygen can't find the auto_* files, the
	documentation for workspace methods is missing. Bug reported by Gerrit.

2011-05-19  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-3

	* src/m_batch.cc (ybatchCalc):

	Don't try to store y in ybatch if it's empty.
	Prevents an assertion if one tries to do something dirty like:

	AgendaSet(ybatch_calc_agenda){
		Touch(y)
		Touch(jacobian)
		Print(ybatch_index)
	}

	IndexSet(ybatch_start, 0)
	IndexSet(ybatch_n, 10)

	ybatchCalc

	* src/CMakeLists.txt: Cosmetics.

	* Working on the foundation for the new verbosity implementation.
	Nothing to see here, yet.

	* src/methods.cc, src/groups.cc, src/workspace.cc:

	New WSMs: verbositySet, verbositySetAgenda, verbositySetFile,
	verbositySetScreen and temporary TestVerbosity.

	New WSV: verbosity.

	New Group: Verbosity.

	* src/m_general.h:

	Add WSMs to modify verbosity and a temporary test function.

	* src/message.h:

	Add new ArtsOut class and derive ArtsOut0-3 from that.

	Add Verbosity class.

        Add output operator for ArtsOut.

	* src/messages.cc: Add verbosity output operator.

	* src/xml_io_instantiation.h, src/xml_io_compound_types.cc,
	src/xml_io_types.h:

	Add dummy functions for verbosity reading/writing.

	* src/make_auto_md_cc.cc, src/make_auto_md_h.cc:

	Add code to add the verbosity argument to the parameter list of the
	TestVerbosity WSM. Eventually, the argument will be appended to every
	WSM.

2011-05-17  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-15-2

	* src/m_general.cc (Test): Created a small test case, to check how
	grid positions are treated for extrapolation. To be discussed with
	Stefan.

2011-05-17  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-1

	* src/CMakeLists.txt:

	Add an unused target that lists all header files. This makes sure that
	the header files are included in Xcode or Eclipse project files.

	* src/parser.cc (ArtsParser::set_gin_to_default):

	Improve runtime error for non-supported default value types.

2011-05-13  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-15-0

	* (Version number): New minor version number, since these changes will break
	controlfiles that explicitly define there own
	abs_scalar_gas_agenda. In that case, the fix is to add
	Ignore(rte_doppler) in abs_scalar_gas_agenda.

	* (New features): Now handles Doppler shift in on-the-fly
	absorption simulations, if abs_scalar_gas_agenda is defined
	properly. Does not yet handle Doppler shift when absorption is
	taken from lookup table.

	* includes/general.arts: Redefined abs_scalar_gas_agenda to ignore
	rte_doppler. (By adding Ignore(rte_doppler)) Put also comments
	there how to turn Doppler on.

	* tests/Abs/TestAbsDoppler.arts: Added. A new test, specifically
	for the doppler shifted absorption. Demonstrates how Doppler can
	be turned on.

	* tests: Added Ignore(rte_doppler) to abs_scalar_gas_agenda in all
	test cases.

	* src/agendas.cc (abs_scalar_gas_agenda): Added input parameter rte_doppler.

	* src/workspace.cc (abs_doppler, abs_doppler_do): Removed, since
	these are not needed with this new solution to the Doppler
	problem.
	(rte_doppler): Added. This is the communication variable for
	abs_scalar_gas_agenda.

	* src/methods.cc (abs_fieldCalc): Added new argument doppler,
	for doppler absorption coefficient testing. This is a generic
	input argument with an empty vector as default value.

	* src/m_abs_lookup.cc (abs_fieldCalc): Added new argument doppler,
	for doppler absorption coefficient testing.

	* src/disort.cc (dtauc_ssalbCalc): Put 0 for new rte_doppler
	argument of abs_scalar_gas_agenda.

	* src/doit.cc (cloud_RT_no_background,
	cloud_ppath_update1D_planeparallel): Put 0 for new rte_doppler
	argument of abs_scalar_gas_agenda.

	* src/m_fos.cc (iyFOS): Put 0 for new rte_doppler argument of
	abs_scalar_gas_agenda.

	* src/m_rte.cc (iyBeerLambertStandardCloudbox): Put 0 for new
	rte_doppler argument of abs_scalar_gas_agenda.

	* src/montecarlo.cc (clear_rt_vars_at_gp, cloudy_rt_vars_at_gp):
	Put 0 for new rte_doppler argument of abs_scalar_gas_agenda.

	* src/rte.cc (get_step_vars_for_standardRT): Put 0 for new
	rte_doppler argument of abs_scalar_gas_agenda.

2011-05-13  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-212

	* src/m_rte.cc (yCalc):

	If we're not calculating jacobians, make sure the output variable
	is resized them to 0.

	* src/groups.cc: Remove unused ArrayOfArrayOfArrayOfArrayOfGridPos.

	* src/methods.cc, src/m_create.cc:

	Implement remaining ArrayOfGriddedFieldXCreate methods.

	* src/methods.cc: Extend doc of Delete method.

	* src/make_auto_md_cc.cc: Add erasing of Tensor3 for output only.

2011-05-12  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-211

	* src/gridded_fields.h (checksize):

	Fix warnings generated by some GCC versions (that assume programmers
	don't know about operator precedence) by inserting parenthesis around
	&& when using in conjunction with ||.

2011-05-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-210

	* A quick check of the BRDF part of the surface chapter (still
	"inactive"), after reading the Petty book (for the first time).
	
	* doc/uguide/surface.tex: Removed some stray letters. Changed
	i index between "in and out angles" in definition of r for BRDF.
	Added citation of Petty.  

	* doc/uguide/references.bib: Added the Petty book. 

2011-05-11  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-209

	* src/gridded_fields.h (checksize):

	Allow the grids for dimensions of size 1 to be empty.

	* src/m_atmosphere (atm_fields_compactFromMatrix):

	After the above changes, lat and lon grids can be set to empty again.

	* NEWS: Removed.

2011-05-10  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-208

	* src/parameters.cc:

	Only use ARTS_DEFAULT_INCLUDE_DIR if the user hasn't passed a custom
	path by setting the environment variable ARTS_INCLUDE_PATH or by
	passing the -I option to arts.

2011-05-10  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-207

	* src/parameters.cc:

	Add the includes directory in the ARTS source directory
	automatically to the include search path.

	* CMakeLists.txt, config.h.cmake:

	Define ARTS_DEFAULT_INCLUDE_DIR.

	* tests/testall.py, cmake/modules/ArtsTestcases.cmake:

	Remove TOPSRC dir. Not needed for include path anymore.

2011-05-10  Jana Mendrok <jana.mendrok@ltu.se>

	* arts-1-14-206

	* src/m_abs_lookup.cc:

	abs_lookupSetupBatch:
	- allow batch_fields to contain particle related profiles (current
	requirement: they need to be placed in between (T,z) and abs_species
        corresponding data), i.e., now able to handle batch_atm_fields_compact
        as well as batch_atm_fields_compact_all types
	- de-hardwire position of H2O profiles (before: first abs_species, i.e.,
	first (abs)profile in batch_fields. now: any place ok (same as has
	already been in abs_lookupSetup; position derived by tag comparison)

2011-05-09	Gerrit Holl	<gerrit.holl@ltu.se>

	* arts-1-14-205

	* src/m_atmosphere.cc: expanded
	  - In atm_fields_compactFromMatrix, set the lat- and lon-grids to
	  Vector(0, 1, 1) (that is, [0]) rather than Vector() (that is, []),
	  or .checksize() will fail (since the data have no 0-dims). Obviously
	  nobody was using .checksize() as recommended by the developer's
	  guide.

	  - In atm_fields_compactAddSpecies, remove debugging couts.

	  - Added batch_atm_fields_compactAddSpecies

	* src/methods.cc: Expanded
	  - Added batch_atm_fields_compactAddSpecies
	
	* tests/testall.py: Adapted
	  - Be like a good dog-owner and clean up after the little test case
	  that cannot clean up after itself.

2011-05-09  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-204

	* src/workspace.cc (abs_doppler, abs_doppler_do): Added these two
	variables, first step towards Doppler implementation for absorption.

2011-05-09  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-203

	* src/docserver.cc:

	Change order in index to groups, variables, methods, agendas.

	Change order of methods list in group, variable and agenda documentation
	to specific output of X, generic output of X, specific input of X,
	generic input of X.

2011-05-04  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-202

	* More fixes for cases where output-only variables were used as input.

	* src/agendas.cc:

	jacobian_agenda: Add WSV jacobian as input for jacobian_agenda because
	the agenda modifies the existing jacobian values and thus jacobian must
	also be defined as input to the agenda.

	iy_clearsky_agenda: iy_error and iy_error_type are used as input under
	some circumstances, so they can't be declared output-only.

	* src/methods.cc:

	iyEmissionStandardClearsky, iyBeerLambertStandardClearsky:
	Only initialize iy_error and iy_error_type if iy_agenda_call1 is 1.
	Otherwise they are used as input. Therefore, both MUST be declared as
	input variables.

	jacobianCalc*: All the functions that are meant to be used inside the
	jacobian_agenda modify the jacobian variable. But jacobian was defined
	as output-only. Added jacobian as input too for all of them.

	jacobianCalcAbsSpeciesAnalytical: Dummmy method that is added to the
	jacobian_agenda for analytical calculation to satisfy the
	jacobian_agenda input/output requirements.

	jacobianAdd*: Remove the PASSWORKSPACE() flag for all of these, it's
	passed anyway because they have an agenda as input.

	jacobianClose: Add jacobian_agenda as input and output to run the
	consistency check inside this function.

	* m_jacbobian.cc:
	
	(jacobianClose): Run the self-consistency check for the
	jacobian_agenda here.
	
	(jacobianCalcAbsSpeciesAnalytical): Added.

	(jacobianAdd*): Mark ws argument as unused. jacobian_agenda.append()
	no longer needs ws.

	(jacobianAddAbsSpecies): Add jacobianCalcAbsSpeciesAnalytical to the
	jacobian_agenda for the analytical case.

	* src/m_rte.cc (iyBeerLamberStandardCloudbox):

	Has iy_error and iy_error_type as output only, but never initialized
	them.

	* src/methods.h, src/methods_aux.cc:

	Cache an ArrayOfIndex with the output only variables in MdRecord.

	* tests/MonteCarlo/TestRteCalcMC.arts:

	Add Ignore for iy_error and iy_error_type to iy_clearsky_agenda.

	* src/make_auto_md_cc.cc:

	In Debug mode, initialize Output only variables with values that
	should trigger assertions or runtime errors if they are misused as
	inputs. Currently Numeric is set to NaN, Index to -1, Vectors
	and Matrices are resized to 0. More to come...

	* src/agenda_class.cc (Agenda::append):

	Set the input of the new MRecord to InOnly() instead of In().
	Don't call AgendaAppend to avoid the consistency check. It has to be
	done at a later stage after building up the Agenda is finished.

2011-05-06	Gerrit Holl	<gerrit.holl@ltu.se>

	* arts-1-14-201

	* src/m_atmosphere.cc: Expanded
	  - Added WSM *atm_fields_compactAddSpecies*.
	    This method appends a GriddedField3 to atm_fields_compact.  The
		GriddedField3 is interpolated upon the grid of atm_fields_compact.
		A typical use case for this method may be to add a climatology of
		some gas when this gas is needed for radiative transfer
		calculations, but not yet present in atm_fields_compact. One case
		where this happens is when using the Chevalier dataset for
		infrared simulations.
	  - Moved shared functionality between *atm_fields_compactAddSpecies*
	    and *atm_fields_compactAddConstant* to new helper function
	    *atm_fields_compactExpand*
	  - In this shared functionality, commented out check that at least
	    one species already exists. As pointed out in the source code, I
		believe this check is not needed. Oliver agrees. We can still
		infer the dimensions even if there are zero fields; e.g., the data
		might have dimensions (0, 4, 3, 8).
	  - Fixed some error messages in AtmFieldsFromCompactChevalAll.
	
	* src/methods.cc: Expanded
	  - Added aforementioned WSM here.
	
	* src/check_input.{cc,h}: Expanded
	  - Added chk_if_equal that checks if two Vectors (VectorViews,
	    ConstVectorViews) are equal within a certain margin, and otherwise
	    throws a runtime_error.
	
	* tests/testall.py: Expanded
	  - Added unittest for atm_fields_compactAddSpecies. Adding the field,
	    including the interpolation, is compared to a reference case from
		scipy (unittest disabled by default, because it depends on PyARTS).
	
	* tests/CMakeLists.txt: Expanded
	  - Added aforementioned unittest. However, this unittest is disabled
	    by default, because it depends on PyARTS.

2011-05-06  Jana Mendrok <jana.mendrok@ltu.se>

	* arts-1-14-200

	* tests/MHS/TestMHS_generic.arts, DOITBatch/TestDOITBatch.arts,
	HIRS/TestHIRS.arts; includes/mhs/mhs.arts, mhs/mhs_fast.arts:

	use surface_scalar_reflectivity instead of surface_emissivity

	apply surfaceFlatReflectivity instead of surfaceFlatSingleEmissivity

	that is, for all test cases emissivity has been	replaced by reflectivity
	(does not apply to TestDISORT, where controlfile is outdated anyway and
	which is not in use currently)

2011-05-06  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-199

	* doc/uguide/concept.tex (Basics): Revised this whole chapter,
	included stuff I originally wrote for the ARTS2 paper. I consider
	this chapter finished for now, comments welcome.

2011-05-05  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-198

	* As there is still confusion on how to implement Lambertian
	surface scattering, I can not take responsibility for this part.
	(And no free time for this now, or inside several weeks.) So,
	"deactivated" the WSM and the AUG surface chapter. Feels better to
	remove it, than having incorrect stuff in arts.

	Open for initiatives. You are totally free to modify these parts.

	* doc/uguide/arts_user.tex: Commented out surface chapter..

	* src/m_surface.cc (surfaceLambertianSimple): Deactivated.

2011-05-05  Jana Mendrok <jana.mendrok@ltu.se>

	* arts-1-14-197

	* src/m_atmosphere.cc, special_interp.cc, methods.cc, ppath.cc,
	  check_input.cc, refraction.cc, m_rte.cc, m_doit.cc, workspace.cc,
	  doit.cc:
	De-ambiguitized "surface" (ground/lower boundary of atmosphere => "the
	surface" vs. slice of a field => "surface-type variable"/"level")

	* src/m_cloudbox.cc: layout adaption (avoid long lines)

2011-05-04  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-196

	* doc/uguide/surface.tex: Missed to be consistent with Rees in the
	definition of relectivity. (Missed the cos term!)

2011-05-03  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-195

	* doc/uguide/surface.tex: A quick revision, and some extension on
	rough surfaces.

2011-05-02  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-194

	* src/m_surface.cc (surfaceLambertianSimple): Copied some new
	code from surfaceFlatReflectivity. Changed the rmatrix from being
	diagonal, to just get the (0,0) element filled for stokes_dim>1.
	This is my present understanding of the defintion of the
	Lambertian surface (I will look for conformation). Re-allowed
	usage for stokes_dim > 1.

2011-05-02  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-193

	* tests/AMSU/TestAMSU_generic.arts:
	* includes/amsu/amsub_fast.arts:
	* includes/amsu/amsub.arts: Both now using surfaceFlatReflectivity.

	* src/m_surface.cc (surfaceFlatReflectivity): Created.

	* src/workspace.cc: More detailed description of
	surfaceFlatReflectivity.

2011-05-02  Daniel Kreyling  <daniel.kreyling@physik.uni-muenchen.de>

	* arts-1-14-192

	* src/methods.cc:
	Documentation fix.

	* src/cloudbox.cc:
	corrected a mathematical mistake and changed median tropospheric
	temperature inbarometric_heightformula from 288K to 253K and
	added a sourcereference.

	* src/m_cloudbox.cc:
	corrected a bug in cloudboxSetAutomatically. In case of two different
	hydrometeor profiles used to set the cloudbox_limits the results of
	the second profile was not handed over to the final cloudbox_limits
	array.
	Additionally ensured that the cb boundary will always be set to
	the first zero value below/above the cloud.

	* tests/DOITBatch/TestDOITBatch.arts:
	Documentation fix.

2011-05-02  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-191

	* src/docserver.cc: Display error for non-existent pages.

	(ds_insert_error): New function to insert an error message.

	(ds_stylesheet): Add .error style.

2011-04-28  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-190

	* src/m_doit.cc (DoitInit), src/methods.cc:

	Remove doit_za_interp from output list. d_z_i was defined as
	output-only but the initialization code relied upon its current value.

	if (doit_za_interp != 1) doit_za_interp = 0;

	d_z_i was effectively ending up with a random value of 0 or 1.
	
	On Linux this was not visible as uninitialized variables seem to have
	a tendency to have 0 as a value. But this is in no way guaranteed.
	This led to a very hard-to-hunt-down bug that showed up in only 5-10%
	of DOIT calculations and mostly only on Mac OS X.

	The ugly bit was that even though doit_za_interpSet is properly
	called in the case of TestDOITBatch, doit_za_interp would still end up
	with a random value of 0 or 1 if DoitInit is called inside an
	agenda. Because DoitInit was defined to generate doit_za_interp,
	the scoping mechanism would not copy the original value of
	doit_za_interp. There is no need to do that for variables that are
	supposed to be generated by a WSM inside the agenda anyway.
	Which made it even more difficult to track down was the fact that the
	random change of the used interpolation from linear to polynomial only
	showed differences in the results after around 55 Doit iterations.

	Moral of the story:

	If you define a workspace variable as output-only for a workspace
	method, you MUST INITIALIZE IT inside the WSM. There is no way around
	it.

	* src/methods.cc (DoitCloudFieldPut):

	Same problem here with scat_i_p. Defined as output-only, but accessed
	with issize(scat_i_p,....) in the 1D case.
	I've changed it to be input and output for now. But I'm not sure if
	this is the right fix. Maybe instead of issize() there should be a
	resize(scat_i_p...) like in the 3D case?

	* src/math_funcs.cc (lgamma_func):

	Make static coefficient array also const.

	Reindented file.

	* src/m_abs_o2_models.cc (Zeeman_o2_line_splitting):

	Add warning to doc that this function is not threadsafe.

2011-04-29  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-189

	* Started to revise the surface properties methods.

	* src/m_surface.cc (surfaceLambertianSimple): Now using
	surface_scalar_reflectivity.

	(surfaceFlatRefractiveIndex): complex_n is now also allowed to
	have a single row.

	(surfaceFlatVaryingRvRh): Removed (don't think it is being used).

	* src/workspace.cc: Introduced surface_scalar_reflectivity.

2011-04-29 Ajil Kottayil  <ajil.kottayil@ltu.se >

	* tests/HIRS/TestHIRS.arts: Changed the path of HITRAN directory.

2011-04-28  Patrick Eriksson  <patrick.eriksson@chalmers.se>


	* arts-1-14-187

	* doc/uguide/rte.tex: Started revision.

	* doc/uguide/symbol_defs.tex: Added additional symbols used in the
	article.

	* doc/uguide/concept.tex: Some polishing. Appended the "Concept"
	section from the first article manuscript version. To e merged
	with existing Sec 1.3.

	* doc/uguide/arts_user.tex: Some smaller fixes. Moved up "General
	RT" as Section 3, aiming at having a top-to-bottom order of the
	sections.

2011-04-27  Jana Mendrok <jana.mendrok@ltu.se>

	* arts-1-14-186

	* src/m_optproperties.cc:

	use chk_interpolation_grids for scatdata_T-grid (consistently accounts
	for allowed extrapolation)

2011-04-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-185

	* src/test_matpack.cc, src/test_tensor.cc:

	Remove obsolete local joker definition.

2011-04-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-184

	* src/constants.cc:

	Remove Joker definition here, it belongs in the matpack library.

	Include mystring.h instead of arts.h.

	* src/matpackI.cc: Add definition and initialization for global joker.

	* src/matpackI.h: Make global joker object constant.

	* src/agenda_class.cc (Agenda::append): Remove _U_ from ws.

	* src/libmicrohttpd/connection.c, src/libmicrohttpd/daemon.c:

	Add cast to unsigned int to silence some warnings.

2011-04-21  Jana Mendrok <jana.mendrok@ltu.se>

	* arts-1-14-183

	* src/m_optproperties.cc:

	harmonize check of scatdata_T-grid covering required range with
	extrapolation abilities of interpolation routine (extpolfac introduced
	as global constant here. would be good to have that linked to value
	that interpolation routine actually uses)

	* src/ppath.cc:

	assume tiny tilts of 3D surface are numeric problem, hence reset to 0

	* src/m_doit.cc:

	bugfix in 3D version of CloudboxGetIncoming (reduced azimuth grid at
	nadir/zenith)

2011-04-18	Gerrit Holl	<gerrit.holl@ltu.se>

	* arts-1-14-182

	* src/m_atmosphere.cc: Cosmetic changes
	  - Improve error message. To me this error message was confusing.
	  With batch_atm_field_compactFromArrayOfMatrix I was not trying to
	  copy a matrix, maybe this happens internally but I think the new
	  error message is less confusing. Also I got some weird other effects
	  and sent an e-mail to Oliver about that.

	* src/methods.cc: Cosmetic changes
	  - Fixed typo, Mathisa -> Mathias

	* src/workspace.cc: Cosmetic changes
	  - Added some stars

2011-04-15  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-181

	* src/sourcetext.{h,cc}: Move include exception.h to header.
	(SourceText::AdvanceChar()): Allow to move one position behind the last
	character in the sourcetext.
	(SourceText::Current()): Throw exception if Eot is reached.

	* src/parser.cc:
	(ArtsParser::parse_main()): Remove unneeded test for }.
	(ArtsParser::parse_agenda): Remove statement with no effect.

	Fixes bug reported by Gerrit. An extra } at the of a control file was
	not detected as a syntax error.

2011-04-14	Gerrit Holl	<gerrit.holl@ltu.se>

	* arts-1-14-180

	* src/methods.cc, src/agendas.cc, src/workspace.cc: Cosmetic changes

	- Mainly small changes, such as adding asterisks around WSMs, WSVs,
	etc. Also some typo fixes.

2011-04-13  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-179

	* src/parser.cc:

	Don't silently ignore rogue characters at the end of control files
	behind the main agenda. This could lead to a bug where an extraneous }
	inside the main agenda leads to a premature end of the control file
	going unnoticed by the user. Bug reported by Gerrit.

	* src/sourcetext.h (SourceText::reachedEot): Added.

2011-04-12  Daniel Kreyling  <daniel.kreyling@physik.uni-muenchen.de>

	* arts-1-14-178

	* tests/DOITBatch/:
	Small correction in TestDOITBatch.arts

	* tests/testall.py
	DOITBatch test added and check against reference data included

	* tests/CMakeLists.txt
	TestDOITBatch.arts included

	* src/workspace.cc
	minor documentation fixes

2011-04-12  Daniel Kreyling  <daniel.kreyling@physik.uni-muenchen.de>

	* arts-1-14-177

	* includes/agendasDOIT.arts:
	Include file containing all DOIT related agendas and options
	for WSM

	* tests/DOITBatch/:
	TestDOITBatch, is a test case for batch calculations with the
	scattering solver DOIT. Particle number densities are calculated
	inside ARTS according to one ice and one liquid psd 
	parametrisation.
	
2011-04-12  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-176

	* src/docserver.cc: Don't underline links.

2011-04-12  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-175

	* src/docserver.cc:

	Replace all WSMs, WSVs and groups enclosed in ** by HTML links.

	IMPORTANT: Please make sure your documentation in methods.cc and
	agendas.cc consistently uses ** around the entities mentioned above!!!

2011-04-11  Daniel Kreyling  <daniel.kreyling@physik.uni-muenchen.de>

	* arts-1-14-174

	* m_cloudbox.cc
	(cloudboxSetAutomatically)
	fixed bug, that occured when using the default value of 
	-1 for *cloudbox_margin*

	* src/methods.cc
	minor documentation fixes

	* src/workspace.cc
	minor documentation fixes

2011-04-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-173

	* doc/uguide/development.tex: Updated sections 1.5 and 1.6.

2011-04-06  Daniel Kreyling  <daniel.kreyling@physik.uni-muenchen.de>

	* arts-1-14-172

	* src/methods.cc
	minor documentation fixes

	* src/workspace.cc
	minor documentation fixes

2011-04-04  Daniel Kreyling  <daniel.kreyling@physik.uni-muenchen.de>

	* arts-1-14-171

        * src/m_atmosphere.cc
	Fixed documentation for methods implemented by me.

        * src/math_funcs.cc
	Fixed documentation for methods implemented by me.
	
        * src/methods.cc
	Fixed documentation for methods implemented by me.
	
        * src/m_cloudbox.cc
	
	(cloudboxSetAutomatically)
	In order not to call iy_cloudbox_agenda, while not using/
	initialising it in most of the cases, the WSM CloudboxOff
	is no longer used here. Instead the WSV cloudbox_on is 
	set to zero.
	
        * src/cloudbox.cc
	Fixed documentation for methods implemented by me.
	
        * src/workspace.cc
	Fixed documentation for methods implemented by me.


2011-03-25	Gerrit Holl	<gerrit.holl@ltu.se>

	* arts-1-14-170

	* src/m_cloudbox.cc,
	  src/check_input.h,
	  src/check_input.cc: Behaviour changes
	  - When doing pnd_fieldCalc, verify there are no scatterers outside
	  the cloudbox.

	* src/cloudbox.cc: Small changes
	  - When checking the dimensions of the massdensity-field, when
	  encountering a problem, do not output the field itself, but only the
	  sizes, the problematic dimension.
	
	* ChangeLog:
	  - Document my changes

2011-03-22	Gerrit Holl	<gerrit.holl@ltu.se>

	* arts-1-14-169

	* src/m_atmosphere.cc, src/workspace.cc: Cosmetic changes
	  - Fix error, VMR[2] should be VMR_n[1].
	
	* src/methods.cc: Cosmetic changes
	  - Typo: brodening -> broadening
	
	* src/check_input.cc: Small improvement
	  - Show more information in runtimeerror
	
	* doc/uguide/scattering.tex: Small improvement
	  - Fix typo, of -> or
	
	* includes/amsu/{amsub,amsub_fast,mhs,mhs_fast}.arts: Cosmetic changes
	  - Fix typo: redifine -> redefine

	* ChangeLog:
	  - Document my changes

2011-03-17  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-168

	* doc/uguide/concept.tex: Mainly added some new references.

	* doc/uguide/references.bib: Added new arts articles, and some old
	missing data. And some fixes.

2011-03-15  Daniel Kreyling <daniel.kreyling@physik.uni-muenchen.de>

	* arts-1-14-167

	* src/m_cloudbox.cc: Bugfix

	(cloudboxSetAutomatically) to call CloudboxOff, iy_cloudbox_agenda
	must be an In and Output to this method.
	CloudboxOff only gets called when atmosphere is empty, if that is
	not the case, iy_cloudbox_agenda still needs to be initialized.


2011-03-15	Gerrit Holl	<gerrit.holl@ltu.se>

	* arts-1-14-166

	* doc/uguide/batch.tex: Bugfix

	- Replace "RteCalc" by "yCalc".


2011-03-14	Gerrit Holl	<gerrit.holl@ltu.se>

	* arts-1-14-165

	* src/m_montecarlo.cc: Bugfix

	 - Add two more runtime checks: number of columns in sensor_pos and
	   number of columns in sensor_los. Those should be 3 and 2
	   respectively, as the atmospheric dimensionality has to be 3.

2011-03-14	Gerrit Holl	<gerrit.holl@ltu.se>

	* arts-1-14-164

	* src/m_cloudbox.cc: Bugfix

	 - In pnd_field_calc, check that enough data points are available in
	   pnd_field_raw on each grid/dimension so that it can be interpolated
	   to (e.g. at least two, as child function does linear
	   interpolation). If this is not the case, throw a runtime_error.
	   Until now, a function called from here threw an assertion error
	   instead.

2011-03-14  Daniel Kreyling <daniel.kreyling@physik.uni-muenchen.de>

	* arts-1-14-163

	* src/m_optproperties.cc:

	(DoitScatteringDataPrepare) calls a check, whether single 
	scattering data contains the right frequencies. This methods calls
	(scat_data_monoCalc), where the same check was repeated. I removed
	the check in DoitScatteringDataPrepare and extended the check in
	scat_datamonoCalc to include extrapolation, according to
	chk_interpolation_grids. 

	* src/m_cloudbox.cc

	(cloudboxSetAutomatically) functionality only for 1 Dim atmospheres.
	Replaced checks by assertions. Improved the cloudbox_limits finding and setting
	algorithm.
	
	(Massdensity_cleanup) renamed (former Hydromet_cleanup)

	Splitted the function (ParticleTypeAddAllMeta) into 
	(ScatteringParticleTypeAndMetaRead), which reads only the single scat. 
	and meta scat. data and
	(ScatteringParticlesSelect) which does the user defined selection of 
	scattering particles via part_species.

	(pnd_fieldSetup) some corrections and code improving. Added the particle
	selection.
	
	* src/m_atmosphere.cc

	(atm_fields_compactFromMatrixChevalAll) renamed function.
	(AtmFieldsFromCompactChevalAll) atmospheric properties (gases and hydrometeors)
	in Chavallier data are written to two different GriddedField4s 
	(atm_fields_compact_all, atm_fields_compact). First containing all profiles,
	second only the abs. gases.

	* src/mathfuncs.cc

	(gamma_func) & (lgamma_func) renamed the functions, to avoid conflict with 
	C std. lib. 

2011-03-13	Gerrit Holl	<gerrit.holl@ltu.se>

	* arts-1-14-162

	* src/m_montecarlo.cc: Adapted

	  - Added checks on atmosphere_dim (this is now an additional input to
	  both MCGeneral and MCIPA).

	* src/methods.cc, src/m_rte.cc: Adapted

	  - Changed due to additional input for MCGeneral and MCIPA

	* src/workspace.cc: Fix typo

	* tests/MHS/TestMHS_generic.arts: Fix error in comment

2011-03-04  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-161

	* src/CMakeLists.txt:

	Fixed bug reported by Dominik Scheiben and Rene Bleisch. A dependency
	was missing for artscore on auto_version_h. This led to a compilation
	failure on Debian Lenny, strangely not on Ubuntu or Mac OS X.

	* doc/uguide/arts_developer.tex: Removed unused affiliation.

2011-03-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-160

	* src/methods.cc:

	Replaced all remaining references to RteCalc calls in the builtin docs
	with yCalc.

	There were a couple of examples left in the builtin docs which used
	arts1 syntax.

	* doc/uguide/development.tex:

	Updated sections 1.1-1.4. Still work in progress.

	* doc/uguide/arts_developer.tex:

	Added me as author of the Gridded Fields section.

	* doc/uguide/arts_*.tex: Updated our institut name.

	* src/mystring.h: Changed ifdef from string_h to mystring_h.

2011-02-28  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-159

	* src/special_interp.cc (interp_cloudfield_gp2itw): 

	* Found a case where the check inside interp_cloudfield_gp2itw
	performed by gridpos_upperend_check was needed not just for the
	end points, but also for the point with index 1. Switched to check
	all points. Slower, but safer. 
	
	* src/interpolation.cc (gridpos_upperend_check): A second version
	of the function, operating on complete ArrayOfGridPos.

	* src/special_interp.cc (interp_cloudfield_gp2itw): Using new
	version of gridpos_upperend_check.

2011-02-25	Gerrit Holl	<gerrit.holl@ltu.se>

	* arts-1-14-158

	* doc/uguide/development.tex: Adapted
	- Fixed LaTeX syntax for three cross-references.

2011-02-24  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-157

	* src/methods.cc: Several spelling and other errors for doc of
	sensor_responsePolarisation.

	* src/rte.cc (apply_y_unit,apply_y_unit2): A typo in the arts
	article had ended up in the conversion for Q, U and V (but still
	giving almost correct result!)

2011-02-23  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-156

	* doc/uguide/development.tex: Update the build system part for CMake.

2011-02-17  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-155

	* src/mystring.h (insert_substr), src/wsv_aux.h (WsvRecord),
	gridded_fields.h (GriddedField{,1,2,3,4})

	Pass const strings by reference.

	* src/doit.{h,cc} (cloud_fieldsCalc)

	Use Const...View instead of const ...View.

	* src/math_funcs.cc (lgamma): Reduce variable scope.

	* src/messages.h (valid, sufficient_priority_*, Print):

	Make functions and priority parameter const.

	* src/methods_aux.cc (format_paragraph):

	Remove unused variable lastreturn.

	* src/rng.{h,cc}: Make function showseed const.

	* src/montecarlo.{h,cc} (cloudy_rt_vars_at_gp): Pass gp_* by reference.

	* src/m_general.h, src/workspace_ng.h: Remove typedefs for structs.

2011-02-14  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-154

	* src/workspace.cc (abs_coef): Improved documentation, in response
	to Patrick question.

2011-02-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-153

	* src/jacobian.cc (check_retrieval_grids): Relaxed check by
	considering the standard half spacing extrapolation allowed.
	(Numerical problems caused that I could not set the retrieval grid
	to the corresponding atmospheric grid!)

	* src/m_jacobian.cc (jacobianAddAbsSpecies)
	(jacobianAddTemperature): Added checks to enforce that retrieval
	of temperature and number densities are not mixed.

	* src/m_atmosphere.cc (atm_checkedCalc): Removed cloudbox part.
	The logocal point to call this method is directly after the
	atmosphere is defined. Partly as z_fieldFromHSE demands atm_checked
	(which is required to avoid repeating heavy checks for iterative
	t- retrievals). The dependency on the cloudbox was thusunlucky. IN
	addition, the check for the cloudbox was in complete, it did not
	consider pnd_field. Hence, there should rather be a cloudbox_check!

	* src/m_rte.cc (yCalc): Added check of cloudbox (the part now not
	done in atm_checkCalc).

2011-02-11  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-152

	* src/gridded_fields.{h,cc} (GriddedField::get_grid_size):

	Move implementation to header file. Dependent functions of member
	functions which are defined in the header file should be implemented
	in the header as well.

	* src/CMakeLists.txt:

	Remove ALL header files from targets. Header file dependencies are
	automatically determined by CMake. Exceptions are auto_md.h and
	auto_workspace.h. If they don't exist yet, only an explicit dependency
	triggers the build process for them.

	Remove token.cc, gridded_fields.cc, agendas.cc, and arts_omp.cc from
	make_auto_md_h and make_auto_md_cc.

	Remove binio.{h,cc} from make_auto_md_h.

	Remove arts_omp.cc from make_auto_workspace_h.

	Remove agendas.cc from artscore library.

	Add agendas.cc to methods library.

2011-02-10  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-151

	* src/test_matpack.cc: Include cstdlib to make gcc happy.

2011-02-10  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-150

	* Unify naming of all enums and their values.

	* Remove typedefs for enums, not needed in C++.

	* src/optproperties.{h,cc}, src/montecarlo.cc, src/m_cloudbox.cc,
	src/cloudbox.cc, src/xml_io_compound_types.cc, doc/uguide/clouds.tex:

	Change typedef enum PType to enum ParticleType.

	PTYPE_GENERAL    -> PARTICLE_TYPE_GENERAL
	PTYPE_MACROS_ISO -> PARTICLE_TYPE_MACROS_ISO
	PTYPE_HORIZ_AL   -> PARTICLE_TYPE_HORIZ_AL
	PTYPE_SPHERICAL  -> PARTICLE_TYPE_SPHERICAL

	* src/m_montecarlo.cc, src/mc_antenna.{h,cc}:

	Change typedef enum AType to enum AntennaType.

	ATYPE_PENCIL_BEAM -> ANTENNA_TYPE_PENCIL_BEAM
	ATYPE_GAUSSIAN    -> ANTENNA_TYPE_GAUSSIAN
	ATYPE_LOOKUP      -> ANTENNA_TYPE_LOOKUP

	* src/gridded_fields.{h,cc}, src/xml_io_compound_types.cc:

	Change typedef enum GridType to GridType.

	GRIDTYPE_STRING  -> GRID_TYPE_STRING
	GRIDTYPE_NUMERIC -> GRID_TYPE_NUMERIC

	* src/xml_io.h:

	Change typedef enum FileType to enum FileType.
	Change typedef enum NumericType to enum NumericType.
	Change typedef enum EndianType to enum EndianType.

	* src/test_matpack.cc: Added another test case.

	* ChangeLog: Fix typo in previous commit.

2011-02-10  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-149

	* src/m_montecarlo.cc, src/montecarlo.cc:

	Move workspace method implementation of pha_matExtractManually to
	m_montecarlo.cc.

	* src/montecarlo.h:

	Remove declaration of non-existent function Cloudbox_ppathCalc.

	* src/montecarlo.cc, src/montecarlo.h:

	Cleanup function arguments. Don't pass atomic types as references if
	not necessary. Change all const VectorViews to ConstVectorViews.

2011-02-09  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-148

	* src/matpackI.h, src/agenda_record.h, src/matpackIV.h,
	src/matpackVII.h, src/methods.h, src/agenda_class.h, src/matpackV.h,
	src/m_abs_o2_models.cc, src/sourcetext.h, src/absorption.h,
	src/matpackIII.h, src/matpackVI.h, src/gridded_fields.h,
	src/matpackII.h, src/exceptions.h:

	Killed some semicolons.

2011-02-09  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-147

	* src/libmicrohttpd/response.c, src/libmicrohttpd/connection.c,

	Changed several int to ssize_t and size_t to allow safer type
	conversions.

	* src/libmicrohttpd/daemon.c (MHD_select):

	Add explicit cast to suseconds_t.

	* src/libmicrohttpd/platform.h:

	Include config_global.h instead of config.h.

	* src/cloudbox.{h,cc} (barometric_heightformula):

	Pass Numerics by value, not reference. Reindent header file.

	* src/workspace.cc:

	Replaced illegal character \% with % in fos_angles documentation.

2011-02-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-146

	* src/xml_io.cc (ArtsXMLTag::read_from_stream):

	Fix bug reported by Patrick and Ole-Martin. A missing " in an attribute
	led to an endless loop instead of a proper error message.

	(ArtsXMLTag::check_attribute): Cosmetics.

2011-02-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-145

	* src/CMakeLists.txt:

	Clean up targets. Merge species_data, partition_function_data,
	continua, docserver, and gzstream into artscore.

	Add methods_aux.cc to libmethods and remove it from other targets.

	Link make_auto_workspace_h to libmethods and remove groups.cc from
	source list.

	* src/montecarlo.{h,cc}

	Pass all *Views by value instead of reference.

	FIXME: How to treat constant Views correctly? (const VectorView or
	ConstVectorView or const ConstVectorView)

	* src/docserver.{h,cc}

	Add ifdef ENABLE_DOCSERVER around everything.

	* src/nc_io_compound_types.cc, src/nc_io_types.h, src/nc_io.h,
	src/nc_io_basic_types.cc, src/nc_io_array_types.cc, src/nc_io.cc,
	src/test_sorting.cc, src/arts_omp.h, src/m_general.h, src/m_nc.h,
	src/main.cc, src/test_legendre.cc, 

	Include arts.h instead of config.h directly.

	* src/iotraits.h, src/sstream.h, src/matpack.h, src/arts.h:

	Include config_global.h instead of config.h directly.

	* src/rng.cc: Move all includes to the beginning of the file.

	* src/config_global.h: Added.

2011-02-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-144

	* src/methods.cc: Added comments around limitations of the
	analytical approach. (But now much more useful than in arts-1.)

	* src/m_rte.cc (iyEmissionStandardClearsky): Added term to
	t-jacobian, to handle "local effect" of HSE. 

	Higher Stokes and BL not updated accordingly (added run time error
	if trying to use those options.)

	* tests/GroundBased/TestGbased.arts: HSE+analytical now selected
	for t-jacobian.

	* src/m_jacobian.cc (jacobianCalcTemperature): Now also handling HSE.

2011-02-04  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-143

	* src/m_atmosphere.cc (z_fieldFromHSE): Created. Follows the
	implementation in atmlab and gives basically identical results
	(differences on mm level).

2011-02-03  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-142

	* Main change is that lat_grid and lon_grid now can have length 1
	even when these dimensions not are "active". This as in some cases
	a latitude is needed even for 1D etc, and is more consistent with
	other variables where "length 1" dimensions can have a specified
	value.

	* src/m_abs.cc: Removed about 900 lines of inactive code (inside
	#if 0), with functions from arts1. Such as hseSet,
	hseSetFromLatitude, hseCalc.

	* src/methods.cc: Example in description of VectorSet was in old
	format.

	Start to introduce calculation of hydrostatic equilibrium:
	---
	* src/workspace.cc: Added p_hse and z_hse_accuracy.

	* src/m_abs.cc: Removed some methods from arts-1 not used, such as
	hseSet.

	* src/m_atmosphere.cc (z_fieldFromHSE): Started. So far just
	inactive, old, code from hseCalc.

	Changes below to allow lat_grid and lon_grid to have length 1 even
	when not used, and some cleaning:
	---
	* src/m_ppath.cc (rte_posAddGeoidWGS84, sensor_posAddGeoidWGS84): 
	Removed. Probably never used. In fact, not useful for 2D and 3D.
	And for 1D *sensor_posAddRgeoid* suffices.

	* src/m_surface.cc (r_geoidWGS84): Removed lat_1d and 
	meridian_angle_1d. For 1D, atitude is now taken from lat_grid and
	the meridian angle is hard-coded to 0 (ie. N-S direction).

	* src/m_atmosphere.cc (AtmosphereSet2D): 
	(AtmosphereSet3D): Removed lat_1d and meridian_angle_1d. 

	* src/m_cloudbox.cc (pnd_fieldZero): 3D field now triggered when
	lat_grid.nelem() > 1 (instead of > 0).

	* src/check_input.cc (chk_atm_grids): Changed length tests
	according to change below.

	* src/workspace.cc: Changed text for lat_grid and lon_grid,
	explaining that (now) a length of 1 is allowed for 1D and 1/2D,
	respectively.
	Removed lat_1d and meridian_angle_1d.

2011-02-03  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-141

	* src/m_rte.cc: Added z_field in several places.

	* src/m_jacobian.cc: Added z_field in several places.

	* src/m_fos.cc (iyFOS): Adopted call of iy_clearsky_agenda.

	* src/agendas.cc (define_agenda_data): Added z_field as input to
	iy_clearsky_agenda.

2011-02-02  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-140

	* tests/GroundBased/TestGbased.arts: Moved test of temperature
	jacobian to this file.

	* tests/ClearSky/TestClearSky.arts: Removed temperature part of
	jacobian.

2011-02-02  Daniel Kreyling  <daniel.kreyling@physik.uni-muenchen.de>

	* arts-1-14-139

	All following changes add or create new functions, WSMs or WSVs only.
	None of the previously exisiting methods has been changed.
	Since documentation in not yet completed, I recommend not to use it right now.

	* src/cloudbox.cc (chk_hydromet_field):NEW. Check whether hydromet grid size
	is equal to atmospheric grid size and if hydromet profile is zero (no cloud)
	in each grid point, then it returns true.
	* src/cloudbox.cc (chk_scattering_data):NEW. Compare nelem of ArrayOfScatteringMetaData
	and ArrayOfSingleScatteringData. more checks needed!
	* src/cloudbox.cc (chk_scattering_meta_data)NEW. more checks needed
	* src/cloudbox.cc (barometric_heightformula):NEW. barometric heightformula for NONE 
	isothermal atmosphere. Return Numeric
	* src/cloudbox.cc (IWCtopnd_MH97):NEW. Calculates dN/dDm on one atmospheric grid
	point per particle type using MH97. Return Numeric.
	* src/cloudbox.cc (LWCtopnd): NEW. Calculates dN/dr on one atmospheric grid 
	point per liquid water particle type. Return Numeric.
	* src/cloudbox.cc (LWCtopnd2):NEW. Calculates dN/dr on one atmospheric grid 
	point per liquid water particle type. Alternative calc way. Return Numeric. 
	* src/cloudbox.cc (trapezoid_integrate): NEW. does the trapezoid integration
	for the function y = f(x). 
	* src/cloudbox.cc (chk_pndsum): NEW. Check sum of vector pnd against total XWC.

	* src/cloudbox.h: see cloudbox.cc

	* src/optproperties.cc: added ostream& operator for ScatteringMetaData and 
	ArrayOfScatteringMetaData.
	* src/optproperties.h: added ScatteringMetaData structure

	* src/parser.cc: doku eddited

	* src/xml_io_types.h: ScatteringMetaData added
	* src/xml_io_instantiation.h: ScatteringMetaData and
	ArrayOfScatteringMetaData added.
	* src/xml_io_array_types.cc: XML reading and writing routines for
	ArrayOfScatteringMetaData
	* src/xml_io_compound_types.cc: XML reading and writing routines for
	ScatteringMetaData

	* src/math_funcs.h: see math_func.cc
	* src/math_funcs.cc (gamma): NEW. Returns gamma function of real argument 'x'.
	Returns error msg if argument is a negative integer or 0, or use lgamma
	function if argument exceeds 32.0. 
	* src/math_funcs.cc (lgamma): NEW. Returns ln of gamma function for real 
	argument 'x'.

	* src/m_atmosphere.cc (atm_fields_compactFromMatrixVMRonly): NEW. Generating
	atm_fields_compact without hydrometeor data. Needed for absorption calc.
	* src/m_atmosphere.cc (batch_atm_fields_compactFromArrayOfMatrixHydromet): NEW.
	Generating batch_atm_hydromet_fields_compact (amtmosphere including 
	hydromet data) and batch_atm_fields_compact (without hydromet data 
	for absorption calc.)
	* src/m_atmosphere.cc (AtmFieldsFromCompactHydromet): NEW. Extracting atmospheric
	fields including hydromet_field.

	* src/m_cloudbox.cc (cloudboxSetAutomatically): NEW. Setting cloudbox_limits
	in correspondence to actual extend of cloud, derived from hydromet_field.
	If hydromet_field is empty (only zeros) cloudbox is set off!
	* src/m_cloudbox.cc (Hydromet_cleanup): NEW. Replacing hydromet values smaller
	than hydromet_threshold by zero.
	* src/m_cloudbox.cc (ParticleSpeciesInit): NEW. initializing part_species
	* src/m_cloudbox.cc (ParticleSpeciesSet): NEW. filling ArrayOfString part_species
	* src/m_cloudbox.cc (ParticleTypeAddAllMeta): NEW. Reading SingleScatteringData and 
	ScatteringMetaData from corresponding arrays provided by user.
	* src/m_cloudbox.cc (pnd_fieldSetup): NEW. Doing the actual pnd calculation, using
	MH97 or liquid particle size distributions.

	* src/groups.cc: added ScatteringMetaData and ArrayOfScatteringMetaData.

	* src/methods.cc: added all new WSMs, Documentation is partially incomplete.

	* src/workspace.cc: added 	batch_atm_hydromet_fields_compact
					hydromet_field
					hydromet_threshold
					part_species
					scat_data_meta
					scat_data_meta_array
				Documentation is partially incomplete.
 
2011-02-02  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-138

	* src/methods.cc:

	Add cloudbox_on as input to CloudboxGetIncoming,
	CloudboxGetIncoming1DAtm, DoitInit, and ScatteringDoit.

	* src/m_doit.cc (CloudboxGetIncoming, CloudboxGetIncoming1DAtm,
	DoitInit, ScatteringDoit):

	Don't do anything in these methods if cloudbox_on if false.

	Output a message to out0 in DoitInit that the Doit calculation will be
	skipped if no cloudbox is defined.

	These changes avoid Doit from failing if no cloudbox is defined. The
	Doit calculation will simply be skipped.
	Mostly for Daniel at the moment, so he can dynamically turn the
	cloudbox on and off from one batch job to the next.


2011-01-28  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-137

	* src/m_rte.cc (iyBeerLambertStandardCloudbox): 
	* src/m_fos.cc (iyFOS): Usage of temperorary variables when
	calling opt_propCalc removed.	

	* src/montecarlo.cc (opt_propCalc): I could not get slicing to
	work as input to this function. The two first arguments were
	defined as MatrixView& and VectorView&, respectively. Don't think
	& shall be used togetehr with "Views". Anyhow, now slicing works
	and checks run OK.

2011-01-28  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-136

	* src/montecarlo.cc (opt_propCalc): Changed a runtime error to
	assert check, and added asserts for ext_mat_mono and abs_vec_mono.

2011-01-28  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-135

	* src/m_fos.cc (iyFOS): Updated to treat the quantities as other
	RT methods (as started by 1-14-131). Required extinsive changes.
	Fairly well tested (by qarts_scattering_demo). New version appears
	to give somewhat better fit with DOIT-1D for "high" tangent
	altitudes, but could just be a coincidence. 

	* src/m_rte.cc (iyBeerLambertStandardCloudbox): Updated, using
	a stripped version of code in iyFOS.

2011-01-28  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-134

	* src/mystring.h (split): Add missing const.

2011-01-28  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-133

	* src/mystring.h: Add a split function to our string class.

2011-01-26  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-132

	* Run "make check" but missed to see that it failed (too slow on
	the laptop). For TestAMSUB I got differences to the values in
	testall.py up to 0.04K. So slightly bigger than the max of 0.027K
	below.

	* tests/testall.py: New reference values for AMSUB and MHS
	(the values I got here on the latop). Relaxed check for MHS to
	0.01 (from 0.005).

2011-01-26  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-131

	* Discovered that the RT was not done exactly as I wrote in the
	paper. Somewhat embarrassing! For a reason that I don't remember,
	P, T and VMRs were averaged to the middle point of the ppath
	steps, instead of calculating absorption and emission source term
	at ppath points and take average over the step. Not clear which
	appraoch that gives the best accuracy, but the later is better
	with respect to interpolation of abs. table and the analytical
	expressions for Jacobians. So now changed. 

	This causes some change in simulated Tbs. I have run all test in
	both arts and atmlab. Where I have compared results, the
	difference between old and new Tbs are mainly inside 0.01K. The
	maximum difference I have seen is 0.027K. This was found in the
	ClearSky test case, for a Tb of 112K. Limb sounding and Tbs around
	100K should maximise the sensitivity to this change, so this
	should be something like a worst case.

	FOS and iyBeerLambertStandardCloudbox not yet updated.
	
	* src/m_rte.cc (iyEmissionStandardClearsky): 
	(iyBeerLambertStandardClearsky): 
	(iyEmissionStandardClearskyBasic): Adopted to changes below.

	* src/rte.cc (get_step_vars_for_standardRT): The emission source
	term is now calculated at the path step points (not for the middle
	point, with average temperature).
	Also absorption is now calculated at the path points. (The size of
	the variable holding the absorption was not correct.)

2011-01-03  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-130

	* src/check_input.cc (chk_cloudbox): Index inside cloudbox_limits
	for lat was used for lon at two places.

2010-12-16  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-129

	* src/montecarlo.cc (pha_matExtractManually): A small function for
	extracting the phase matrix (for 1 frequency and one angle
	combination) in a manually manner (for testing and plotting).
	It iuses the MC function for setting up the phase matrix
	(pha_mat_singleCalc).

2010-12-15  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-128

	* src/m_rte.cc (get_iy_of_background): It is now made sure that
	there is a 0.1 degree margin between the "horison" and the za for
	calculation of downwelling radiation. This including surface tilt.
	This to avoid getting repeated reflections due to numerical
	problems (problem identified by Jana and Oliver).

	* src/ppath.cc (surfacetilt): New function. Basically an interface
	to some internal (atmosphere_dim specific) functions.

2010-12-14  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-127

	* includes/continua.arts (H2O-CP98, liquidcloud-MPM93)
	(icecloud-MPM93, rain-MPM93): Added entries for these models,
	which were missing.

2010-12-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-126

	* src/check_input.cc (chk_cloudbox): Realised that checks added in
	last commit were too simple.
	1. 3D cases where lat_grid reaches +-90, or lon_grid wraps around
	the globe must be excluded.
	2. The lon margin must considered the latitude (as 1 lon degree is
	a smaller distance when abs(lat) increases.
	These aspects are now considered.

2010-12-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-125

	* src/m_montecarlo.cc (MCGeneral): Added atm_checked to this WSM.
	That is, atm_checkedCalc must now be run before calling this
	method. Also added cloudbox_on (to make sure that all
	checks inside atm_checkedCalc actually were performed).

	* src/m_rte.cc (iyMC): Added atm_checked to this WSM (to pass on
	to MCGeneral).

	* src/check_input.cc (chk_cloudbox): Added check that the distance
	between the cloudbox and lat and lon grid edges is at least 20
	deg. (The min distance is a constant and can easily be changed.)

	* tests/MonteCarlo/lon_grid.xml: Edited file to move end points
	from +-16 to +-25 deg. To fulfill criterion above.

	* tests/MonteCarlo/lat_grid.xml: As for lon_grid.xml.

2010-12-03  Jana Mendrok <jana.mendrok@ltu.se>

	* arts-1-14-124

	* src/doit.cc (cloud_ppath_update1D_noseq): allow cloudbox@surface for
        non-sequential 1D case

	* src/doit.h: switch on passing of surface_prop_agenda to
        cloud_ppath_update1D_noseq

	* src/m_doit.cc (doit_i_fieldUpdate1D): pass surface agenda. avoid
        ppath_update for upwelling radiation at surface (that anyway shouldn't
        change, i.e. update not needed), since that causes problems when
        gridpos2gridrange returns gp.idx=-1.

	* ChangeLog: corrected/saved last entry

2010-12-03  Jana Mendrok <jana.mendrok@ltu.se>

	* arts-1-14-123

	* src/doit.cc (cloud_RT_surface): bugfix. use actual f_index (instead of
        f_index=0) when assigning calculated surface contribution (iy) to
        cloudbox intensity field (doit_i_field) at lowest cloudbox level (in
        case this is at surface level). seems to fix the doit issues when
        cloubbox lower limit is at surface.
        however, cloudbox@surface is currently only implemented for Seq1D (no
        non-Seq, no 3D).

2010-11-18  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-122

	* includes/continua.arts (O2-PWR98): Added, this was missing here
	for some reason.

2010-11-18  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-122

	* Grid positions produced in the ppath part are now consistent
	with what the gridpos function returns. That is, a fd of 0 is
	preferred before fd=1 (except for upper end point).
	(This part worked, but was changed to get internal consistency.)
	For interpolation of cloudbox fields, the grid positions are
	shifted and problems occur. This part caused a bug for DOIT (now
	fixed). After the change described above, the grid positions at
	the upper edge of the cloudbox (p, lat or lon) has to be
	shifted (change from fd=0 to fd=1). I have tried to fix this for
	DOIT but I could have missed some part and keep an eye on this.

	* src/m_fos.cc: Clearsky calculations was forced even inside the
	cloudbox. A test commited by mistake?

	* src/special_interp.cc (fix_gridpos_at_boundary): Removed.
	Replaced by gridpos_upperend_check that should be more efficient.

	* src/montecarlo.cc (cloud_atm_vars_by_gp): Now using
	gridpos_upperend_check instead of fix_gridpos_at_boundary.
	This made two input variables obselete and this had to be
	propagated upwards through the function calls.

	* src/doit.cc (cloud_ppath_update3D): Now using
	gridpos_upperend_check instead of fix_gridpos_at_boundary.

	* src/interpolation.cc (gridpos_force_end_fd): Now taking length
	of grid as input and fd =0 is first choice. This in order to be
	consistent with the gridpos function.

	(gridpos_upperend_check): This was a local function before. Later
	discovered that the xisting fix_gridpos_at_boundary makes more or
	less the same.

	(is_gridpos_at_index_i): Adopted to change above.

	* src/ppath.cc (interpolate_raytracing_points): Removed call of
	gridpos_force_end_fd. This is repeated later in the chain of functions.

	(ppath_end_Xd): Adopted call of gridpos_force_end_fd.

2010-11-17  Daniel Kreyling  <daniel.kreyling@physik.uni-muenchen.de>

	* arts-1-14-121

	* src/methods.cc

	Editted ParticleTypeAddAll description, moved WSM SpeciesSet to
	correct alphabetic postion.

2010-11-17  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-120

	* src/m_abs.cc, src/nc_io.cc:

	Remove NC_FORMAT_NETCDF4 from nc_create. It's not supposed to be here
	and breaks with newer versions of libnetcdf.

2010-11-15  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-119

	* src/agendas.cc: Changed text for abs_scalar_gas_agenda, to sync
	with article manuscript.

2010-11-11  Jana Mendrok <jana.mendrok@ltu.se>

	* arts-1-14-118

	* src/interpolation.cc (gridpos): documentation of extrapolation
        ability rephrased less ambiguous (hopefully).

	* src/methods.cc: correct documentation of cloudboxSetManuallyAltitude
        (z1<z2).

	* src/workspace.cc: correct documentation of doit_za_grid_size (it's
        just a number (of vector elements), not the vector).

	* src/cloudbox.cc (chk_single_scattering_data): allow higher
        (unearthly, but e.g. venusian) T in scat_data.T_grid.

2010-11-10  Oliver Lemke  <olemke@core-dump.info>

	* src/docserver:

	Don't use ostringstream in places where a common string is sufficient.

	Remove the word "server" from page titles.

2010-11-10  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-117

	* src/docserver.cc: Generate proper page titles.

	* src/workspace.cc: Rephrase the documentation for ppath_step.

2010-11-09  Claudia Emde  <claudia.emde@lmu.de>

	* arts-1-14-116

	* src/m_conversion.h: Fixed *FrequencyFromWavelength*, which for
	Vectors worked only if the length of the output vector was set
	before the method was executed.

2010-11-06  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-115

	* Jana: These two new methods make the operations you asked about
	in the last emails. Should have been implemented earlier!
	Can maybe a bit tricky to use them inside the batch agenda. I have
	not performed any tests. So please check for some case that the
	generated 3D data are OK.
	
	* src/m_cloudbox.cc (pnd_fieldExpand1D): New WSM.

	* src/m_atmosphere.cc (AtmFieldsExpand1D): New WSM. 

2010-11-06  Jana Mendrok <jana.mendrok@ltu.se>

	* arts-1-14-114

	* ChangeLog: corrected date of last entry

	* src/montecarlo.cc (pha_mat_singleExtract, opt_propExtract),
        src/mc_interp.cc (interp_scat_angle_temperature): some fixes to allow
        use of optprops with T_grid.nelem==1 in MC for p20, add error message
        for p30.

2010-11-05  Jana Mendrok <jana.mendrok@ltu.se>

	* arts-1-14-113

	* src/optproperties.cc (abs_vecTransform, ext_matTransform): fixed
        bug here that was already fixed by stefan in arts-1-14-35 in function
        pha_matTransform (for explanation see there).

2010-11-04  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-112
	
	* src/docserver.cc: Add doxygen comments to all functions.

2010-11-02  Claudia Emde  <claudia.emde@lmu.de>

	* arts-1-14-111
	
	* src/m_optproperties.cc: Included runtime
	error if the ambient temperature of the cloud is not included in
	the scattering data file. 

	Actually there were checks which have been commented out because we
	wanted to allow extrapolation of the scattering data which is no
	longer possible with the current version of the interpolation
	routines.     

2010-11-02  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-110

	* src/docserver.cc:

	Remove spurious </td></tr> on group doc pages.

	Add functions to escape html special chars.

	Don't try to be smart and rearrange linebreaks in the descriptions.
	Put them in a <pre></pre> instead to keep the original formatting
	intact.

	* src/agendas.cc:

	Cleanup descriptions to ensure they have consistently one linebreak at
	the end.

2010-11-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-109

	* src/docserver.cc: Use solely CSS for table layout. Add title to head.

2010-11-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-108

	* autogen.sh, configure.in, reconf, README.legacy, m4/,
	src/Makefile.am, tests/Makefile.am, aii/Makefile.am,
	doc/uguide/Figs/Makefile.am, doc/uguide/Makefile.am, doc/Makefile.am,
	doc/doxygen/Makefile.am, includes/amsu/Makefile.am,
	includes/hirs/Makefile.am, includes/mhs/Makefile.am,
	includes/odin/Makefile.am, includes/Makefile.am,
	3rdparty/disort1.2/Makefile.am, 3rdparty/Makefile.am, Makefile.am:

	Remove old build system files.

2010-10-29  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-107

	* Unit conversion and extraction of polarisation components
	appear to be OK. 

	* src/physics_funcs.cc (dinvplanckdI): A frequency term was missing.

	* src/m_sensor.cc (sensor_responsePolarisation): There were some
	things that had to be fixed. Seems to work now.

	* src/methods.cc: Removed some outdated text for
	sensor_responseInit. Added a clarification (about y_unit) for
	sensor_responsePolarisation.

	* src/rte.cc (apply_y_unit): Had to change loop order for
	polarisation components for PlanckTB. I  needs to in radiance for
	conversion of Q, U and V. A brightness temperature was instead
	used.

	(apply_y_unit2): As above.

2010-10-29  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-106

	* src/m_sensor.cc (sensor_responseBackend): New WSM. Code
	compiles, but no practical tests made.

2010-10-28  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-105

	* src/workspace.cc: Reintroduced sensor_pol, but defined
	differently. Moved definition of polarisation coding to this WSV
	(from y_pol).

2010-10-28  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-104

	* src/workspace.cc: Remove spurious \ in y_f description.

2010-10-28  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-103

	* Working on fixing last things when it comes to conversion to Tb
	and extraction of polarisations. All should be OK, but "under
	reconstruction".

	* src/m_rte.cc (iyb_calc): Introduced i_pol as local variable. If
	any kind of modified Stokes vector will be introduced, this must
	be a WSV.

	(y_unitApply): Method rearranged and adopted to changes in
	apply_y_unit.

	* src/rte.cc (apply_y_unit): Added input i_pol. For Planck-BT,
	Stokes elements 2-4 now mapped as (Binv(I+Q)-Binv(I-Q))/2.
	Mapping for Iv and similar components included. Factor of 2
	difference for Tb values. Polished code.

	(apply_y_unit2): As above. Equations found in article.

	* src/physics_funcs.cc: Added type casting to double for all
	planck and RJ functions. Now using a and b constants in all
	functions. Should be OK with double hard-coded.

	(dinvplanckdI): New function. Calculates the derivative of
	inverse-Planck with respect to intensity.

2010-10-25  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-102

	* src/workspace.cc: Polished description of y_f and similar
	variables. Introduced a clear coding polarisation states. See y_pol.

	* src/m_sensor.cc (sensor_responseInit): mblock_za_grid was
	checked twice, instead of check of aa_grid.

2010-10-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-101

	* src/docserver.{h,cc}:

	Add baseurl support to allow integration into a webserver.
	On the SAT server, we use the apache proxy module to redirect
	all requests to http://www.sat.ltu.se/arts/docserver to the docserver.
	In this case arts has to be started with
	./arts -S -B /arts/docserver so it can preceed all links it generates
	with the proper baseurl.

	Output arts version in footer.

	* src/main.cc, src/parameters.{h,cc}:

	Add option --baseurl.

2010-10-15  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-100

	* src/workspace.cc: Removed some text for y_unit. 

	* src/methods.cc: Added the text for yCalc. 

2010-10-15  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-100

	* src/docserver.cc (ds_list_groups, ds_list_methods):

	Properly balance the length of the two table columns.

2010-10-15  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-99

	* src/parser.cc (ArtsParser::parse_agenda):

	Move output of include file path from out3 to out2.

2010-10-15  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-98

	* src/rte.cc (trans_step_std): New. (rte_step_std, but just doing
	Beer-Lambert)

	* src/physics_funcs.cc (planck): Now no calculations if t=0.
	This to make it possible to set emission_agenda and
	surface_emission to give zero. 

	* src/check_input.cc (chk_if_over_0): Renamed to chk_not_negative.
	Accordingly, zero is now allowed.

	* src/m_rte.cc (iyBeerLambertStandardClearsky): Yet a new name!
	The method is an implementation of the Beer-Lalmbert law. It
	returns rather a spectrum, than a transmission. So this name
	should be better (but final?). 

	* src/m_rte.cc (iyBeerLambertStandardCloudbox): Renamed in the
	same way. Finished (but just some simple tests made).

	* src/methods.cc: Documentation for the two methods above
	improved. 
	
2010-10-15  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-97

	* src/docserver.cc: Output the url also in daemon mode.

2010-10-15  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-96

	* src/docserver.cc: Fix content-type for stylesheet.

2010-10-15  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-95

	* src/docserver.{cc,h}, src/parameters.{cc,h}, src/main.cc:

	Add docserver daemon support. Use -S instead of -s to start the
	docserver in the background.

	* src/methods.cc:

	Fix order of GIN_DEFAULT and GIN_DESC for FrequencyFromWavelength.

2010-10-14  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-94

	* src/m_rte.cc (iyTransmissionStandardClearsky): Changed to
	instead calculate transmission. So name method name changed (Tau
	-> Transmission). And now using iy_space_agenda. So basically
	iyEmissionStandardClearskym, with emission term removed

	(iyTransmissionStandardCloudbox): Started on this method.

	* src/ppath.cc (ppath_start_stepping): Removed an assert for 1D,
	checking if inside the cloudbox when this is flagged. This has
	worked for a long time, but now gut stuck here due to numerical
	inaccuarcy (1e-10 m outside). The ppath functions are robust to
	such problems.

	* src/m_rte.cc (iyEmissionStandardClearsky): Failed for iy_aux
	when np=1. Now total_tau set for np=1 to handle this.

2010-10-13  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-93

	* src/m_rte.cc (iyTauStandardClearskyBasic): Started on this
	method. Code not active.

2010-10-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-92

	* src/ppath.cc: Last fix not 100% OK. Changed way gridpos are
	compared.

2010-10-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-91

	* src/ppath.cc (ppath_calc): Changed end tests for ppaths inside
	the cloudbox. Bengt reported incorrect results for FOS. Here ppath
	calculations starting at the cloudbox boundary are made, going
	inwards. Numerical problems made that the start point was taken as
	the exit points. Now also direction of ppath considered.

2010-10-08  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-90

	* This is the arts version described in the absorption lookup
	table paper draft.

	* src/m_abs_lookup.cc (abs_lookupSetupWide): Changed temperature
	grid spacing from 100 K to 20 K. (Crucial, with too large T
	spacing the results are poor.)
	Changed H2O reference profile from 1e-6 to 1e-3. (Does not really
	make a difference, since the grid points are in fractional units,
	and the reference profile itself is not included.)
	The H2O grid spacing is still 1e99, so there will be exactly as
	many points as required by the interpolation order.

	* src/methods.cc (abs_lookupSetupBatch): Updated documentation.
	(abs_lookupSetupWide): Updated default value for h2o_max. Also
	updated documentation.

2010-10-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-89

	* src/docserver.cc: Fix nbsp in navigation.

2010-10-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-88

	* NEW FEATURE: ARTS built-in documentation server. It provides the
	functionality of accessing the built-in documentation directly from
	a web browser.

	Run 'arts -s' and point your browser to the indicated address.

	* src/docserver.{h,cc}: New docserver implementation.

	* README, src/main.cc, src/parameters.{h,cc}, CMakeLists.txt,
	config.h.cmake, src/CMakeLists.txt:

	Add docserver support.

	* src/libmicrohttpd/: Micro http server.

	* src/messages.h: Remove actual_thread_index variable.

	* src/rng.{cc,h}: Add Rng::force_seed function:

	* src/workspace.cc: Remove duplicate definition of jacobian variable.

2010-10-06  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-87

	* src/rng.cc (Rng::seed):

	Introduce a static vector that caches all previously used seeds. If
	the given seed was already used, increase it by 1 until we find an
	unused seed. If all possible seeds were already used previously, we
	empty the pool and start over.

2010-10-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-86

	* src/main.cc: Revert accidentally committed changes.

2010-10-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-85

	* src/gridded_fields.cc, src/gridded_fields.h:

	Make mdata public and name it data. This makes the code look cleaner
	when accessing the data member: pnd_field_raw.data(i, i_lat, j)
	                     instead of pnd_field_raw.data()(i, i_lat, j).

	* src/m_atmosphere.cc, src/m_sensor.cc, src/special_interp.cc,
	src/sensor.cc, src/gridded_fields.cc, src/m_cloudbox.cc,
	src/m_abs_lookup.cc, src/xml_io_compound_types.cc, src/cloudbox.cc,
	src/test_gridded_fields.cc, src/m_batch.cc src/gridded_fields.h,
	src/rng.cc, doc/uguide/gridded_fields.tex:

	Updated for GriddedField change.

	* src/rng.cc (Rng::seed):

	Remove extern statement as it is already present in messages.h.

	* src/m_doit.cc:

	Comment out parallelization for now as it doesn't work this way.

	* src/matpackII.cc: Include <iterator>.

2010-09-29  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-84

	* src/*.cc: Updated my email address in several files.

	* AUTHORS: Changed email address of me and Mattias Ekstrm.

2010-09-29  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-83

	* src/rng.cc (seed): Modified to add actual_thread_index to the
	seed. If you use OMP, you should not seed from the time directly,
	but from some variable (which you may have set from the time
	before, outside the parallel region), so that all threads get the
	*same* seed. Since then the thread index is added, the seeds are
	guaranteed to be different afterwards.
	Note that this will only work correctly if the random number
	generator (variable of type Rng) is private to each thread. (Which
	it will be automatically if it is defined as a local variable
	somewhere inside the parallel region, or in the function called
	from there.) I have no idea what happens if you try to share an
	Rng object between threads, but most likely it will go horribly
	wrong.
	After calling seed, I suggest you use showseed to get the actual
	seed and write it to out3:

	Rng rng;
	rng.seed(my_seed);
	ostringstream os;
	os << "Thread " << actual_thread_index << ", seed: " << rng.showseed();
        out3 << os;

	Note that I write to a string first. If you don't do that, the
	output will look scrambled, since the different threads will all
	start to write pieces of the message. 

	* src/messages.cc: Added global threadprivate variable
	"actual_tread_index". This is needed to add the thread number to
	the MC seed when seeding.

	* src/messages.h: Extern declare actual_thread_index together with
	in_main_agenda. 

	* src/main.cc (main): Initialize actual_thread_index, in the same
	place where also in_main_agenda is initialized.

	* src/m_abs_lookup.cc (abs_lookupTestAccMC): Added. This method
	tests the accuracy of the absorption lookup table (similar to
	(abs_lookupTestAccuracy), but using a Monte Carlo approach. 

	* src/methods.cc (abs_lookupTestAccMC): Added.

	* src/gas_abs_lookup.h (GasAbsLookup): Added the new method
	abs_lookupTestAccMC as friend.

	* src/workspace.cc (mc_seed): Typo correction in description.

	* tests/AMSU/TestAMSU_generic.arts: Added abs_lookupTestAccMC for
	lookup table testing. This is commented out, but can be
	uncommented if needed.

	* AUTHORS: Updated. The present state of this is a suggestion,
	still needs confirmation from Patrick.

	* THANKS: Removed, content is now included with AUTHORS file.

2010-09-28  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-82

	* src/gridded_fields.cc, src/gridded_fields.h:

	Change implementation from multiple inheritance to indirect
	inheritance. Data is stored in mdata member.

	* src/m_atmosphere.cc, src/cloudbox.cc, src/m_abs_lookup.cc,
	src/m_batch.cc, src/m_cloudbox.cc, src/m_sensor.cc,
	src/sensor.cc, src/special_interp.cc, src/test_gridded_fields.cc,
	src/xml_io_compound_types.cc, doc/uguide/gridded_fields.tex:

	Updated for changes in GriddedField implementation.

	* src/methods_aux.cc (MdRecord::MdRecord): Cache index of 'Any' type.

2010-09-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-81

	* src/gridded_fields.cc, src/xml_io_compound_types.cc:

	Testing a workaround to avoid a problem with some compilers when
	casting a GriddedFieldX into a Vector, Matrix or Tensor reference by
	using pointers instead.

	  (Tensor4&)gf  ->  *((Tensor4*)&gf);

	Seems to fix the segmentation fault for gcc 4.0 but not for clang.

2010-09-23  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-80

	* src/m_sensor.cc (AntennaConstantGaussian1D): Created. A function
	to simplify the task of including a Gaussian antenna pattern, for
	simple cases.

2010-09-22  Cory  <corzneffect@gmail.com>

	* arts-1-14-79

	* doc/uguide/references.bib: a few refs

	* doc/uguide/montecarlo.tex: More text! 

2010-09-09  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-78

	* src/m_atmosphere.cc (atm_checkedCalc): WSV vmr_field is now also
	considered. 

	* src/check_input.cc (chk_atm_field): Added check for 3D fields
	covering 360 degrees in longitude, that field at first and last
	lon-point are identical. Which that must be for a consistent
	description of the atmosphere. AUG can be wrong here. Will check
	that later.
	(chk_atm_surface): As above.

2010-09-08  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-77

	* src/ppath.cc (ppath_calc): Reintroduced check of high istep.
	Limit now set to 10000. Don't know why I removed it. Small
	overhead and better to get a clear error message. And better than
	filling the memory, if get stuck in an infinite loop.

2010-09-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-76

	* src/check_input.cc (chk_atm_grids): Added check of total
	coverage of lon_grid. Can not exceed 360 deg.

	* src/ppath.cc (plevel_slope_3d): A call of resolve_lon needed
	also here.
	(resolve_lon): lon+-360 in if-statements changed to +-180. The
	first theoretically correct, but numerical inaccuarcy makes the
	latter better.

2010-09-05  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-75

	* Careful revision of ppath calculations. An attempt to fix the
	last loopholes (and cleaning of code). 3D calculations are being
	tested (have made a matlab script running repeated calculations).

	* src/ppath.cc: General changes. Removed most of the out3
	messages. No practical use. Introduced PTILTMAX. Removed a lot of
	asserts, ones now done atm_checkedCalc.

	(ppath_start_3d): Now using PTILTMAX. Different way to check if a
	corner is hit, or numerical inaccuracy, that brings the ppath to a
	grid range limit (or outside) for more than for one dimension.

	(do_gridcell_3d): To handle numerical inaccuracy in a more simple
	way, ppath steps giving a length of basically 0 are now accepted.
	Longitudes outside +-180 were not handled correctly. This has
	appearently never been tested!

	(ppath_start_2d): As for 3D.
	(do_gridcell_2d): As for 3D, beside lon problem. 

	(ppath_start_stepping): Also not working for longitudes outside
	+-180.

	(resolve_lon): Did not always work for lon_grids covering >= 360.
	
	* src/interpolation.cc 
	(gridpos_force_end_fd): Now favouring fd = 1.
	(is_gridpos_at_index_i): Adopted to change above. Rather use fd[1]
	than fd[0] (to get 0==0 insead of 1==1).
	(gridpos_force_end_fd, gridpos2gridrange): As above.
	
2010-09-03  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-74

	* src/m_general.cc (Print): Added a space between each element of
	ArrayOfIndex.

	* src/special_interp.cc (interp_cloudfield_gp2itw): Re-arrangement
	of the code to avoid a second series of if-stamenets. No practical
	change.

	* src/m_fos.cc (iyFOS): Removed non-valid comment (in PND
	interpolation part).

2010-08-20  Jana Mendrok <jana.mendrok@ltu.se>

	* arts-1-14-73

	* includes/continua.arts (O2-MPM93): also added description for
	Liebe93 full O2 abs. model

2010-08-20  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-72

	* includes/continua.arts (H2O-MPM93): Added the description for
	this continuum model, which was missing for some reason.

	* src/continua.cc (xsec_continuum_tag): In documentation header,
	added tag H2O-ContMPM93, which was missing for some reason. (Note
	that this is not the same as the one for which the description was
	missing in continua.arts.)

2010-08-20  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-71

	* doc/doxygen/CMakeLists.txt:

	Properly insert the current version number into the doxygen config
	file.

	* cmake/scripts/update_doxyfile.cmake: Added.

2010-08-20  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-70

	* CMakeLists.txt:

	When creating an Xcode project, set the compiler name to Xcode instead
	of the auto-detected compiler name (e.g. gcc). The compiler and flags
	can be changed inside Xcode, so we can't determine at this point which
	info to display in 'arts -v'.

	* src/main.cc (main):

	Don't display the compiler flags determined by cmake when using Xcode.

	* cmake/modules/ArtsBuildTexDoc.cmake:

	Explicitly add the location of the makeindex binary to the PATH. If
	makeindex is called with a full path because it is not in a location
	that is already included in the PATH environment variable, execution
	will fail and break the build in Xcode.

2010-08-18  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-69

	* ChangeLog: Remove one incorrect line from last entry.

2010-08-18  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-68

	* src/getopt*: Renamed to arts_getopt*.

	* src/species_data.cc (define_basic_species_data):

	Remove unneeded extern declaration of species_data.

	* src/absorption.cc (define_species_map):

	Remove unneeded extern declaration of SpeciesMap.

	* src/CMakeLists.txt, src/parameters.cc:

	Use the system getopt by default, only fallback to our own if
	unavailable.

	* CMakeLists.txt:

	Remove -Wconversion. Newer compilers (LLVM/Clang) which actually
	detect such conversions properly (unlike GCC) will throw about 2000 of
	them. Not nice to have those implicit conversions (like from double to
	long and vice versa), but also not really fixable at the moment.

	Check for system getopt.h.

	Set warning flags properly for Clang as well.

	* config.h.cmake: Add HAVE_GETOPT_H.

	* src/parameters.cc: Adapt includes for new getopt treatment.

2010-08-14  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-67

	* src/m_surface.cc (surfaceLambertianSimple): New WSM.

	* doc/uguide/surface.tex (section{Specular reflections}): Added a
	sentence about the case Rv=Rh. The "r-matrix" is then strictly
	diagonal with all non-zero elements equal. 

2010-08-13  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-66

	* doc/uguide/surface.tex: Some polishing. Added some theory
	around BRDF and lambertian surfaces. 

	* doc/uguide/rte.tex: Rearrangement of existing text, some
	revision and new text. A complete, but partly thin, version.

	* doc/uguide/atmosphere.tex: Polished text about the cloud box.

	* doc/uguide/arts_user.tex: Updated name for Chalmers dept. It is now
	Earth and Space Science.

	* doc/uguide/arts_theory.tex: Removed FIXME for SB below
	Contributing authors. Updated name for Chalmers dept.

	* doc/uguide/arts_developer.tex: Removed FIXME for PE below
	Contributing authors. Updated name for Chalmers dept.

2010-08-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-65

	* src/m_abs.cc (WriteMolTau):

	Create a dummy function that throws a runtime error if ARTS is compiled
	without NetCDF support. Avoids linking error because of unresolved
	symbol WriteMolTau without NetCDF. Reported by Rene Bleisch.

	* src/m_nc.h: arts -> ARTS in error message.

2010-07-28  Cory  <corzneffect@gmail.com>

	* arts-1-14-64

	* doc/uguide/montecarlo.tex: More

2010-07-27  Claudia Emde  <claudia.emde@lmu.de>

	* arts-1-14-63

	* src/workspace.cc: Added units "W/(m^2 m sr)" (radiance per
	wavelength unit) and "W/(m^2 m-1 sr)" (radiance per wavenumber
	unit) as options for workspace variable *y_unit*, which are
	commonly used units for IR and VIS radiative transfer.

	* src/rte.cc (apply_y_unit, apply_y_unit2): Included conversion
	for above units.

2010-07-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-62

	* src/m_conversion.h:

	Add missing ifndef block to avoid redefinition of symbols.
	 
2010-07-21  Claudia Emde  <claudia.emde@lmu.de>

	* arts-1-14-61
	 
	* src/methods.cc: Added *FrequencyFromWavelength* and *p_gridFromAtmRaw*.
	
	* src/{m_conversion.h, CMakeLists.txt, make_auto_md_cc.cc}:
	Included the file m_conversion.h, which should include generic
	methods for unit conversions, e.g. wavelength to frequency (this
	is now included for Numeric and Vector). 
	
	* src/m_atmosphere.c (p_gridFromAtmRaw): Added this function, which 
	extracts the p_grid from the atmospheric raw data.

	* src/m_abs.cc (WriteMolTau): Initialization of tau (Matrix) was 
	missing - fixed.
	
	* src/workspace.cc: Corrected documentation of *abs_species*, it
	refered to *abs_speciesSet* which is now called *SpeciesSet*. 

2010-07-15  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-60

	* As of this version, CMakeLists.txt does not need to be manually
	updated with the current ARTS version number any longer.
	From now on, the version number is automatically extracted from the
	ChangeLog file.

	* cmake/modules/ArtsVersion.cmake:

	Helper functions to extract ARTS version number from ChangeLog.

	* CMakeLists.txt, cmake/scripts/update_auto_version_txt.cmake:

	Creates and updates the file auto_version.txt which contains the
	current ARTS version number.

	* cmake/scripts/update_auto_version_h.cmake, src/CMakeLists.txt:

	Create auto_version.h from auto_version.txt.

	* doc/uguide/CMakeLists.txt:

	Create auto_version.tex from auto_version.txt.

	* cmake/modules/cmake/modules/ArtsBuildTexDoc.cmake:

	Let stage1 targets depend on auto_version_tex.

	* cmake/scripts/update_index_html.cmake, doc/CMakeLists.txt:

	Create index.html from index.html.in and auto_version.txt.

	* CMakeLists.txt, README:

	Warnings are no longer treated as errors by default. Can be enabled
	with cmake -DWERROR. There are two reasons for this. First, different
	compilers behave very differently in issuing warnings. Treating them
	as errors often breaks the build unnecessarily. Second, with cmake
	most output is suppressed by default except for warnings and errors,
	so they stand out pretty clearly and are easily seen.

2010-07-14  Cory  <cory@pheonix>

	* arts-1-14-59

	* doc/uguide/montecarlo.tex: some more done.

2010-07-06  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-58
	
	* src/methods.cc: Extend Extract to handle Vector <- ArrayOfVector.

	* src/methods.cc, src/m_ignore.cc:

	Add workspace method Touch. Counterpart of Ignore. We have DoNothing
	already, but that needs the variable to do nothing with as input _and_
	ouput which is not possible in all cases.

	Add deprecation message to DoNothing.

	* tests/DOIT/TestDOIT.arts, tests/DISORT/TestDISORT.arts:

	Replace DoNothing with Ignore.

	* src/parser.cc (ArtsParser::parse_generic_output): Fix buggy if.

	* cmake/modules/ArtsBuildTexDoc.cmake:

	Change pdflatex interaction mode from batchmode to nonstopmode to
	avoid suppressing warnings.

	* src/nc_io_basic_types.cc: Remove unused line.

	* src/agenda_class.cc: Don't include wsv_aux.h anymore.

	* Here are some fixes to make ARTS compile with the current SVN
	version of the brand new LLVM/CLANG++ compiler.

	* CMakeLists.txt: Detect Clang.

	* src/CMakeLists.txt: Apply same special options for Clang as for GCC.

	* src/array.h:

	Change resize() -> this->resize(). Fixes compilation on latest LLVM.

	* src/wsv_aux.h, src/workspace_ng.h:

	Move PrintWsvNames from wsv_aux.h to workspace_ng.h.

	* src/agenda_class.cc: Don't include wsv_aux.h.

	* src/test_matpack.cc: Add some casts.

	* src/xml_io.cc, src/nc_io.cc:

	Move instantiation include to the end of the file.

2010-07-08  Claudia Emde  <claudia.emde@lmu.de>

	* arts-1-14-57	    
	
	* src/m_abs.cc,  src/methods.cc: Included a new method called
	WriteMolTau. It can be used to generate a so called
	molecular_tau_file which is required for high spectral resolution
	calculations with libRadtran. Having this method, it is now
	relatively easy to compare arts and libRadtran RT solvers or to
	use libRadtran cloud parameterizations in combination with arts
	calculated absorption coefficients. 

2010-07-06  Claudia Emde  <claudia.emde@lmu.de>

	* arts-1-14-56
	
	* src/nc_io_basic_types.cc, src/methods.cc, src/matpackV.{h,cc}: Included 
	  Tensor5 in ReadNetCDF ansd WriteNetCDF.

2010-07-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-55

	* You have to re-run 'cmake ..' in your build directory after updating
	to this version.

	* tests/CMakeLists.txt, cmake/modules/ArtsTestcases.cmake:

	Introduce a proper clean target.

	* tests/CMakeLists.txt:

	Fix a bug that prevented all but one test from the slow test from
	running.

	Change the allowed BT deviation from 0.001 K to 0.01 K.

	* tests/*/tropical*.xml: Move atmosphere data into shared directory.

	* tests/atmosphere_data/tropical*.xml:

	Add directory with atmosphere data used by several test cases.

	* tests/Makefile.am: remove -u option from cp for Mac compatibility.

	* tests/*/*.arts:

	Remove the .generated postfix from output files and use the default
	ARTS filename instead where possible.

	Read tropical*.xml files from ../atmosphere_data where applicable.

	* tests/GroundBased/*.arts:

	Use tropical scenario instead of midlatitude-winter.

	* tests/GroundBased/midlatitude-winter*.xml: Removed.

2010-07-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-54

	* doc/uguide/CMakeLists.txt: Remove double quotes from include.

2010-06-30  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-53

	* doc/uguide/montecarlo.tex:

	Fix citation press:1992:numerical -> press:92 and reference
	pathlength_int -> pathlengthint.

2010-06-30  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-52

        * src/m_batch.cc (ybatchCalc): Fixed an Issue reported by
	Isaac. The user may want the different Jacobians to have different
	number of x gridpoints (e.g., different number of vertical levels
	for different radiosonde profiles). This works now. Also fixed one
	OpenMP bug pointed out by Oliver, and another bug I discovered
	myself. Hope it works correctly now!

        * src/workspace.cc (ybatch_jacobians): Changed type of this
	variable from Tensor3 to ArrayOfMatrix, to allow for different
	size of different Jacobians.

	* src/methods.cc (ybatchCalc): Changed argument type of
	ybatch_jacobian and updated builtin documentation.

2010-06-24  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-51

	* tests/AMSU/TestAMSU_generic.arts: Added some
	better documentation with Jacobian definition.

	* TestAMSUA.arts, TestAMSUB.arts, TestAMSUB_fast.arts: Save
	ybatch_jacobians at the end of the job.

	* tests/MHS/TestMHS_generic.arts: Also here modified the comments
	for the Jacobian settings. However, for MHS the Jacobians are
	still turned off at the moment. (No particular reason, you can
	turn them on if you want.)

 2010-06-24  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-50

	* src/methods.cc (ybatchCalc): Added output *ybatch_jacobians*.

	* src/m_batch.cc (ybatchCalc): Now also stores all Jacobians in
	output variable *ybatch_jacobians*. 
	
	* src/agendas.cc (ybatch_calc_agenda): Included *jacobian* as
	output variable.
	
	* src/workspace.cc (ybatch_jacobians): Added this new variable,
	which stores all Jacobians in ybatchCalc calculations.

2010-06-16  Cory  <corzneffect@gmail.com>

	* arts-1-14-49

	* doc/uguide/montecarlo.tex: Some more done. 

2010-06-04  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-48

	* sync version numbers between configure.in and CMakeLists.txt before
	putting this snapshot on the webpage for the workshop.

2010-05-30  Cory Davis  <cory@sundog>

	* arts-1-14-47

	* doc/uguide/montecarlo.tex (UP TO HERE): A bit more done...

2010-05-26  Cory Davis  <cory@sundog>

	* src/m_montecarlo.cc (MCGeneral): Changed a misleading comment.

2010-05-11  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-47

	* src/m_jacobian.cc:

	Remove variable that leads to compile error in Release configuration.

	* doc/uguide/clouds.tex: Fix PyARTS web link.

2010-05-06  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-46

	* src/gas_abs_lookup.cc (GasAbsLookup::Extract):

	Change the local GridPosPoly variables to ArrayOfGridPosPoly with just
	one element. That avoids the creation of a temporary array on every
	call of gridpos_poly. Depending on the control file this speeds up
	absorption calculation by up to 10%.

	* src/interpolation_poly.cc (gridpos_poly):

	Pass the Numeric new_grid directly to other gridpos_poly function
	instead of creating a temporary vector.

2010-05-04  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-45

	* src/m_rte.cc (iyEmissionStandardClearsky): A factor of 0.5 was
	missing for the dB/dT term of the temperature jacobian.

	* src/m_basic_types.cc (Tensor3AddScalar): Created.

2010-05-03  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-44

	* src/m_jacobian.cc (jacobianCalcAbsSpecies): The method was not
	adopted to new way to handle perturbation jacobians. 
	(This was properly flagged by an error, but more likely discovered
	by problems in setting up jacobian_agenda.)

	(jacobianCalcTemperature): As above. Runs. But deviates from the
	analytical results (could be a bug in the analytical expressions).

2010-05-03  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-43

	* src/m_atmosphere.cc (AtmFieldsCalc): Added optional input
	parameter "interp_order" (with default 1). This can be used to
	specify the order of the interpolation used. For the default case
	the behavior is the same as before, but if you want, you can now do
	higher order interpolation. This is recommended if the input
	fields are very coarse. Note that the same interpolation order is
	used for all interpolations (p, lat, lon).
	(AtmFieldsCalcExpand1D): Same change as for AtmFieldsCalc.

	* methods.cc (AtmFieldsCalc, AtmFieldsCalcExpand1D): 
	Added the new parameter.
	
	* special_interp.{cc,h} (p2gridpos_poly): Added this function, which
	is useful for higher order atmospheric interpolation.

	* check_input.{cc,h} (chk_interpolation_grids): Added parameter
	"order" for interpolation order. (There are two overloaded
	functions with this name, which were both changed.)
	
	* m_sensor.cc (f_gridFromSensorAMSU, f_gridFromSensorHIRS): 
	Changed the way the delta (extra margin at band edges) is handled.

	* sensor.{cc,h} (find_effective_channel_boundaries): Added the delta
	parameter as input to this function now.

2010-05-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-42

	* Revert changes to fix the OpenMP memory leak. The workaround
	triggered another, even more severe bug in GCC 4.2 on Linux. Declaring
	the destructors non-virtual leads to an internal compiler error in
	files with a parallel region.

	* KNOWN_ISSUES: Added and documented the OpenMP memory leak.

2010-05-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-41

	* src/matpackI.cc: Include cstring for memcpy.

2010-05-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-40

	* config.h.cmake: Removed spurious quotes.

2010-05-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-39

	* src/matpack*.h, src/workspace_ng.h:

	Make destructors non-virtual if OpenMP is enabled and gcc < 4.3.
	Workaround for gcc bug where virtual destructors are not called for
	variable defined as firstprivate in parallel regions.

	http://gcc.gnu.org/bugzilla/show_bug.cgi?id=36308

	Non-virtual destructor itself can lead to memory leaks but are safe in
	these cases because we don't allocate memory in any superclass.

	* configure.in, CMakeLists.txt:

	Set CXX_VIRTUAL_WORKAROUND to 'virtual' or empty for gcc < 4.3.

	* config.h.cmake: Add code to handle CXX_VIRTUAL_WORKAROUND.

	* src/matpackI.{h,cc}:

	Optimize Iterator1D copy() function. If target and source stride is 1,
	use memcpy instead of a loop for copying.

2010-04-30  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-38

	* src/file.cc (expand_path):

	gcc is scared by my if logic... use parenthesis to unscare him.

2010-04-30  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-37

	* src/file.{cc,h} (expand_path):

	Add function to expand ~ to homedir.

	(cleanup_output_file): Use unlink instead of remove.

	* src/xml_io.cc, src/file.cc, src/nc_io.cc,

	Use expand_path when opening files for reading or writing.

	* CMakeLists.txt: Check for unlink instead of remove.

2010-04-28  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-36

	* src/special_interp.cc (interp_cloudfield_gp2itw): Changed to
	more efficient order of for-loops and if-statements. Now checking
	the index of shifted grid positions, both for first and last
	element. To ensure that index are inside expected range.

2010-04-28  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-35

	* src/interpolation.cc (gridpos): If a new grid point is exactly
	on top of an original grid point, then the returned gp.idx is now
	guaranteed to point exactly at this point, so that gp.fd[0] = 0.
	The only exception from this rule is if the point happens to be
	the last point in the original grid. In that case gp.idx will
	point to the original grid point below.

 	Furthermore, you are now guaranteed that for the ascending old
	grid case:
 	     old_grid[tgp.idx]<=tng || tgp.idx==0
 	And for the descending old grid case:
 	     old_grid[tgp.idx]>=tng || tgp.idx==0

	* src/optproperties.cc (pha_matTransform): Fixed a hidden bug
	here, that got activated by the gridpos disambiguation. In the
	PTYPE_HORIZ_AL case, optical properties are stored only for
	incoming angles up to 90 degrees. But the full grid up to 180
	degrees was used for the call to gridpos. Due to this, it could
	happen that incoming angles at exactly 90 degrees were treated
	incorrectly, since they are actually on the edge of the original
	grid, but gridpos was foolded to think they were inside. This may
	have been responsible for some previously unexplained program
	crashes.

	* doc/uguide/interpolation.tex
	(section{Setting up grid position arrays}):
	Updated documentation to point out the new guarantee.

2010-04-28  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-34

	* src/m_rte.cc (yCalc):

	Parallelize the mblock loop. If nmblock is >= nza this loop will run
	parallel otherwise the inner loop in iyb_calc.

2010-04-28  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-33

	* src/m_rte.cc: The number of possible auxilary variables in y_aux
	(and iy_aux) is now hard-coded to 3. This to allow parallisation
	of yCalc.

	* src/m_jacobian.cc (jacobianCalcPointingZaIybrecalc): Adopted to
	change above.

2010-04-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-32

	* doc/uguide/concept.tex: 'built in' -> 'built-in'.

	* cmake/modules/ArtsBuildTexDoc.cmake:

	Install PDFs into uguide sub-directory in share/doc/arts.

2010-04-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-31

	* src/CMakeLists.txt: Add m_fos.cc to artscore.

2010-04-26  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-30

	* src/Makefile.am: Added m_fos.cc.

	* src/m_fos.cc: The two FOS methods are now placed in this file. 

2010-04-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-29

	* doc/index.html.in: Updated. Link to new docs.

	* doc/arts.css: Updated to match satpage colors.

	* doc/doxygen/CMakeLists.txt, doc/CMakeLists.txt:

	Install doc into share/doc/arts/.

2010-04-26  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-28

	* src/special_interp.cc (interp_cloudfield_gp2itw): Added handling
	of cases where a grid position is at lower boundary of cloudbox
	with fd[0] = 1. This results in an idx of -1. A jump to upper grid
	end points now added.

	* src/workspace.cc: Added fos_use_mean_scat_data. 

	* FOS part reactivated and updated to last changes. Treatment of
	single scattering properties fixed, including handling of
	fos_use_mean_scat_data. That was the last missing "physics". 

2010-04-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-27

	* cmake/modules/ArtsBuildTexDoc.cmake:

	Add missing dependencies. ${TARGET}.stage1 should depend on all
	*.stamp targets.

	* doc/uguide/CMakeLists.txt: Add target arts_docs.

2010-04-23  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-26

	* cmake/modules/ArtsBuildTexDoc.cmake: Cleaning up.

2010-04-23  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-25

	* cmake/modules/ArtsBuildTexDoc.cmake:

	Split building of each document into two stages. The first stage runs
	latex, makeindex, bibtex, and latex. After that the aux files are
	copied to the build directories of the other documents. The second
	stage is another latex run for each document. Now it's possible to
	parallel build the docs and get the cross references right.

2010-04-22  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-24

	* doc/uguide/*.tex: Fixed all cross references between the
	different guide documents, closing trac ticket #39.
	Also removed a lot of tildes in cases like "Figure~\ref{}", which
	now is "Figure \ref{}".

2010-04-22  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-23

	* src/m_rte.cc (y_unitApply): This is a renamed version of yUnit.
	Added runtime checks, trying to catch incorrect usage of the
	method. Wrote on-line documentation. This closes ticket 26.

	* tests/HIRS/TestHIRS.arts: Changed yUnit to y_unitApply.

2010-04-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-22

	* cmake/modules/ArtsBuildTexDoc.cmake:

	Don't depend on a directory, use a timestamp file instead. Fixes doc
	build with cmake < 2.8.0.

2010-04-21  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-21

	* src/m_rte.cc (yUnit): A new version of this method. But now
	realise that it does not work for jacobians that shall not be
	converted, such as jacobianAddPolyfit. Do not know yet how to fix
	this. More tomorrow!

	* src/m_batch.cc: Removed ybatchUnit. Not needed!

2010-04-21  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-20

	* src/m_rte.cc (iyEmissionStandardClearsky): The multiplication of
	iy_transmission and diy_dpath was wrong. The diy_dpath part had to
	be transposed. This part only of concern for part of ppath "after"
	surface reflections.

	* tests/AMSU/TestAMSU_generic.arts: Calculation of jacobians is
	now active. But now saving. This to include calculation of
	jacobians with surface reflections among the standard test cases. 

2010-04-21  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-19

	* doc/uguide/concept.tex (section{Documentation}): Rewritten.

	* doc/uguide/arts_user.tex,
	doc/uguide/arts_developer.tex,
	doc/uguide/arts_theory.tex: Reduced contributer table to
	contributions only in the respective document

	* doc/uguide/sensor.tex: Added line breaks. (This file used
	windows-style single line paragraphs.)

	* doc/uguide/*.tex: Removed the macros:
	\secref, \eqref, \eqnref, \figref, \tabref, \charef.
	Reason, it gets too complicated to make macros for all cases
	(considering the reference could be to another document).

2010-04-21  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-18

	* doc/uguide/montecarlo.tex: Remove empty lines 200/201 to fix build.

2010-04-21  Cory Davis  <cory@sundog>

	* arts-1-14-17

	* doc/uguide/montecarlo.tex: a bit more.  I couldn't test the
	changes because there seems to be something wrong with the
	doc build.

2010-04-20  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-16

	* doc/uguide/CMakeLists.txt:

	List tex file dependencies for each target.

	Remove explicit target arts_docs.

	* cmake/modules/ArtsBuildTexDoc.cmake:

	Put the output files for each document in a separate subdirectory. The
	pdf is copied one level up after a successful build.

	Fixes parallel build of docs but more work is needed to get xrefs
	right.

2010-04-19  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-15

	* doc/uguide/*.tex: Replaced \zlabel and \zref again by \label and
	\ref. References to other files still do not work correctly, but
	at least I know how they can work. To cite a section from the
	theory document in the user guide, write: "See \theory, Section
	\ref{T-sec:xxx}." In other words:
	- One has to manually state which document
	- The reference itself has to start with a special letter, if it
	is to another document (U- for user, D- for developer, T- for
	theory).
	So, the road is clear, but quite a lot of editing required,
	unfortunately. 

2010-04-18  Cory Davis  <cory@sundog>

	* arts-1-14-14

	* doc/uguide/montecarlo.tex: A bit more

2010-04-15  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-13

	* doc/uguide/gridded_fields.tex: Minor changes.

	* src/test_gridded_fields.cc: Updated.

2010-04-14  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-12

	* src/m_sensor.cc (f_gridFromSensorAMSU): Fixed the function to
	work also with touching and overlapping channels. Now uses the
	same backend function for the actual work as
	f_gridFromSensorHIRS. This closes trac ticket #35.  Also changed
	the treatment of the required delta at the channel eges. Now we
	use one full grid spacing on each side.
	(f_gridFromSensorHIRS): Changed the treatment of the required
	delta at the channel eges. Now we use one full grid spacing on
	each side.

	* src/sensor.cc (find_effective_channel_boundaries): No more delta
	in this function. This is now done at the level of the calling
	function. 

	* src/workspace.cc (backend_channel_response_multi): Fixed typo in
	documentation. 

	* tests/testall.py (TestMHS): Increased tolerance for deviation
	from reference case from 0.001 K to 0.005 K. The radiance is now
	different from the reference case, due to the different delta. I
	suspect that the new version is theoretically better, since we now
	have grid points directly on the nominal band edges. But decided
	not to change the reference values, since the tolerance is still
	quite small.

2010-04-14  Cory Davis  <cory@sundog>

	* arts-1-14-11

	* doc/uguide/montecarlo.tex (section{Model[FIXME: needs updating
	to MCGeneral]}): made a start on this.

2010-04-13  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-10

	* doc/uguide/gridded_fields.tex: Start documenting gridded fields.

	* doc/uguide/arts_developer.tex: Include gridded_fields.tex.

	* doc/uguide/Figs/development/griddedfields_inheritance.pdf,
	doc/uguide/Figs/development/griddedfields_objects.pdf: Added.

	* src/gridded_fields.h: Update docs.

	* src/gridded_fields.h, src/m_sensor.cc, src/xml_io_compound_types.cc:

	Changed GriddedField::set_gridname to GriddedField::set_grid_name

	* src/CMakeLists.txt, src/test_gridded_fields.cc: Add test/example.

2010-04-12  Cory  <cory@pheonix>

	* arts-1-14-9

	* doc/uguide/arts_theory.tex: include montecarlo

	* doc/uguide/montecarlo.tex (subsection{Algorithm [FIXME:Needs updating to MCGeneral]}): inserted new MCGeneral flowchart

	* doc/uguide/arts_user.tex: removed montecarlo include

2010-04-09  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-8

	* doc/uguide/CMakeLists.txt:

	For now, make every document depend on all tex files. To only rebuild
	a certain document use 'make arts_user', 'make arts_developer', or
	'make arts_theory'.

2010-04-09  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-7

	* doc/uguide/: Replace all \label by \zlabel and \ref by
	\zref. But cross-references are still not working properly.

2010-04-09  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-6

	* autogen.sh: Add support for automake-1.11.

	* doc/uguide/Makefile.am:

	Build arts_user, arts_developer and arts_theory.

	Currently all docs depend on all tex files. Will be changed in the
	future.

2010-04-08  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-5

	* src/m_rte.cc: Added some code comments.

2010-04-08  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-4

	* doc/uguide/: A first suggestion for the split in three documents
	arts_user, arts_developer, and arts_theory. I think this comes out
	quite well. Still a bug in the cross document references (will fix
	this somehow in the next days). If other like the new structure, I
	propose to also sort the included files into different directories
	for the different documents.
	
	* doc/uguide/uguide.tex: Removed.
	
	* doc/uguide/main.tex: Removed.

	* doc/uguide/common.tex: Created. Page layout, etc, which is
	common to all three documents.
	
	* doc/uguide/arts_user.tex: Created.

	* doc/uguide/arts_developer.tex: Created.

	* doc/uguide/arts_theory.tex: Created.

	* doc/uguide/CMakeLists.txt: Activated the new targets.

2010-04-08  Claudia Emde  <claudia.emde@lmu.de>

	* arts-1-14-3

	* src/cloudbox.cc, src/cloudbox.h, src/doit.cc, src/doit.h,
	src/m_cloudbox.cc, src/m_doit.cc: Moved
	DOIT specific functions from (m_)cloudbox.cc to (m_)doit.cc. This
	fixes ticket #28.

2010-04-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-2

	* doc/uguide/CMakelists.txt: Prepare for the documentation split.

	* cmake/modules/ArtsBuildTexDoc.cmake:

	Create macros for building our latex docs.

2010-04-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-1

	* Fix ticket #34.

	* src/cloudbox.cc, src/cloudbox.h, src/constants.cc,
	src/gridded_fields.cc, src/gridded_fields.h, src/groups.cc,
	src/m_abs_lookup.cc, src/m_atmosphere.cc, src/m_basic_types.h,
	src/m_batch.cc, src/m_cloudbox.cc, src/m_create.cc, src/m_extract.h,
	src/m_sensor.cc, src/m_surface.cc, src/methods.cc,
	src/nc_io_array_types.cc, src/nc_io_compound_types.cc,
	src/nc_io_instantiation.h, src/nc_io_types.h, src/sensor.cc,
	src/sensor.h, src/special_interp.cc, src/special_interp.h,
	src/workspace.cc, src/xml_io_array_types.cc,
	src/xml_io_compound_types.cc, src/xml_io_instantiation.h,
	src/xml_io_types.h:

	Replace GField with GriddedField everywhere for consistency.

	Also increased minor version number because this breaks controlfile
	backwards compatibility. Luckily, GField workspace methods are not
	widely used in controlfiles. Nothing in includes or tests referred to
	any of them.

2010-04-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-41

	* src/methods.cc:

	Added a formatting example for long variable descriptions to the
	template.

	First round of cleaning.

2010-04-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-40

	* src/rte.cc (apply_y_unit): Changed type of iy from Tensor3View
	to MatrixView. Changed all calls of this function.

	(apply_y_unit2): Created this function for conversion of jacobian.

	* src/m_rte.cc (yCalc,iyb_calc): Removed jacobian_unit. 

	* includes/*/*: Removed jacobian_unit from 6 .arts files. 

	* src/m_jacobian.cc (jacobianOff): Removed jacobian_unit. 
	And the WSV jacobianUnit.

	* src/workspace.cc: Removed jacobian_unit. 

2010-04-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-39

	* src/rte.cc (apply_y_unit): Fixed bug causing MHS test to fail.

2010-04-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-38

	* src/rte.cc: Work to fix conversion for PlanckBT started. 

2010-04-07  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-13-37

	* src/interpolation_poly.cc: Corrected doxygen comment at
	beginning of file. 

2010-04-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-36

	* Fix ticket #27.

	* src/m_rte.cc (iyb_calc): Vectorized.

2010-04-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-35

	* includes/mhs/mhs.arts: 
	* includes/mhs/mhs_fast.arts: Updated following
	changes in special_interp.cc.

2010-04-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-34
	
	* src/special_interp.cc (interp_atmfield_by_gp): Fixed ticket 14.
	Remove checks of the type chk_atm_field. 

	* tests/OdinSMR/TestOdinSMR_119ghz.arts: 
	* tests/HIRS/TestHIRS.arts: 
	* includes/general.arts: 
	* src/montecarlo.cc: 
	* src/rte.cc (get_ptvmr_for_ppath): 
	* src/m_rte.cc (iyEmissionStandardClearskyBasic): 
	* src/m_rte.cc (iyEmissionStandardClearsky): 
	* src/m_surface.cc (InterpSurfaceFieldToRteGps): 
	* src/m_atmosphere.cc (InterpAtmFieldToRteGps): All updated following
	changes in special_interp.cc.

2010-04-07  Claudia Emde  <claudia.emde@lmu.de>

	* arts-1-13-33

	* src/scatrtc.{cc,h}: Renamed, now they are called doit.{cc,h}
          Moved the functions is_gp_inside_cloudbox, is_inside_cloudbox to
	  cloudbox.{cc,h}.

	* src/cloudbox.{cc,h}: Included functions is_gp_inside_cloudbox,
	is_inside_cloudbox.

	* src/m_scatrtc.cc: Renamed to m_doit.cc.

	* src/CMakeLists.txt: Renamed scatrte -> doit

	* src/Makefile.in: Renamed scatrte -> doit

	* src/methods.cc: Improved documentation of DoitAngularGridsSet.

2010-04-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-32

	* src/ppath.h (struct Ppath): Removed fields p, t, vmr and
	next_parts from Ppath structure definition.

	* src/ppath.cc: Removed all code related to the removed Ppath fields. 

	* src/m_rte.cc: Removed a bunch of asserts that were repeated for
	each pencil beam calculation. Will anyhow be catched by more basic
	asserts.
	
2010-04-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-31

	* tests/DOIT/TestDOIT.arts: Removed defintion of rte_agenda.

	* includes/general.arts: Removed defintion of rte_agenda.

	* src/m_rte.cc: Big cleaning. Everything around the old RT system
	(with RteCalc as main method) removed. A lot of stuff moved to
	other files. See below.
	
	* src/rte.cc: A number of obselete or replaced (functions with
	newer version) removed. Several new functions coming from m_rte.cc.

	* src/jacobian.cc (vmrunitscf): Moved from m_rte.cc.
	(jacobian_from_path_to_rgrids): Removed.

	* src/agendas.cc: Removed rte_agenda. 

	* src/workspace.cc: Removed diy_dt, diy_dvmr and ppath_array_index. 

	* src/scatrte.cc: Updated comment referring to
	get_radiative_background.

	* src/m_surface.cc: Removed non-active code, marked as old since
	long time.

2010-04-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-30

	* Fix ticket #16.

	* src/file.{cc,h} (cleanup_output_file): Added. Remove empty rep file.

	* src/arts.cc (arts_exit): Call cleanup_output_file on exit.

	* CMakeLists.txt: Check for remove function.

	* config.h.cmake: Add HAVE_REMOVE.

	* src/main.cc: Display runtime in fixed point notation.

2010-04-07  Cory Davis  <cory@sundog>

	* arts-1-13-29

	* src/m_montecarlo.cc (rte_posShift): removed (not used), also
	removed from methods.cc.

	* src/montecarlo.{cc,h) (Cloudbox_ppathCalc): removed (not used)
	(mcPathTrace): removed (not used)
	(opt_depth_calc): removed (not used)
	(Sample_ppathlengthLOS): removed (not used)
	(TArrayCalc): removed (not used)
	(cloudbox_ppath_start_stepping): removed (not used)

	* arts-1-13-28

	* src/montecarlo.cc (Cloudbox_ppath_rteCalc): removed (was already
	commented out
	(montecarloGetIncoming):  removed (was already commented out)  The
	above two functions were used by ScatteringMonteCarlo.

2010-04-06  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-27

	* CMakeLists.txt:

	Revive disort support. ** highly experimental ** This can be enabled
	by passing -DENABLE_DISORT=1 to cmake. Very experimental and only
	working on Linux at the moment (hopefully at least there).

	On a 64-bit compiler the type of Index is automatically changed from
	long to int the moment Disort is enabled. This is necessary because we
	need to make it compatible with the f2c integer type, which is fixed
	to int. We are using pointers to exchange Index arrays with integer
	arrays between ARTS and the Disort code. This will break badly if the
	types don't match and we just brutally cast Index* to integer*.

	In the same way, -Werror is automatically disabled because compiling
	with Index=int throws lots of warnings. (With gcc 4.2 only in the
	disort code, but with 4.4 also in heaps of other places).

	Add workaround for unresolved MAIN__ in libf2c.

	* src/CMakeLists.txt: Merge the two 'if ENABLE_DISORT' blocks into one.

	* src/m_surface.cc (surfaceFlatSingleEmissivity):

	Make sure the constants passed to chk_if_in_range are Numeric
	otherwise the compiler gets confused if we compile with Index=int.

	* README: Carefully mention Disort as an experimental feature.

2010-04-06  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-26

	* src/m_fos.cc: Started this file. Not yet added to Makefile. 
	FOS stuff "deactivated". To be put back after cleaning, when I
	have some time for fixing the details.

	* src/m_rte.cc: Sorted functions and moved some to other files.
	
	* src/ppath.cc (map_daa, rotationmat3D, cart2zaaa, zaaa2cart):
	Moved from m_rte.cc.

	* src/m_atmosphere.cc (atm_checkedCalc): Moved from m_rte.cc.

2010-04-06  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-25

	* CMakeLists.txt, cmake/modules/CheckOpenMPThreadprivate.cmake:

	Instead of disabling OpenMP altogether if threadprivate is not
	supported, just don't use it. This makes it possible to use OpenMP on
	Mac OS X. Only drawback is not so pretty agenda output which is better
	than not having OpenMP at all.

	We don't check for OpenMP support if we generate an Xcode project
	file. Adding our own OpenMP compiler flags will break compilation, so
	we leave all that to Xcode.

	* config.h.cmake, src/messages.{cc,h}, src/main.cc:

	Use new preprocessor variable THREADPRIVATE_SUPPORTED.

	* doc/uguide/main.tex: Update christian's email.

	* .: Clean up svn:ignore property.

2010-03-26  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-24

	* src/m_rte.cc (fos_yStandard): Higher scattering orders than
	single caused error for 1D and 2D. Fixed. But realised that these
	cases are anyhow not handled correctly. Now a runtime error for
	these combinations (but single scattering works for 1D and 2D). 

2010-03-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-23

	* m4/.cvsignore, src/.cvsignore, tests/.cvsignore, aii/.cvsignore,
	doc/uguide/.cvsignore, doc/uguide/Figs/montecarlo/.cvsignore,
	doc/uguide/Figs/scattering/.cvsignore,
	doc/uguide/Figs/rte_theory/.cvsignore,
	doc/uguide/Figs/interpolation/.cvsignore,
	doc/uguide/Figs/sensor/.cvsignore, doc/uguide/Figs/concept/.cvsignore,
	doc/uguide/Figs/polarization/.cvsignore,
	doc/uguide/Figs/ppath/.cvsignore, doc/uguide/Figs/.cvsignore,
	doc/doxygen/.cvsignore, doc/.cvsignore, 3rdparty/disort1.2/.cvsignore,
	3rdparty/.cvsignore, .cvsignore:

	We really don't need those anymore.

	* configure.in: Remove arts.spec from AC_OUTPUT.

2010-03-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-22

	* ChangeLog:

	Slim down the log by merging all entries from before 2008 into
	ChangeLog-20071207.

	* ChangeLog-0.x: Renamed to ChangeLog-20071207.

	* .cproject, .project, .settings:

	Remove obsolete Eclipse project files. Cmake can be used to generate
	those files if needed.

	* arts.spec.in: Remove outdated RPM spec file.

2010-03-19  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-21

	* README.legacy: Rename README to README.legacy.

	* README: Rename README.cmake to README.

	* tests/CMakeLists.txt: Check for a Python interpreter.

	* doc/uguide/CMakeLists.txt, doc/doxygen/CMakeLists.txt:

	If the uguide or the doxygen build is disabled for some reason, output
	a message with the missing command.

	* .: Add commonly used custom build directory names (build_gcc,
	build_xcode) to svn ignore.

2010-03-18  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-20

	* src/m_surface.cc (surfaceFlatVaryingRvRh): Wrong sign for second
	element in surface_emission fixed. 

2010-03-17  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-19

	* src/m_surface.cc (surfaceFlatVaryingRvRh): Created. 

2010-03-14  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-18
	
	* src/m_rte.cc: Some general polishing on comments and header text.

	(iy_transmission_mult_scalar_tau): No Mueller matrix formed now.
	Now just scalar multiplication with transmission. Should give
	faster calculations.
	
	(get_iy_of_background): The input to
	iy_clearsky_agenda can now also be iy_clearsky_basic_agenda. There
	is now a switch when calculating the downwelling radiation for
	surface reflections. This fixes the DOIT problem in last commit.

	(fos_yStandard): Now working for all 3 dimensions (only spectra,
	not aux and jacobians yet). A strect of the latitude grid is used
	for creating a "3D view" for 2D cases, when radiation coming in
	from the side is calculated. 

2010-03-14  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-17

	* DOIT test case is NOT RUNNING. Do not why yet. I commit to test 
	compiling on other machine. 
	
	* src/m_rte.cc: Adopted to change of iy_clearsky_agenda, in
	several functions.
	(fos_yStandard): Now code for 1D, 2D and 3D. Not yet working.

	* src/m_cloudbox.cc (CloudboxGetIncoming1DAtm): Now using
	iy_clearsky_basic_agenda instead of iy_calc_no_jacobian.
	(CloudboxGetIncoming): Now using iy_clearsky_basic_agenda instead
	of iy_clearsky_agenda.

	* src/m_jacobian.cc (jacobianCalcPointingZaIybrecalc): Adopted to
	change of iy_clearsky_agenda.

	* src/agendas.cc: FOS-2D requires the lat_grid. To handle this
	lat_grid was added as input to iy_clearsky_agenda. Added also
	p_grid and lon_grid for consistency.

	* src/ppath.cc (rsurf_at_lat): New internal function.
	(ppath_start_2d): Added code piece to handle start positions
	exactly on top of a pressure surface (following sister 3D
	function). A call of gridpos_force_end_fd is the needed.

2010-03-12  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-16

	* tests/testall.py: Ignore KeyError if CMAKE_GENERATOR is not defined.

2010-03-12  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-15

	* src/ppath.cc (ppath_calc): Removed runtime_error for 2D and 
	cloudbox. Added some code for handling 2D and cloudbox. Not yet 
	working.

	* src/m_cloudbox.cc 

	* src/m_rte.cc (iyFOS): Now using interp_atmfield_gp2itw and
	interp_cloudfield_gp2itw for setting up the interpolation. The
	method shall now handle 1-3D.
	(fos_yStandard): Extended with code for 1D and 2D.

	* src/special_interp.cc (interp_cloudfield_gp2itw): Created.
	(interp_cloudfield_by_itw): Temporary function.

	* src/m_cloudbox.cc (cloudboxSetManuallyAltitude): Removed
	runtime_error for 2D and cloudbox. 
	(cloudboxSetManually): As above.
	(pnd_fieldCalc): As above + added code for 2D.

2010-03-12  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-14

	* cmake/modules/, CMakeLists.txt:

	Revert back to new OpenMP check from arts-1-13-11 and bump the
	cmake version requirement to 2.6.3.

	* README.cmake: Updated.

	* ChangeLog: Remove conflict marker.

2010-03-11  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-13

	* cmake/modules/CheckOpenMP.cmake:

	Readded a modified version of this. FindOpenMP breaks compatibility
	with cmake 2.6.2.

	* cmake/modules/CheckOpenMPThreadprivate.cmake:
	
	Use CheckOpenMP instead of FindOpenMP.

	* CMakeLists.txt: OpenMP_C_FLAGS and OpenMP_CXX_FLAGS -> OPENMP_FLAGS.

2010-03-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-12

	* src/m_rte.cc: FOS part not working right now. Work in progress!

2010-03-11  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-11

	* CMakeLists.txt: Use CheckOpenMPThreadprivate.

	* cmake/modules/CheckOpenMPThreadprivate.cmake:

	Check for OpenMP with threadprivate support.

	* cmake/modules/CheckOpenMP.cmake: Removed.

2010-03-10  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-10

	* src/main.cc: Show include path in 'arts -v' output.

2010-03-10  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-9

	* src/xml_io_basic_types.cc, src/xml_io.cc, src/main.cc (option_input),
	src/parser.cc, src/bifstream (bifstream::getByte):

	Cleaning up variable scopes.

	* src/parser.cc (parse_main):

	Use references for exception in catch blocks.

	(parse_method, ArtsParser::parse_method_args):

	Removed unused variables.

	* src/sourcetext.h: Initialize member mLineBreak in constructor.

2010-03-10  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-8

	* src/agendas.cc (define_agenda_data): Added fos_y_agenda.

	* src/workspace.cc: Added fos_y. Polished text for other fos
	variables.

2010-03-09  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-7

	* doc/doxygen/html/: Removed from SVN.

	* doc/doxygen/Makefile.am:

	Create clean-local target to remove directory html.

	Add doxygen.warn to CLEANFILES.

	Remove SUBDIRS.

	* src/configure.in: Removed doc/doxygen/html.

	* CMakeLists.txt: Require cmake 2.6.2.

2010-03-09  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-6

	* doc/uguide/CMakeLists.txt:

	Make makeindex self-aware. Fixes user guide build in Xcode.

2010-03-09  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-5

	* tests/testall.py:

	Xcode puts the build files in different locations depending on the
	configuration in use (Debug, Release). Make sure testall.py calls arts
	with the right path. Fixes the check and check_fast targets in Xcode.

	* cmake/modules/ArtsTestcases.cmake:

	Pass CMAKE_GENERATOR to testall.py.

	* tests/CMakeLists.txt, cmake/modules/ArtsTestcases.cmake:

	Replace cmake with ${CMAKE_COMMAND}.

2010-03-08  Mathias Milz  <mathias.milz@ltu.se>

	* arts-1-13-4

	* includes/mhs/mhs.arts:modified to use new functions

        * includes/mhs/mhs_fast.arts:modified to use new functions

	* includes/mhs/mhs.lo.xml, includes/mhs/mhs.f_backend.xml,
	  includes/mhs/mhs.backend_channel_response.xml,
          includes/mhs/mhs.sideband_mode.xml,
          includes/mhs/mhs.sideband_response.xml: removed

2010-03-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-3

	* tests/MHS/TestMHS_generic.arts, tests/HIRS/TestHIRS.arts,
	tests/AMSU/TestAMSU_generic.arts:

	Remove jacobian variable from jacobianAddAbsSpecies call. Didn't turn
	up during 'make check' because the jacobians are commented out in
	those control files.

2010-03-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-2

	* src/CMakelists.txt: Add missing matpackI.h to matpack library sources.

	* doc/uguide/CMakeLists.txt: Use MAKEINDEX_COMPILER.

	* doc/doxygen/Doxyfile.in: Generate docset for Xcode.

2010-03-05  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-13-1

	* src/m_sensor.cc (f_gridFromSensorAMSU): Contains now the
	function that used to be f_gridFromSensorMHS. (Handles also
	touching channels.)
	(f_gridFromSensorMHS): Removed.

	* src/methods.cc: (f_gridFromSensorAMSU): Updated documentation.
	(f_gridFromSensorMHS): Removed.

	* includes/mhs/mhs_fast.arts, includes/mhs/mhs_fast.arts: Use
	f_gridFromSensorAMSU, so that tests still run through. (Will be
	adapted further by Mathias.)

2010-03-05  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-13-0 (New minor version number, due to important include
	file changes for AMSU.)

	* src/m_sensor.cc (sensor_responseSimpleAMSU): Added. Does a
	complete sensor setup for an AMSU-type instrument (should also
	work for MHS).

	* src/methods.cc: (sensor_responseSimpleAMSU): Added. 

	* src/workspace.cc: (sensor_description_amsu): Added. Input for
	sensor_responseSimpleAMSU.  

	* includes/amsu/amsub.arts,
	includes/amsu/amsub_fast.arts: Modified to use the new function.

	* includes/amsu/README: Added. Describes antenna file and matlab
	script, which I left there, although they are not used by the
	current standard setups.

	* includes/amsu/amsub.lo.xml,
       	includes/amsu/amsub.sideband_mode.xml,
       	includes/amsu/amsub.sideband_response.xml,
       	includes/amsu/amsub.f_backend.xml,
       	includes/amsu/amsub.backend_channel_response.xml: Removed.

2010-03-01  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-130

	* src/ppath.cc: Fix gcc 4.4 warning.

2010-03-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-12-129

	* src/methods.cc: Add MatrixSet.

	* src/token.{cc,h}: Add Matrix support.

	* src/parser.{cc,h}:

	Add support for setting matrices directly in the controlfile.

2010-02-26  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-128

	* src/ppath.cc: A new try to fix ppaths passing the surface. A
	closer investigation showed that the problem appears to occur when
	the propagation path hits a point where the surface, a pressure
	level and a lat or lon grid points at at the same location!

	Changed RTOL back to 1 cm.

	(do_gridcell_3d): The surface was checked last of all possible
	"surfaces". Now put first. This fixed at least two cases that
	crashed before. More tests running ... 	

2010-02-24  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-127
	
	* A fix similar to previous commit, but for the lower atmospheric
	limit, the surface. Got stuck in a case where the surface was 1 cm 
	above the lowest pressure level. 
	
	* src/ppath.cc: Changed RTOL to 0.02;

	(do_gridcell_3d): Added RTOL in if-statement where do_surface is
	set.

2010-02-23  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-126

	* src/ppath.cc (ppath_calc): Changed check for finding when TOA is
	reached (from below). The old check demanded that the fractional
	distance (of the grid position) to be exactly 1 or 0. The new
	check should be more stable. First of all, it is now tested that
	the propagation direction upwards. The fractional distance can now
	deviate up to 0.01. This is of no practical concern, but should
	help avoiding problems due numerical inaccuracy. This is primarily
	a problem for 3D cases where the radius of a pressure surface is
	changing inside the grid box, and points can easily slip from one
	side of a pressure surface to the other.
	
	Found this by tracking a failing FOS calculation. This could also
	have been the reason to problems for MC, reported by Cory years ago.

	* src/interpolation.cc (is_gridpos_at_index_i): Corrected header
	text (it said that FD_TOL is used, which has been removed).

2010-02-12  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-125
	
	* src/m_rte.cc (iyFOS): Adopted to new variables. And added
	recursive calls to handle higher orders of scattering. 

	* src/workspace.cc: Added fos_i and fos_n. Wrote description for
	fos_angles.

	* src/methods.cc: Corrected errors in the description of
	iyEmissionStandardClearsky.
	
	* src/m_rte.cc (iyEmissionStandardClearskyBasic): A version of
	iyEmissionStandardClearsky with everything around jacobians and
	aux variables removed (a test with a temporary FOS method seems
	now to be 3-5% faster when using this version). 
	Intended to be used inside iy_clearsky_basic_agenda.

	* src/agendas.cc: Added iy_clearsky_basic_agenda. This to get
	simplest possible interface to the calculation of pure
	monochromatic pencil beam calculations. Input is just rte_pos,
	rte_los and cloudbox_on. The DOIT and MC parts can use this
	agenda. And it should be possible to decrease drastically the
	number of input variables for those methods.

2010-02-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-124

	* src/workspace.cc: Added fos_angles. No doc yet.

	* src/m_rte.cc (iyFOS): The scattering angle set is now input.

2010-02-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-123
	
	* src/m_rte.cc (iyFOS): Debugged. Runs without crashing, for a
	simple test case.

2010-02-10  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-122

	* src/m_rte.cc (iyFOS): A complete, but totally untested, version
	And with several parts hard-coded.

2010-02-10  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-121

	* src/m_rte.cc (iyFOS): Some more work ...
	
2010-02-09  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-120

	* src/m_rte.cc (iyFOS): Started on this this test function.

2010-02-04  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-119

	* src/m_atmosphere.cc (AtmFieldsCalc): Added nice runtime error
	checks, using the chk_interpolation_grids. Now gives runtime error
	with detailed information on what is wrong, instead of an
	assertion failure.

	* doc/uguide/interpolation.tex (section{Grid checking functions}):
	Added this new section with documentation on the
	chk_interpolation_grids function.

2010-02-03  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-118

	* src/m_basic_types.cc (SparseSparseMultiply): Created.

2010-02-01  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-117

	* src/m_sensor.cc (sensor_responseBackendFrequencySwitching): 
	Changed end of name from Switch to Switching, to be consistent
	with BeamSwitching. Improved text for on-line doc.

	(sensor_responseFrequencySwitching): Created. To complement the
	WSM above, to also handle DSB observations (as now done at
	Onsala). Can be seen as a "backend" to
	sensor_responseMultiMixerBackend.

	(sensor_responseBeamSwitching): Polishing of text for on-line doc.

2010-01-12  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-116

	* includes/amsu/CMakeLists.txt, includes/hirs/CMakeLists.txt,
	includes/mhs/CMakeLists.txt, includes/odin/CMakeLists.txt,
	includes/CMakeLists.txt:

	Added. Install include files into share/arts/includes.

	* doc/uguide/CMakeLists.txt: Install uguide.pdf into share/doc/arts.

	* CMakeLists.txt: Traverse into includes subdirectory.

2010-01-07  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-115

	* src/m_abs.cc (abs_xsec_per_speciesAddLines): Added a runtime
	error check for negative (Kelvin) temperatures.

2009-12-21  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-114

	* tests/: All tests previously using a version of RteCalc have
	been changed to use yCalc.

	* src/m_cloudbox.cc (CloudboxGetIncoming): There was a temporay 
	CloudboxGetIncoming2. This one has now replaced CloudboxGetIncoming.
	This means that DOIT can now only be run with yCalc and associated
	variables.

2009-12-14  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-113

	* src/m_basic_types.h: Include matpackII.h for Sparse type.

	* src/Makefile.am:

	Add CXXNOSTRICTALIASING flags for all targets depending on binio.

2009-11-12  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-112

	* src/m_sensor.cc (sensor_responseBackendFrequencySwitch): H1 and
	H2 were not correctly initialised for cases where more than
	backend is included.

	* src/methods.cc: 
	* src/m_basic_types.h: Fixed so nrowsGet and ncolsGet work also 
	for Sparse.

2009-11-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-111
	
	* src/m_sensor.cc (InterpTest): Removed.
	(sensor_responseBackendFrequencySwitch): Created.

	* tests/GroundBased/TestFgrid.arts: Now using sensor_responseFillFgrid.

2009-11-09  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-110

	* src/m_sensor.cc (InterpTest): A small, and temporary, method to
	test of polynomial interpolation "filling" of spectra could work.
	That is, to make a polynomial interpolation of spectra to a more
	dense grid before the sensor characteristics are applied (that
	treat the spectra to be piecewise linear). The "filling" would be
	part of H (and thus very quick). Tests so far look very good.

	* tests/GroundBased/TestFgrid.m: Created.

	* tests/GroundBased/TestFgrid.arts: Created.

	* tests/GroundBased/TestGbased.arts: Changed settings for centre
	part of f_grid.

2009-11-03  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-109

	* Compilation fixes for GCC 4.4.1 (default compiler on Ubuntu 9.10).

	* src/parameters.cc: Include cstdio for EOF constant.

	* src/binio.cc: Add -fno-strict-aliasing to COMPILE_FLAGS.

	* src/m_atmosphere.cc, src/absorption.cc, src/m_abs_lookup.cc,
	src/m_scatrte.cc, src/m_rte.cc, src/m_batch.cc:

	There's a dilemma how shared variables in omp loops are handled in GCC
	4.4 compared to previous versions if default(none) is used: In GCC
	4.4 function parameters used as shared variables in parallel loops
	have to be explicitly specified in the list of shared variables.
	Before, function parameters were predetermined 'shared' and listing
	them in the shared statement led to an error. So, we have a deadlock
	here... :-( Solution for now is to keep the original omp pragma
	definition as a comment and remove the default(none) and shared(...)
	directives from the definition of the omp loops. Not ideal, because
	with the previous solution every variable used inside the loop had to
	be declared and the programmer was forced to think if it should be
	shared or private. Now all variables can be used as shared variables
	without explicit definition. Unfortunately, this is the only clean way
	of having the same code compile on newer and older GCC versions.

2009-11-02  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-108

	* src/interpolation_poly.cc (gridpos_poly):

	Removed parallelization. The parallelizing of the allocation loop had
	a severe negative impact on performance. The calculation time
	increased proportional to the number of cores used. Here an example
	for the calculation time of TestRteCalcMC.arts:

	8 Cores: user	0m57s
	4 Cores: user	0m27s
	1 Core:  user	0m6s

	The rationale behind the parallelization was that most of the time in
	the loop is spent on allocating memory for gp. Unfortunately, the
	memory allocations get serialized again by the kernel. So, nothing
	gained by the vectorization. And to make things worse, doing it in
	parallel seems to screw up the kernel's memory handler.

	* src/m_rte.cc (vmrunitscf):

	Changed bitwise OR (|) in if statement to logical OR (||).

2009-10-29  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-107

	* src/m_jacobian.cc (jacobianAddAbsSpecies): Removed logvmr and
	lognd. These options can hardly be used in practice as a priori
	uncertainties must here be specified in a relative manner, and
	only logrel is kept.
	
	* src/m_rte.cc (vmrunitscf): As above.

2009-10-28  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-106

	* Started testing if simple and good idea to allow jacobians for
	the logarithm of absoprtion species.
	
	* src/m_rte.cc (vmrunitscf): Added options logvmr, lognd or
	logrel.

	* src/m_jacobian.cc (jacobianAddAbsSpecies): Added options logvmr,
	lognd or logrel.
	(jacobianCalcAbsSpecies): Now a runtime error if started: "This
	method needs to be updated."
	(jacobianCalcAbsTemperature): Now a runtime error if started: "This
	method needs to be updated."

	* src/jacobian.cc (polynomial_basis_func): Replaced a for-loop with
	vector functionality.

2009-10-21  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-105

	* tests/ClearSky/TestClearSky.arts: As below.

	* tests/GroundBased/TestGbased.arts: Added test of
	jacobianAddFreqShiftAndStretch.

	* src/m_jacobian.cc: Polishing and changes in the Add methods matching
	the methods below.

	(jacobianCalcPointingZaIybrecalc): The different 
	calculation options will be handled by separete methods. Like this 
	one. jacobianCalcPointingZa renamed, and with more checks.

	(jacobianCalcFreqShiftAndStretchIybinterp): Renamed. Completed. 
	Initial tests OK.

	(jacobianCalcPolyfit): More checks.

2009-10-20  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-104

	* src/m_jacobian.cc (jacobianCalcFreqShiftAndStretch): Unfinished
	revision.

	* tests/ClearSky/TestClearSky.arts: 

	* tests/GroundBased/TestGbased.arts: Updated.

	* src/m_rte.cc (yCalc): jacobian now initialised to zero. Should be
	more effecient, than making extra loops in jacobianCalc methods.
	
	* tests/testall.py (TestClearSky.test3): Adopted to changes below.

	* tests/ClearSky/TestClearSky.arts: Now completely updated. And
	now using two different, and more inetresting, angles.

	* src/m_jacobian.cc (jacobianCalcPolyfit): Updated 
	(no_pol_variation was not correctly handled). Dummy code
	to avoid warnings for iyb and yb.
	
	(jacobianAddPolyfit): Updated.

2009-10-19  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-103

	* Added a last new feature for rt-part, a general handling of
	providing an estimation of calculation error. 
	
	* tests/MonteCarlo/TestRteCalcMC.arts: As below.

	* tests/DOIT/TestDOIT.arts: As below.

	* tests/ClearSky/TestClearSky.arts: Now using yCalc, instead of
	RteCalc.

	* src/m_rte.cc: Added handling of iy_error, iy_error_type and y_error
	(for all affected methods).

	* src/m_cloudbox.cc (CloudboxGetIncoming2): As above.

	* src/m_jacobian.cc: As above, and removed jacobian as input to the
	Add-methods.

	* src/agendas.cc: Added iy_error, iy_error_type as output for
	iy_clearsky_agenda.

	* src/workspace.cc: Added iy_error, iy_error_type and y_error. 

	* includes/general.arts: Added definition of iy_aux_do and
	iyEmissionStandardClearsky.

2009-10-18  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-102

	* Perturbation jacobians can now only be calculated through
	yCalc (jacobianCalc removed). Too messy to keep both systems alive
	and think that I am the only one using such jacobians
	presently. Tell me if I am wrong.

	* src/workspace.cc: New variables imblock, iyb and yb.

	* src/agendas.cc: jacobian_agenda now taking imblock, iyb and yb
	as input.

	* src/m_rte.cc (iyMC): Tested. Seems to work.

	* src/m_jacobian.cc (jacobianCalc): Removed.
	(jacobianAddPointing): Removed.
	(jacobianCalcPointing): Removed.
	(jacobianAddPointingZa): Finished.
	(jacobianCalcPointingZa): Created. Will later have more options.

2009-10-16  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-101

	* src/m_rte.cc (ib_calc): Part of yCalc extracted. Direct access
	to this part needed for jacobian calculations.

	* src/m_jacobian.cc (jacobianAddPointingZa): Started on new version
	of jacobian perturbation methods.
	
2009-10-14  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-100

	* src/montecarlo.cc: Commented out montecarloGetIncoming and
	Cloudbox_ppath_rteCalc as functions not used.

	* src/m_rte.cc (iyMC): A function to replace RteCalcMC.

	* src/m_cloudbox.cc (CloudboxGetIncoming2): A version using
	iy_clearsky_agenda. Tested. Will replace CloudboxGetIncoming.

2009-10-14  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-99

	* Wanted a single iy to be a column vector, to match RT
	expression. Turned out to cause practical problems. Changed back
	to old solution of having this as a row vector. Allowed some
	cleaning of the code. Functionality of yCalc as for last commit.

	A first step to activate the new code:
	
	* src/m_jacobian.cc (jacobianUnit): Now using apply_y_unit.

	* src/m_batch.cc (ybatchUnit): Now using apply_y_unit.

	* src/m_rte.cc (yUnit): Now using apply_y_unit.

	* src/rte.cc (apply_y_unit): Now takes radiance data as a Tensor3, 
	and only a single conversion method is needed.
	(apply_j_unit): Created. Actual calculation done by apply_y_unit.

	(apply_y_unit_single): Removed.

2009-10-13  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-98

	* src/m_rte.cc (get_iy_of_background): Code now for all cases.
	Surface case tested.

2009-10-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-97

	* src/m_rte.cc: Found that old analytical jacobians crashed for
	stokes_dim > 1 (simple bug to fix) and that there is some very
	small calculation error for old absorption species jacobians. Not
	getting consistent results for t-jacobians. Will later test compare
	with perturbation calculations.
	
	* src/m_rte.cc (iyEmissionStandardClearsky): Now complete code in place. 
	Seems to work, but confirmation for t-jacobians needed. 

2009-10-08  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-96

	* src/m_rte.cc: Did some rearrangements of new part and added code
	for jacobians. Debugging needed ...

2009-10-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-95

	* src/m_rte.cc (iyEmissionStandardClearsky): Started on jacobians.

2009-10-06  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-94

	* src/m_rte.cc: Changed name to iyEmissionStandardClearsky. More
	sub-functions and a macro to ake code more compact. 
	Made the sister method: iyTransmissionStandardClearsky

2009-10-06  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-93

	* src/m_rte.cc (iyClearskyStandard): Got a free hour. Some more work on
	iyClearskyStandard. 

2009-10-06  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-92

	* src/m_rte.cc (1475):

	Implicit conversion from Index to Numeric throws a warning in gcc
	4.3.3 because the value might change. Added explicit cast.

2009-10-06  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-91

	* src/m_rte.cc (iyClearskyStandard): As below.

2009-10-05  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-90

	* src/m_rte.cc: Some further work on iyClearskyStandard and
	sub-functions.

2009-10-05  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-89

	* src/m_rte.cc: Complete code for y_unit now at place (not
	tested), beside parallelisation. Started in iyClearskyStandard and
	where as much as possible will be placed in general sub-functions.

	* src/agendas.cc: Added iy_aux_do as input to iy_agenda.

	* src/workspace.cc: Added iy_aux_do. 

2009-10-04  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-88

	* src/m_rte.cc (yCalc): The summation of sensor_los, mblock_za_grid and
	mblock_aa_grid is now handled OK (which is not the case for RteCalc).
	iy_agenda is in place.

	* src/methods.cc: Added text for atm_checkedCalc. 

	* src/workspace.cc: Removed i_space. Added iy_transmission and
	atm_checked.

	* src/m_jacobian.cc (jacobianClose): Added jacobian_do.
	(jacobianOff): As above.

2009-10-02  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-87

	* src/methods.cc: yCalc now here as well. 

	* src/m_jacobian.cc (jacobianClose): Added jacobian_do.
	(jacobianOff): As above.

	* src/workspace.cc: Added y_aux and jacobian_do.

2009-10-02  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-86

	* TODO: There were no To do's since 2003-03-31! All I could see
	was outdated. Just removed the old text, to initialise a "re-start"
	of the file. I will also use it for notes during the present
	revision work.

	* src/m_rte.cc: More new/revised code. No details here before the
	code starts to replace existing functions.

2009-10-01  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-85

	* src/m_rte.cc (yCalc): A few lines of more code.

2009-10-01  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-84

	Started on revised version of RteCalc: yCalc
	Not "activated". Started to add some variables and agendas. 

	Will continue this. I will leave everything around RteCalc untouched
	until I am sure that yCalc works. 
	
2009-09-25  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-83

	* m_rte.cc (RteCalc):

	Fix string quotes to make it compile again.
	C++ uses double quotes for Strings, not single quotes like matlab. :-)

2009-09-24  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-82

	* Bengt and I have realised that azimuth angles in sensor_los and
	mblock_aa_grid can not just be added. This distorts the
	rectangular grid made up by mblock_za_grid and mblock_aa_grid.
	The problem originates in the fact that 1 degree in azimuth
	correponds to a smaller distance when going towards zenith angles
	of 0 and 180 deg. I have tested out a solution in matlab. This
	will be added to arts later when revising the rt part.
	
	* src/m_rte.cc (RteCalc): Usage of 2D antennas will now cause a
	runtime error.

2009-09-22  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-81

	* src/check-code-tab-indent.sh: Fix paths for non-sourcedir build.

	* src/m_sensors.cc, src/methods.cc: Remove tabs.

2009-09-21  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-80

	* includes/odin/odinsmr_501.arts: Last commit included some
	temporary test lines. Now removed.

2009-09-21  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-79

	* src/m_sensor.cc (antenna_responseGaussian): Polarisation and
	frequency grid values are now "NaN" and -999. To flag that the
	values are not defined.
	(sensor_responseAntenna): Removed demand that for response
	patterns having a single frequency that this frequency is inside
	sensor_response_f_grid. Not needed as no interpolation is performed.

2009-09-21  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-78

	* src/m_sensor.cc (antenna_responseGaussian): Fixed bugs found by
	Oliver. Thanks.
 
2009-09-21  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-77

	* tests/CMakeLists.txt: Add GroundBased test to fast tests.

	* tests/Makefile.am: Add GroundBased to TESTDIRS.

2009-09-20  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-76

	* tests/Makefile.am: Added GroundBased.

	* tests/testall.py (TestGroundBased): Added.

	* src/m_sensor.cc (sensor_responseBackendFrequencySwitch): Created.

	* tests/GroundBased/TestGbased.arts: Finished.

2009-09-20  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-75

	* src/m_sensor.cc (antenna_responseGaussian): Created. Not sure if
	works yet.

	(backend_channel_responseFlat): Created.

2009-09-20  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-74

	* src/methods.cc: batch_atm_fields_compactFromArrayOfMatrix was 
	placed among methods starting on abs...

	* tests/GroundBased/TestGbased.arts: Extended.

	* src/m_sensor.cc (backend_channel_responseGaussian): Created. 
	
	* src/sensor.cc (gaussian_response): Created.

	* src/m_basic_types.cc (NumericAdd): Created.
	(NumericScale): Created.
	(VectorFlip): Created.

2009-09-18  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-73

	* tests/GroundBased/TestGbased.arts: Started this test. To have a
	test case for beam and frequency switching.  

2009-09-18  Mathias Milz  <mathias.milz@ltu.se>

	* includes/mhs/
	  added include files for MHS fast setup:

	* tests/MHS/TestMHS_fast.arts
	  added testcase for MHS_fast 

	* tests/CMakeLists.txt
	  included MHS testcases

	* tests/testall.py
          Modified testall.py:
	  - Updated reference values for the test of AMSU-B to the new setup
	  - decreased acceptance limit for AMSU from 0.02 to 0.001.
	  - included testcases for MHS and MHS_fast.

2009-09-18  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-72

	* 2D antennas appear to work. Tests for various configurations
	have been performed. Note that the 2D weighting is handled in a
	somewhat simplified way. And that set-up sensor response is slow for 
	large cases.

	* src/m_sensor.cc (sensor_responseMultiMixerBackend): Data were
	sorted incorrectly for multi beam cases. 

	(AntennaMultiBeamsToPencilBeams): New WSM.

	* src/sensor.cc (antenna2d_simplified): Did not work correctly for
	multi beam cases.
	
2009-09-18  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-71

	* configure.in, includes/Makefile.am, includes/hirs/Makefile.am,
	includes/mhs/Makefile.am:

	Updated.

2009-09-18  Mathias Milz  <mathias.milz@ltu.se>

	* arts-1-12-70

	* includes/amsu/amsub.arts: 
	  the maximum propagation step(ppath_lmax), is set from the 
	  default(10.e3)to 250 m for higher accuracy in forward 
	  calculation
	
	* includes/amsu/amsub_fast.arts:	
	  the maximum propagation step(ppath_lmax), is set from the 
	  default(10.e3)to 250 m for higher accuracy in forward 
	  calculation

	* includes/mhs/:
	  introduced include-files for MHS-setup.

	* test/mhs/:
	  build test case for MHS setup.

2009-09-17  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-69

	* src/sensor.cc (antenna2d_simplified): Added some output to find
	the bottleneck for larger calculations.

	* includes/amsu/setup_input.m (setup_input): Generates now also
	an antenna pattern file.

2009-09-16  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-68

	* src/sensor.cc (antenna2d_simplified): First code had several
	bugs (of course). Code runs and response matrix has at least
	correct structure. But more tests needed before I give OK.

2009-09-16  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-67

	* src/sensor.cc (antenna2d_simplified):

	Insert missing & in if statement.

2009-09-15  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-66

	* src/sensor.cc (antenna2d_simplified): Created. Complete code,
	but not a single test run made yet. Handles 2D antenna pattern
	with a slight simplification with respect to "arts definitions".

	* src/sensor.cc (antenna1d_matrix): Wrote doxygen header.

	* src/m_sensor.cc (sensor_responseAntenna): Added call of 
	antenna2d_simplified.

2009-09-10  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-65

	* src/m_montecarlo.cc (MCGeneral): Emission terms and conversion
	from i to RJ-Tb had "f_index" hard-coded to 0, and the usage of
	the function through RteCalcMC did not work. Calculations made by
	Bengt revealed the problem.  There was a bias between clear-sky
	simulations and MC calculations with zero IWC for frequencies
	after the first one. That bias is now removed. ARTS tests work and
	the atmlab MC demo runs fine.

	Added some runtime checks around f_index and the surface part. The
	first checks should ensure that the function is not used
	incorrectly even after the last changes

	* src/m_rte.cc (RteCalc): Adopted to change in rtecalc_check_input.
	(RteCalcMC): As above.

	* src/rte.cc (rtecalc_check_input): Added checks of
	sensor_response_f, sensor_response_pol, and sensor_response_za.

	* src/agendas.cc: Fixed a spelling error.

2009-09-03  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-64

	* src/matpackII.{cc,h}:

	Implement add() and sub() for sparse matrices.

	* src/test_sparse.cc: Add test49 for add+sub.

2009-08-18  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-63

	* Change version handling to not trigger a complete rebuild (cmake).

	* src/auto_version.h.in: Header file template for full version name.

	* src/main.cc:

	Include version.h and use new ARTS_FULL_NAME.

	* src/CMakeLists.txt: Generate auto_version.h and removed version.cc.

	* configure.in: Generate src/auto_version.h.

	* src/version.cc, src/Makefile.am: Removed.

	* config.h.cmake: Removed VERSION.

2009-08-18  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-62

	* build:

	Added empty default build directory. Set ignore to *.

2009-08-14  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-61

	* src/m_jacobian.cc: Adopted change below. 

	* src/agendas.cc: Removed pnd_field as input to jacobian_y_agenda
	(this part not used).

	* src/methods.cc: Added jacobianFreqShiftAndStretch and
	jacobianCalcFreqShiftAndStretch. And made some corrections and
	polishing of text for other jacobian methods.
	
2009-08-13  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-60

	* src/agendas.cc: Added f_grid as input to jacobian_y_agenda.

	* src/m_jacobian.cc: Adopted change above.
	(jacobianFreqShiftAndStretch): Created (but not tested).
	(jacobianCalcFreqShiftAndStretch): Created (but not tested).

2009-08-10  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-59

	* CMake build system is almost ready for prime time.  Building the
	user guide and Doxygen documentation works properly now.

	Output is now much cleaner than before. The Latex compilation is run
	in non-interactive batchmode and completely silent if no error occurs.
	Endless clutter of doxygen warnings is written to a log file
	(doxygen.warn).

	* configure.in, doc/Makefile.am, doc/icons: Remove icons directory.

	* doc/arts.css: Remove bluemark.gif.

	* doc/index.html.in:

	Refer to tests directory for control file examples.

	* doc/CMakeLists.txt:

	Generate index.html in build dir.

	Copy arts.css to build dir.

	* doc/uguide/CMakeLists.txt:

	Properly define ADDITIONAL_MAKE_CLEAN_FILES.

	Also depend on all pdf files in the Figs directory.

	* src/CMakeLists.txt:

	Remove unnecessary binary path from auto_* dependencies.

	* doc/doxygen/Doxyfile.in:

	Remove obsolete DETAILS_AT_TOP.

	Write warnings to doxygen.warn instead of stderr.

	* src/CMakeLists.txt: Add target BuildAutoSources for doxygen.

	* doc/doxygen/CMakeLists.txt:

	Remove matpack and artscore dependency from apidoc. Depend on
	BuildAutoSources instead.

2009-07-08  Isaac Moradi  <imoradi(at)www.sat.ltu.se>

	* arts-1-12-58

	* src/methods.cc
	Updated the documentation of the method "batch_atm_fields_compactFromArrayOfMatrix"
	The method can handle additional columns which are not directly used by ARTS.
	the input matrix can contain some additional columns, for e.g. 
	wind speed, but they must be flagged by 'ignore', small or large 
	letters, in the field name. The method will remove these additional 
	fields and will resize both the matrix and the field names.

2009-08-12  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-57

	* includes/hirs/*.f_grid_fast.xml, includes/hirs/*.W_fast.xml:
	Updated. These are the latest optimized grids, resulting from
	separate annealing runs for each channel. Accuracy should be
	better than 0.05 K for all channels except Channel 1.

2009-08-10  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-56

	* doc/uguide/CMakeLists.txt: Fix dependencies.

	* doc/uguide/uguide.tex:

	Use \usepackage{ifpdf} instead of our own macro which leads to errors
	on newer tex distributions.

2009-08-10  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-12-55

	* doc/uguide/CMakeLists.txt: Build the user guide with cmake.

	* src/CMakeLists.txt:

	Only use netcdf variables if the netcdf library was enabled and found.

	* cmake/modules/FindNetCDF.cmake: Mark NETCDFXX_LIBRARY as advanced.

2009-07-24  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-54

	* src/absorption.h: Fixed typo in documentation header for class
	LineRecord. The unit of the line strength I0 is m^2*Hz (not
	m^2/Hz, as it was erroneously written).

2009-07-09  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-53

	* CMakeLists.txt, doc/CMakeLists.txt, doc/doxygen/CMakeLists.txt:

	Build the doxygen documentation with cmake.

	* cmake/modules/CheckOpenMP.cmake, cmake/modules/FindNetCDF.cmake,
	cmake/modules/COPYING-CMAKE-SCRIPTS:

	As usual, forgot to 'svn add'...

2009-07-09  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-52

	* CMakeLists.txt, config.h.cmake:

	Add type size checks.

	Detect zlib and netcdf libraries.

	Move OpenMP check into a module.

	* cmake/modules/CheckOpenMP.cmake, cmake/modules/FindNetCDF.cmake,
	cmake/modules/COPYING-CMAKE-SCRIPTS:

	Added.

	* cmake/modules/ArtsTestcases.cmake: Remove extraneous variable.

	* README.cmake: Updated.

	* src/nc_io_compound_types.cc, src/nc_io_types.h, src/nc_io.h,
	src/nc_io_basic_types.cc, src/nc_io_array_types.cc, src/nc_io.cc:

	Put a '#ifdef ENABLE_NETCDF' around these.

	* src/m_select.h: Include matpackII.h for Sparse.
	
	* src/methods.cc: Replace tabs with spaces.

2009-07-08  Isaac Moradi  <imoradi(at)www.sat.ltu.se>

	* arts-1-12-51

	* src/m_atmosphere.cc
	Modified the method 'atm_fields_compactFromMatrix' to handle
	additional columns which are not directly used by ARTS.
	Now, the matrix can contain some additional columns, for e.g. 
	wind speed, but they must be flagged by 'ignore', small or large 
	letters, in the field name. The method will remove these additional 
	fields and will resize both the matrix and the field names.
	* src/methods.cc
	Updated the documentation of the mentioned method

2009-07-07  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-50

	* cmake/modules/ArtsTestcases.cmake, tests/CMakeLists.txt:

	Bad idea to use 'cp -u'... some variants of copy don't support the -u
	option. Instead we're now using the proper system-independent 'cmake
	-E copy_if_different'.

	Also fix dependencies between the test cases.

2009-07-03  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-49

	* Worked on nested parallelization. It is now enabled by
	default. Every parallel loop should check, whether the program is
	already executing parallely. This is achieved by adding
	if(!arts_omp_in_parallel()). Furthermore, parallel loops that
	contain calls to other functions that contain parallel code should
	test whether it is really worthwhile to be parallel. This is done
	in the same if clause. By not running parallel in case the loop is
	trivial, the option is left open for a loop further down in the
	call chain to run parallel.

	* This version was certified to still give correct results for
	AMSU-B (Chevallier test). It had been a while since I have checked
	this last.

	* src/main.cc (main): Turn on omp_nested at start of main
	function. 

	* src/m_atmosphere.cc,
      	src/m_abs_lookup.cc,
      	src/m_scatrte.cc,
      	src/interpolation_poly.cc,
      	src/m_rte.cc,
      	src/m_batch.cc: Added the new if(!arts_omp_in_parallel()) clause
	to all parallel loops.
	
	* src/absorption.cc (xsec_species): Parallelized the line-by-line
	loop. This is only activated if the outer loop over pressure can
	not be parallelized (because there are two few pressures).

2009-07-03  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-48

	* src/m_batch.cc (ybatchCalc): Cosmetic changes.

	* tests/HIRS/TestHIRS.arts: Cosmetic changes.

	* src/arts_omp.{h,cc} (arts_omp_set_dynamic): Added this function,
	a wrapper for the standard OMP function with the same name.

	* src/absorption.cc (xsec_species): Only added a comment.

2009-07-03  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-47

	* autogen.sh:

	Set srcdir to "dirname $0" so autogen.sh can also be called from a
	separate build dir, not only from the toplevel source directory.

	* tests/Makefile.am:

	Use -p option for mkdir to avoid warning when trying to create an
	already existing directory.

2009-07-02  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-46

	* tests/CMakeLists.txt: Implement tests in cmake.

	* tests/testall.py: Handle absolute TOPSRCDIR correctly.

	* CMakeLists.txt: Add subdir tests.

	* cmake/modules/ArtsTestcases.cmake: cmake macros for testcases.

2009-07-01  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-45

	* src/m_sensor.cc (sensor_responseBeamSwitching): Bug when setting new
	zenith angle. On-line doc now explains what angles that are set.

2009-06-30  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-44

	* src/methods.c, src/m_sensor.cc (WMRFSelectChannels): This method
	now no longer requires backend_channel_response as input. The
	weight matrix itself contains all information we need.

	* includes/hirs/hirs_fast.arts: Removed backend_channel_response,
	we do no longer need this here.

	* src/workspace.cc (wmrf_weights): Added matrix dimensions in
	online documentation.

	* src/m_select.h (Select): Fixed serious bug in the implementation
	of this method for Sparse.

	* tests/HIRS/TestHIRS.arts: Only comment changes.

2009-06-29  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-43

	* includes/hirs/NOAA12_HIRS.W_fast.xml,
	includes/hirs/TIROSN_HIRS.f_grid_fast.xml,
	includes/hirs/NOAA12_HIRS.f_grid_fast.xml,
	includes/hirs/TIROSN_HIRS.W_fast.xml: Updated these files, the
	last remaining satellites. Fast setup is now the new revision for
	all satellites.

2009-06-23  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-42

	* includes/hirs/hirs_fast.arts: The work-over of this setup file
	is now completed. It does no longer do a full sensor setup first,
	but directly loads the WMRF weight matrix. I had to implement some
	new WSVs and WSMs to for this purpose. Also, selection of only
	some channels now works correctly. 

	* src/workspace.cc (wmrf_channels): Added.
	(wmrf_weights): Added.

	* src/m_sensor.cc (f_gridPurgeUnnecessaryFreqs): Removed.  
	(WMRFSelectChannels): Added.
	(sensor_responseWMRF): Added.
	See arts online documentation for description of the new methods.

	* src/methods.cc (f_gridPurgeUnnecessaryFreqs): Removed.  
	(WMRFSelectChannels): Added.
	(sensor_responseWMRF): Added.

	* src/m_rte.cc (RteCalc): Give more explicit error message for
	sensor variable mismatch.

2009-06-18  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-41

	* Commit to save work state. Fast HIRS setup does not run right
	now, don't update if you need it. I'm working on allowing to
	select only a subset of channels for calculation.
	
	* src/methods.cc (f_gridPurgeUnnecessaryFreqs): Added.
	(Select): Added implementation for Sparse.

	* src/m_sensor.cc (f_gridFromSensorHIRS): Moved all the
	preparatory work of sorting and merging channels out to a separate
	function find_effective_channel_boundaries in file sensor.cc.
	(f_gridPurgeUnnecessaryFreqs): Added this new method, which
	removes frequencies from f_grid that are not in any instrument
	channel. Also uses the new find_effective_channel_boundaries
	subfunction.

	* src/sensor.{h,cc} (test_and_merge_two_channels): Moved here
	from m_sensor.cc.
	(find_effective_channel_boundaries): Added.

	* src/m_select.h (Select): Added implementation for Sparse.

	* src/m_rte.cc (RteCalcMC): English correction of error message.
	(RteCalc): English correction of error message.

2009-06-15  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-40
	
	* includes/hirs/*_HIRS.f_grid_fast.xml,
	includes/hirs/*_HIRS.W_fast.xml: These are the new fast setup
	files. Two sensors still have the old files, because the
	calculations are not finished: NOAA12 and TIROSN. Will update
	these as soon as the results are available. 

2009-06-12  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-39

	* includes/hirs/NOAA11_HIRS.f_grid_fast.xml,
	includes/hirs/NOAA11_HIRS.W_fast.xml: Added these two missing
	files. Note: There still is a bug in the fast HIRS setup, I am
	regenerating it right now. Error is below 0.5 K for most channels,
	but will be much smaller with the corrected version. Use with
	caution.   

2009-06-11  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-38

	* src/m_abs_lookup.cc (abs_lookupSetupBatch): Do a number of
	safety checks on the field names in the input atmospheric states
	and abs_species. Basicallly, we check that the input field names
	match the names of the absorption species.

	* src/abs_species_tags.{cc,h} (get_species_name): Added this
	function, which returns the species name for a tag group.  A tag
	group consists of several elementary SpeciesTags, which must all
	belong to the same molecular species. This function returns a
	string with the name of the species.

2009-06-10  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-37

	* src/species_data.cc (CH4-312): Added entry for this new isotope
	in HITRAN2008. Still commented out due to missing partition
	function data. 

2009-06-08  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-36

	* includes/hirs/*.f_grid_fast.xml, includes/hirs/*.W_fast.xml:
	Added updated setup files for fast HIRS calculation. These were
	computed for the new HIRS reference setup that was introduced in
	arts-1-12-22. WARNING: The setup files for NOAA11 are still
	missing, I will add them as soon as the calculation is finished. 

2009-06-01  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-35

	* src/binio.h, src/bifstream.{cc,h}, src/bofstream.{cc,h}:

	Change return type of pos function to streampos to fix a warning on
	32-bit compilation.

2009-05-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-34

	* doc/uguide/main.tex: Commented out the sensor section.

	* doc/uguide/ppath.tex: Fixed some smaller things and removed control
	* doc/uguide/rte.tex:   file examples in these sections.
	* doc/uguide/atmosphere.tex: 
	* doc/uguide/concept.tex:  

2009-05-07  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-33

	* doc/uguide/concept.tex: Section on control files and workspace
	moved and rewritten. Figures removed, since they were not very
	illuminating. 

	* doc/uguide/Figs/concept/generic_method.pdf,
	  doc/uguide/Figs/concept/method.pdf: Removed.

	* doc/uguide/Figs/concept/README: Added, explains that there are
	no figures in this Chapter.	

2009-05-04  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-32

	* No change in arts source code, but setup files for new HIRS
	instruments in includes.

	* includes/hirs/find_freq_h.pro
	* includes/hirs/wavnum2freq.pro: IDL programs used by Viju to
	create the files.

	* includes/hirs/METOPA_HIRS.backend_channel_response.xml
	* includes/hirs/METOPA_HIRS.f_backend.xml
	* includes/hirs/NOAA18_HIRS.backend_channel_response.xml
	* includes/hirs/NOAA18_HIRS.f_backend.xml
	* includes/hirs/NOAA19_HIRS.backend_channel_response.xml
	* includes/hirs/NOAA19_HIRS.f_backend.xml: New setup files for
	N18, N19, and Metop A. Content and format similar to the files for
	the older sensors.

2009-04-26  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-31

	* doc/uguide/fm_definitions.tex:
	* doc/uguide/introduction.tex:
	* doc/uguide/formats.tex:
	* doc/uguide/utilities.tex: All removed.

	* doc/uguide/Figs/fm_definitions: Removed. Figures moved to the
	two new folders below.

	* doc/uguide/Figs/atmosphere:
        * doc/uguide/Figs/rte: Created.
	
	* doc/uguide/rte.tex: Included text from fm_definitions and started
	revision.

	* doc/uguide/atmosphere.tex: Created, based on text from old
	fm_definitions.tex.

	* doc/uguide/concept.tex: New text for introduction, What is ARTS?,
	Documentation guide and Environmental variables. Fixed some smaller
	things on other parts.

	* doc/uguide/main.tex: Updated addresses and some layout
	improvements. Moved Formalism section to theoretical background
	part.
	
	* doc/uguide/uguide.tex: Some cleaning of the file.

	* doc/uguide/references.bib: Added some of the newer ARTS
	publications. Added missing title for a reference used in MC
	section.

	* doc/uguide/symbol_defs.tex: Cleaned up sorting of definitions.

2009-04-23  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-30

	* includes/hirs/hirs_fast.arts: Fixed bug (re-creation of string
	variable dummy).

2009-04-23  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-29

	* src/m_abs.cc (abs_linesReadFromArtsObsolete): Added
	documentation header, stating that the function is obsolete. It is
	no longer included in methods.cc.

	* src/methods.cc: Continued documentation spring cleaning. Now
	done down to including method abs_lookupAdapt.

2009-04-22  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-28

	* configure.in: Not updated for last commit.

2009-04-22  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-27

	* src/sensor.cc (mixer_matrix): Changed the lower IF limit for
	created frequency grid. The point is now always 0 (corresponding to
	LO in RF). This makes it simpler to set up f_grid, especially for
	cases with an IF band starting at 0. 

	This should not cause any problems for existing sensor set-ups (tell
	me if I am wrong here!).

2009-04-20  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-26

	* src/methods.cc: Spring cleaning of online method
	documentation. Started at the top, and got down to 
	abs_lineshape_per_tgDefine.

2009-04-20  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-12-25

	* src/parser.cc (ArtsParser::parse_generic_output):

	Throw exception if a variable is created twice.

	* src/exceptions.h: Added WsvAlreadyExists exception.

	* ChangeLog: Added missing entry for arts-1-12-21.

2009-04-20  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-24

	* src/methods.cc: Extended the text for surfaceFlatSingleEmissivity
	and surfaceFlatVaryingEmissivity, after a suggestion from Stefan.

2009-04-20  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-23

	* src/methods.cc: Added to text to surfaceFlatRefractiveIndex, to
	make clear that complex_n must match f_grid.

2009-04-17  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-22

	* Fixed bug in HIRS setup. Sensor responses are now applied in
	radiance units, conversion to Tb is done afterwards, outside of
	RteCalc. 

	* includes/hirs/hirs_reference.arts: Set y_unit and jacobian_unit
	to 1.

	* includes/hirs/hirs_fast.arts: Set y_unit and jacobian_unit
	to 1.

	* tests/HIRS/TestHIRS.arts: Apply conversion from radiance to
	Planck Tb in ybatch_calc_agenda, after execution of RteCalc.

2009-04-14  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-12-21

	* src/methods.cc: Polish my share of workspace methods.

2009-04-09  Patrick Eriksson  <patrick.eriksson@chalmers.se>

        * arts-1-12-20

	* src/workspace.cc: Polishing for some variables. Removed some variables
	that have been commented out for a long time, such as zeeman variables.

2009-04-09  Patrick Eriksson  <patrick.eriksson@chalmers.se>

        * arts-1-12-19

	* src/methods.cc: Revision of description for all methods
	with Patrick, Claudia, Cory or Mattias as author done.
	All *Scale and *SetConstant methods also revised.

	* src/m_montecarlo.cc (ScatteringMonteCarlo): Removed.  
	Has been deactivated for a long time.
	(MCSetIncomingEmpty): Removed.

	* src/m_ppath.cc (ZaSatOccultation): Removed.
	(VectorZtanToZaRefr1D): Variables for refraction now
	internal varaibles and not method output.

	* src/m_physics.cc (Tensor6ToPlanckBT): Removed. If needed,
	a new method using y_unit should be created.

	* src/m_basic_types.cc (Tensor3FillWithVector): Removed. A method now 
	not used.

	* src/m_ppath.cc (rte_pos_and_losFromTangentPressure): 
	Removed (Should be replaced by a general function. Worked
	only for 1D and no refraction, where the task can be solved
	in a more simpler way.).

	* src/m_refraction.cc (refr_indexFieldAndGradients): Removed.
	As not very useful!

2009-04-06  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-12-18

	* configure.in, config.h.cmake, CMakeLists.txt, src/main.cc:

	Use ctime instead of time.h.

	* src/agenda_class.{h,cc} (Agenda::find_unused_variables):
	
	Work in progress.

2009-04-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

        * arts-1-12-17

	* src/methods.cc: Revision of method starting with D-I. 

2009-04-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

        * arts-1-12-16

	* src/methods.cc: Started revision. Tried to obtain a relatively
	uniform style for the text (inside the file). Some different "patterns"
	were used. 
	
	I am presently looking at methods with me, Claudia or Cory as author.
	Revision of A-C ready.
	
	* src/m_cloudbox.cc (cloudboxSetEmpty): Renamed.
	(pnd_fieldZero): New name.

	* src/m_basic_types.cc (ArrayOfMatrixInsert): Removed.

2009-04-06  Stefan Buehler  <sbuehler(at)ltu.se>

        * arts-1-12-15

	* includes/amsu/amsub.backend.xml: Removed this file. It is no
	longer necessary, since this information is now given in
	amsub.backend_channel_response.xml. The file was a historic relic
	from the time when the instrument setup functions worked
	differently. 

2009-04-06  Patrick Eriksson  <patrick.eriksson@chalmers.se>

        * arts-1-12-14
	
	* includes/odin/linefile.SM_AC1e.xml: The data for the 556 GHz H2O
	line were not updated.

	Note that for the 556 GHz line, the "gamma values" for pressure
	broadening and the pressure shift variable are taken from
	Golubiatnikov et al., JQRST, 109, 1828, 2008. For the water vapour
	contimuum, the data are taken from Podobedov et al., JQSRT, 109,
	458, 2008. Other data are as for SMR operational processing. This
	including a 34% increase of nitrogen absorption following
	Boissoles et al., JQSRT, 82, 505, 2003.
	
2009-04-06  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-12-13

	* CMakeLists.txt:

	Add -Wshadow to make warning flags consistent with configure.

	* src/agenda_class.cc (Agenda::execute):

	Remove one unused ostringstream. Slipped through before because of the
	missing Wshadow flag for cmake compilation.

	* src/agenda_class.{h,cc} (Agenda::find_unused_variables):
	
	Work in progress.

2009-04-06  Stefan Buehler  <sbuehler(at)ltu.se>

        * arts-1-12-12

	* A cleanup of various more or less cosmetic bugs and issues
	around OpenMP. Finally fixed the annoying "disappearing output"
	bug. Also some slight performance improvements.  
	
	* OpenMP: Cleaned up all OMP loops. They now all have a clause
	"default(none)", so that all used variables have to be declared
	explicitly as either shared, firstprivate, or private. This should
	help to avoid bugs in future.

	* Report output: The << operators for outx now use a critical
	section to avoid that output from different threads is
	mixed. However, this works only for individual output operations,
	not if you build up a long output chain with several <<
	operators. In those cases, it is better to build up the output in
	a string stream, then write it to outx with a single operation. 

	* src/messages.h (Messages::Print): Use critical regions to avoid
	output from different threads being mixed.

	* src/m_batch.cc (ybatchCalc): OpenMP cleanup. Report output
	cleanup. Level 2 output of this function is now really nice. I use
	a job counter to see which fraction of the total job is already
	done, and this is displayed, along with the current index in the
	batch and the thread ID. Now you can really see what is going on! 

	* src/arts.cc (arts_exit): Report output cleanup. 

	* src/m_rte.cc (RteCalcMC, RteCalc): OpenMP cleanup.

	* src/interpolation_poly.cc (IMIN, IMAX): Added these two
	functions, which before were implemented as C pre-processor
	macros. The macros were not thread-safe, a bug that I discovered
	after rigorously using the "default(none)" clause on all parallel
	regions and loops.
	(gridpos_poly): OpenMP cleanup.

	* src/main.cc (main): Initialize the threadprivate in_main_agenda
	flag to true for all threads. This fixes the long-standing bug
	that some output disappeared in multi-threaded calculations.

	* src/m_scatrte.cc (ScatteringDoit): OpenMP cleanup.

	* src/m_abs_lookup.cc: OpenMP cleanup. Report output cleanup. 

	* src/agenda_class.cc (execute): Report output cleanup. 

	* src/messages.cc: Improved some comments.

	* src/absorption.cc (xsec_species): OpenMP cleanup.

	* src/m_abs.cc: Report output cleanup.  

	* src/m_atmosphere.cc (batch_atm_fields_compactFromArrayOfMatrix):
	OpenMP cleanup.

	* src/rte.cc (rte_step_std_clearsky): Changed type of input
	argument absorption from "const Vector&" to
	"ConstVectorView". This gives a 3% decrease in total runtime for
	an arts job with many frequencies.

	* src/gas_abs_lookup.cc (Extract): Some numerical
	optimizations. (Doing an explicit for loop, instead of using a
	temporary Vector.) Only a modest speed improvement (2%).

2009-04-06  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-12-11

	* configure.in: Add proper check for time support.

	* m_general.{cc,h}, main.cc:

	Use the new TIME_SUPPORT preprocessor flag.

	* CMakeLists.txt, config.h.cmake:

	Started to add proper feature checks.

2009-04-03  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-12-10

	* configure.in, CMakeLists.txt:

	Also add the binary name to COMPILER. Helpful information while
	testing compilation with different versions of the same compiler.

2009-04-03  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-12-9

	* src/Makefile.am, src/CMakeLists.txt:

	Don't link make_auto_md_h, make_auto_workspace_h, and make_auto_md_cc
	against version.cc. It's not needed there and triggers unnecessary
	rebuilds.

	* src/main.cc, src/version.cc:

	Display the modification time of the arts executable in -v instead of
	the compile time of version.cc which can be very misleading.

	* src/m_general.cc: Fix warning in non-POSIX compilation.

2009-04-03  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-12-8

	* CMakeLists.txt:

	Make sure the -Wno-unknown-pragmas is at the end of WARN_FLAGS.

2009-04-03  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-12-7

	* src/main.cc: Output the runtime before saying goodbye.

2009-04-03  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-12-6

	* configure.in, config.h.cmake, CMakeLists.txt:

	Add compiler name to config.h.

	* src/main.cc:

	Display the compiler in -v.

	Display the output of -v also in out2.

	* src/version.cc: Add compile timestamp to version number.

2009-04-02  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-12-5

	* src/CMakeLists.txt: And this one too....

2009-04-02  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-12-4

	* config.h.cmake: Forgot this in my last commit.

2009-04-02  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-12-3

	* src/montecarlo.cc (Cloudbox_ppathCalc):

	Comment out WriteXML to fix compilation with icc.

	* configure.in:

	Add 980 to diag-disable flag to work around a bug in the current Intel
	compiler version.

	* README.cmake, CMakeLists.txt, src/CMakeLists.txt:

	Add experimental, rudimentary support for cmake.

	* src/disort.h (dtauc_ssalbCalc): Add missing Workspace&.

	* src/m_disort.cc: Include cstring.

2009-03-31  Stefan Buehler  <sbuehler(at)ltu.se>

        * arts-1-12-2

	* src/m_batch.cc (ybatchCalc): Fixed bug in out2 output.

2009-03-30  Stefan Buehler  <sbuehler(at)ltu.se>

        * arts-1-12-1

	* New version number, due to controlfile changes.

	* WSM ybatchCalc: Added input variable ybatch_start, which can be
	used to start batch calculations somewhere in the middle of the
	batch. This is handy for testing, or if you want to split up a
	large batch into several calculations. Note that an alternative to
	this approach is to use the Select method to split up the batch
	cases themselves, before ybatchCalc is called.

	* This change should not break controlfiles for most users, since
	the newly introduced variable is set to a default in general.arts.

	* src/methods.cc (ybatchCalc): Updated.
	
	* src/m_batch.cc (ybatchCalc): Updated.
	
	* src/workspace.cc (ybatch_start): Added.
	
	* tests/AMSU/TestAMSU_generic.arts: No significant change.
	
	* doc/uguide/batch.tex: Updated chapter on batch calculations.
	
	* includes/general.arts (ybatch_start): Set to default value 0.

	* src/messages.h: Added flush to report file output, so that it is
	directly visible.

2009-03-24  Stefan Buehler  <sbuehler(at)ltu.se>

        * arts-1-11-51

	* includes/hirs/hirs_reference.arts: Replaced
	abs_lineshape_per_tgDefine by abs_lineshapeDefine, since we are
	now setting identical shape parameters for all species.

	* includes/hirs/hirs_fast.arts: Replaced
	abs_lineshape_per_tgDefine by abs_lineshapeDefine, since we are
	now setting identical shape parameters for all species. ATTENTION:
	In this file the cutoff was still 750e7 for species other than
	H2O, which was wrong!

	* src/m_abs.cc (abs_lines_per_speciesCompact): Bug fix: The case
	that abs_lineshape has only one element (which is then valid for
	all species) was not handled.

2009-03-06  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-11-50

	* src/Makefile.am:

	Rename libarts to libartscore.

	Move math_funcs.{cc,h} from libmatpack_a_SOURCES to
	libartscore_a_SOURCES. They're arts-specific and not used in
	matpack.

	Add math_funcs.{cc,h} to test_legendre_SOURCES and
	test_integration_SOURCES.

2009-02-19  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-11-49

	* src/xml_io.cc (xml_read_header_from_stream):

	Ignore whitespace at the beginning of XML files (in front of the
	'<?xml'). This makes the ARTS reading routine consistent with xmlLoad
	in atmlab.
	Bug reported by Ajil.

2009-02-18  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-11-48

	* src/m_scatrte.cc (ScatteringDoit):

	Pass the local copies ws and doit_mono_agenda to
	doit_mono_agendaExecute to unbreak OpenMP enabled builds.
	Bug reported by Claudia.

2009-02-10  Patrick Eriksson  <patrick.eriksson@chalmers.se>

        * arts-1-11-47

	* src/m_cloudbox.cc (pnd_fieldCalc): Removed two cout commands,
	appearently forgotten from some test.

2009-02-10  Stefan Buehler  <sbuehler(at)ltu.se>

        * arts-1-11-46

	* includes/hirs/hirs_reference.arts: Set lineshape cutoff value
	for all species to 750e9. The old version of this file had used a
	smaller value of 750e7 for all species except H2O. Test
	calculations by Ajil have shown that value to be too small.

	* includes/hirs/{*.f_grid_fast.xml,*.W_fast.xml}: Replaced these
	setup files for fast calculations by updated versions. The
	f_grid_fast files contain the frequencies selected by simulated
	annealing, the W_fast files the corresponding weights (determined
	by linear regression). This update was necessary because of the
	change in the lineshape cutoff frequencies for the reference
	calculations.
	
2009-02-06  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-11-45

	* src/m_extract.h: Change < to " for two non-system includes.

	* src/Makefile.am: Remove auto_workspace.h as a dependency from
	libmethods.a.
	
2009-01-08  Patrick Eriksson  <patrick.eriksson@chalmers.se>

        * arts-1-11-44
	
	* src/absorption.cc (LineRecord::ReadFromHitran2004Stream):
	Changed outpur level from out0 to out1 for warning: "Warning:
	HITRAN molecule number mo is not known to ARTS." An important
	warning, but disturbing to get this warning repeatedly and not
	possible to make arts totally quite.

	* src/workspace.cc: Removed ppath_array_do as it is now not used. 

2009-01-08  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-11-43

	* src/Makefile.am:

	Fix bug reported by Claudia. Some compiler versions require the
	library flags to come after the object files.

2009-01-07  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-11-42

	* src/methods_aux.cc (define_md_map):

	Only declare wsv_group_names in debug mode. It is only used inside an
	assertion.

2008-11-24  Stefan Buehler  <sbuehler(at)ltu.se>

	* src/check_input.{cc,h} (chk_interpolation_grids): Added this
	function. It checks if old and new grid for an interpolation are
	ok. If not, it throws a detailed runtime error message. This is
	intended for workspace method input variable checking. 
	There is also a separate function that can be used in the case
	that the new grid is just a scalar.

2008-11-21  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-11-41

	* src/methods.cc, src/workspace.cc:

	Update online docs for WriteXML and output_file_format.

2008-11-21  Stefan Buehler  <sbuehler(at)ltu.se>

        * arts-1-11-40

	* src/m_abs_lookup.cc (abs_lookupSetupBatch): Fixed bug reported
	by Isaac. For very high vertical resolution batch profiles the
	pressure window for averaging onto a common pressure grid was not
	sized correctly at the top.

2008-11-19  Stefan Buehler  <sbuehler(at)ltu.se>

        * arts-1-11-39

	* includes/hirs/hirs_fast.arts: This is now complete and verified
	to work. The criterion for my annealing method was to get RMS
	agreement better than 0.01 K between the fast and the reference
	calculations. I verified that the fast setup really achieves
	this. However, note that maximum errors are larger than RMS
	errors. In my verification run, the maximum error for this setup
	was below 0.05 K. (Tested for the Garand profiles, which were also
	used for grid optimization. Errors for another atmospheric data
	set may be higher.)
	What still remains to be done here is to enable selection of
	individual channels, right now you can only do all channels
	simultaneously. 
	The calculation uses around 150 frequencies in total for all
	channels. (Number varies from channel to channel.)
	Overall computation time (including lookup table generation) for
	the 42 Garand profiles on my computer is 1m30s.

	* includes/hirs/NOAA*_HIRS.f_grid_fast.xml: Added these files for
	all satellites. These are the frequency grids for fast calculation.
	
	* includes/hirs/NOAA*_HIRS.W_fast.xml: Added these files for
	all satellites. These are the pseudo-K weights for fast calculation.
	
	* tests/HIRS/TestHIRS.arts: Set to do a fast run with all channels.

	* src/matpackII.cc (operator =): Fixed bug here in the assignment
	operator. The cases that either the left or the right argument are
	not initialized have to be handled.

2008-11-17  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-38

	* doc/Makefile.am: Add index.html to EXTRA_DIST.

	* src/continua.cc: Doxygen fixes. Remove spaces at the end of lines.

	* .cproject: Better names for build targets.

	* .settings:

	Added Eclipse settings directory. Includes indentation rules and other
	project related setting.

2008-11-13  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-11-37

	* src/workspace.cc: Wrote text for ppath_transmissions.

	* src/agendas.cc: Now iy only output from iy_cloudbox_agenda. 

2008-11-12  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-36

	* First commit from inside Eclipse, hope it doesn't break anything...

	* src/nc_io_basic_types.cc, src/nc_io_array_types.cc,
	src/agenda_class.cc, src/absorption.h (LineRecord):

	Doxygen fixes.

	* doc/doxygen/Doxyfile.in: Updated.

	* .cproject, .project: Added Eclipse project files (only for testing).

2008-11-12  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-11-35

	* includes/hirs/hirs_fast.arts: Continued work on this one. 
	Not completed.

2008-11-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-11-34

	* src/agendas.cc: Revision of description of several agendas.

	* src/workspace.cc: Revision of description of many variables. Several
	variables "de-activated".

2008-11-10  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-33

	* Dummy commit to match my too early increased version number in
	configure.in.......

2008-11-10  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-32

	* src/agenda_class.cc (Agenda::execute):

	Fix bug reported by Patrick. Input WSVs to SetMethods were always
	considered initialized due to an erroneous if statement.

2008-11-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-11-31

	* tests/ClearSky/TestClearSky.arts: Nowincluding multiple
	frequencies and measurement blocks. To make tests of jacobians a
	bit more demanding. Pointing jacobian included.

	* src/m_jacobian.cc (jacobianAddPointing): Reintroduced and polished.

	(jacobianCalcPointing): Reintroduced, polished and partly rewritten.

	(jacobianCalcPolyfit): Now using polynomial_basis_func.

	* src/jacobian.cc (polynomial_basis_func): Created.

2008-11-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-30

	* src/methods.cc, src/workspace.cc: Updated templates.

2008-11-06  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-11-29

	* tests/ClearSky/TestClearSky.arts: Now analytical calculations also
	for temperature jacobians.

	* src/rte.cc (rte_std): There was a smaller error for gas species
	jacobians. The term for the transmission through the pstep of concern
	was lacking. Was supposed to be included in include_cumtrans_in_diy_dq,
	by turned out be better (for temperature jacobians) to include this
	term in here. Added code for higher stokes components.

	Derived expressions and included code for temperature jacobians. Works
	fine for case in TestClearksy.arts.

	Code for polarised absorption still lacking in both cases.

	* src/rte.cc (include_cumtrans_in_diy_dq): Wrote header.

	* src/m_rte.cc (RteCalc): Included some lacking code for
	temperature jacobians.

2008-11-05  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-11-28

	* tests/ClearSky/TestClearSky.arts: Added call of
	jacobianAddTemperature.

	* src/m_jacobian.cc (jacobianAddTemperature): Reintroduced and updated.
	(jacobianCalcTemperature): As above.

2008-11-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-27

	* Lots of casting fixes to make account for the stricter warning
	policy in gcc 4.3. Warnings are now issued for all implicit conversions
	that might lead to alteration of values. Like casting from Index to
	Numeric. The fix is to insert explicit castings in the corresponding
	places to show the compiler that we know what we're doing and are
	aware of the problem.

	* configure.in: Reenable -Werror for gcc 4.3.

	* src/math_funcs.cc, src/lineshapes.cc, src/legendre.cc,
	src/m_general.cc, src/m_scatrte.cc, src/m_abs_lookup.cc,
	src/m_jacobian.cc, src/m_montecarlo.cc, src/m_batch.cc,
	src/montecarlo.cc, src/ppath.cc, src/rng.cc, src/test_matpack.cc,
	src/test_integration.cc, src/matpackI.cc, src/methods_aux.cc,
	src/geomag_calc.cc, src/m_atmosphere.cc, src/interpolation.cc,
	src/binio.cc, src/gzstream.cc, src/main.cc, src/test_sparse.cc,
	src/test_tensor.cc, src/test_interpolation.cc, src/test_sorting.cc:

	Introduce explicit casts in several places.

	* src/lineshapes.cc:

	Add parenthesis in several places to make clear that + has precedence
	over the shift operator <<.

	* src/xml_io.cc (xml_set_stream_precision), src/methods_aux.cc,
	src/abs_species_tags.cc:

	Make variable 'precision' int instead of Index.

	* src/nc_io.{cc,h}: Add function nc_get_data_long.

	* src/nc_io_array_types.cc:

	Change dimension types from int to long to match the matpack
	dimensions.

	* src/absorption.cc: Changed type of nChar from Numeric to Index.

	* src/jacobian.cc (get_perturbation_limit):

	Make inc Numeric instead of Index as it's anyway only used if FP
	multiplications.

2008-10-28  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-26

	* configure.in:

	Do not only check for the existence of nc_open in libnetcdf, but
	also make a small test compile to see if the header file is correct.

2008-10-28  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-25

	* configure.in: Check explicitly for existance of nc_open.

2008-10-27  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-11-24

	* Could not compile with NetCDF! Oliver is contacted.

	* src/m_sensor.cc (sensor_responseBeamSwitching): Created. To handle
	ground-based beam switching (at least as performed at Onsala).

	* src/m_jacobian.cc (jacobianCalcPolyfit): Did not work properly.
	Now tested more in detail (for a single spectra case).

	* src/m_rte.cc (RteCalc): Unit for conversion for jacobian did not
	work for cases with more than 1 zenith angle.

	* src/rte.cc (apply_y_unit): Changed type of iy to MatrixView.

2008-10-27  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-23

	* src/matpackIV.{h,cc}: Add get_c_array for Tensor4.

	* src/methods.cc, nc_io_basic_types.cc:

	Add Tensor4 read/write support.

2008-10-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-22

	* src/agenda_class.cc (Agenda::set_outputs_to_push_and_dup):

	Make AgendaMap const. Fixes icc compilation.

2008-10-23  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-21

	* src/agenda_class.{h,cc}:

	Add new flag mchecked. It is set to false whenever the agenda is
	modified.

	(Agenda::check): Makes sure the methods in the agenda fulfill the
	input/output requirements and sets the mchecked flag to true.

	(Agenda::execute): Throw an error if the agenda hasn't been checked
	for consistency.

	(Agenda::append): Call AgendaAppend with proper input agenda name.

	* src/m_agenda.cc (AgendaSet):

	Use Agenda::check.

	(AgendaAppend):

	Make sure input and output agenda are the same.

	Use Agenda::check.

	* ChangeLog: Removed spurious config marker.

2008-10-23  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-11-20

	* src/m_jacobian.cc (jacobianCalcPolyfit): Bug when identifying
	polynomial coefficient to treat. Appears to work for single
	spectra. No testing yet for more complex cases (code is in place).

2008-10-22  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-11-19

	* src/m_jacobian.cc: Changes in several functions following
	changes and hints by Oliver. For example, variables now better
	initialised.

	(jacobianCalcPolyfit): Complete. But just simple tests so far.

2008-10-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-18

	* src/agenda_class.{h,cc} (Agenda::append):

	Change type of keywordvalue from String to TokVal to be able to pass
	other types instead of just strings.

2008-10-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-17

	* src/m_sensor.cc (f_gridFromSensorHIRS):

	Comment out unused local variable.

2008-10-22  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-11-16

	* src/m_sensor.cc (f_gridFromSensorHIRS): Fixed bug. The case that
	some channels may be completely inside other (broader) channels
	was not handled correctly. Completely redesigned the channel
	merging part to fix this. (Thanks Patrick, you were right about
	this one.)
	(test_and_merge_two_channels): Added this function, which does the
	work of comparing two channels, and merging them if necessary.

	* src/methods.cc (f_gridFromSensorHIRS): Changed default value for
	spacing to a more reasonable value (5e8), and updated documentation.

2008-10-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-15

	* src/agenda_class.cc (Agenda::execute):

	Add assertion firing when the agenda has no name. Indicates
	initialization problem.

2008-10-22  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-11-14

	* src/m_sensor.cc (sensorOff): Now also returning the grid
	variables (sensor_response_f_grid etc). Needed for setting up polyfit
	jacobian.

	* src/m_jacobian.cc (jacobianInit): jacobian_agenda now init and made
	empty.

	(jacobianCalcAbsSpecies): Code polished slightly and some comments
	added.
	(jacobianAddPolyfit): Re-introduced. Smaller updates.
	(jacobianCalcPolyfit): Re-introduced. Not finished.

2008-10-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-13

	* src/m_jacobian.cc (jacobianAddAbsSpecies):

	Make sure the jacobian_agenda is properly initialized, i.e. set its
	name.

	Add ws.

	* src/agenda.{h,cc} (Agenda::append):

	Utilize the AgendaAppend method to have proper in-/output checks.

	* src/methods.cc:

	Pass workspace to abs_speciesAdd2 and jacobianAddAbsSpecies.

	* src/m_agenda.cc (AgendaAppend):

	Refine the code to not mess up the string references to the agenda
	name.

	* src/m_abs_lookup.cc (abs_speciesAdd2): Add ws.

2008-10-20  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-11-12

	* src/m_jacobian.cc (jacobianCalcAbsSpecies): Now using
	jacobian_y_agenda.
	(yCalc): Removed this temporary solution.

	* src/agendas.cc: Added *jacobian_y_agenda*.

2008-10-20  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-11-11
	
	* src/m_jacobian.cc (yCalc): Dummy vector for sensor_response_aa
	was not sized properly.

	Added some size output for debugging.

2008-10-20  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-10

	* src/agenda_class.cc (Agenda::append):

	Properly add the inputs and outputs to the new MRecord. Attention:
	Works ONLY for methods WITHOUT generic input and output. One generic
	input parameter is allowed if the method is defined as a SETMETHOD in
	methods.cc.
	
	* src/methods.cc, src/m_agenda.cc:

	Added AgendaAppend. Can be used to append WSMs to an agenda.

	* src/agenda_class.h: Add helper function set_methods.

2008-10-17  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-9

	* configure.in: Removed cruft from beginning of file.

2008-10-17  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-11-8

	* src/m_jacobian.cc: Started revision of jacobians. Some cleaning
	of file and code. Add/calc methods for all quantities beside
	absorption species commented out. Will be re-introduced after
	update and testing. Right now something wrong in perturbation
	calculations.

	(jacobianAddPolyfit): Created but not tested. Non-active.
	(jacobianCalcPolyfit): Started. Not finished. Non-active.

	* src/m_rte.cc (RteCalc): Now using ABSSPECIES_MAINTAG.

	* src/constants.cc: Added ABSSPECIES_MAINTAG, in order to have a
	clear definition of jacobian tags.

	* tests/ClearSky/TestClearSky.arts: Polished and added some first
	jacobian calculations. 

	* src/m_jacobian.cc (jacobianUnit): Was de-activated. Activated and 
	changed as below.
	* src/m_batch.cc (ybatchUnit): As below.
	* src/m_rte.cc (yUnit): The function was not updated to use y_f
	instead of sensor:_response_f.

2008-10-17  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-11-7

	* includes/hirs/hirs_reference.arts: Major work on this. Now takes
	these input variables:
	# satellite   (String) 	     The name of the satellite. Is
	#                      	     used internally to construct
	#                      	     file names of the instrument
	#                      	     description files
	#                      	     f_backend_file and
	#                      	     backend_channel_response_file. 
	# channels    (ArrayOfIndex) Which channels you want.
	# views       (ArrayOfIndex) Which views you want.
	# hitran_file (String)       Name of HITRAN catalogue file.
	# f_grid_spacing (Numeric)   Frequency grid spacing.

	* includes/hirs/hirs.sensor_los.xml: Added. (Before, we still used
	the angles from AMSU.)

	* includes/hirs/hirs_fast.arts: Some editing also of this, but
	this is not finished!

	* tests/HIRS/TestHIRS.arts: Updated according to changes in
	hirs_reference.arts. 

	* src/m_append.h (Append): Added String implementation.
	
	* src/m_select.h (Select): Made all implementations safe to use
	with input and output as same variable. Added Matrix
	implementation. 

	* src/methods.cc (Append): Added implementation for type
	String. Updated documentation.
	(Select): Added implementation for type Matrix. Updated
	documentation. 

2008-10-16  Oliver Lemke  <olemke@core-dump.info>

	* 

2008-10-16  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-6

	* configure.in, src/nc_io.{h,cc}, src/nc_io_compound_types.cc,
	src/nc_io_basic_types.cc, src/nc_io_types.h, 

	Get rid of the C++ NetCDF interface and use the much better maintained
	C interface.

	* src/nc_io_array_types.cc:

	Implement support for ArrayOfVector and ArrayOfMatrix. The data is
	stored as one big vector along with the dimensions of each element.
	Not perfect but due to the non-existent support in NetCDF 3 for
	arrays of variable-sized types (and NetCDF 4 not ready for prime time),
	this is better than nothing.

	* src/nc_io.{h,cc}: Added a couple of helper functions.

	* src/parser.cc (ArtsParser::tasklist_insert_set_delete):

	Allow ArrayOfIndex literals.

	* src/methods_aux.cc (MdRecord::MdRecord):

	Added a proper check that makes sure that all supergeneric variables
	in one method are defined for the same number of types.

	* src/methods.cc:

	Define Read/WriteNetCDF only for supported types. There are not many
	so far and the supported types are then shown in the online docs.

2008-10-14  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-11-5

	* includes/odin/linefile.SM_AC2ab.xml: Set broadening and pressure
	shift variables for the 556.9 Ghz H2O line to match Golubiatnikov
	et al., JQSRT, 2008. Temperature exponenets from PWR98.
	Added (manually) 8 strong H2O transitions between 750 and 1250 GHz
	to include most important lines inside 25 cm-1.

	* includes/odin/linefile.SM_AC1e.xml: As above.

	* includes/odin/odinsmr.arts: Changed to H2O continuum parameters
	to follow Podobedov et al., JQSRT, 2008. Changed scaling factor
	for N2 from 1.00 to 1.34.

2008-10-10  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-11-4

	* includes/odin/odinsmr_501_1D.arts:
	* includes/odin/odinsmr_501.arts: 
	* includes/odin/odinsmr_544.arts: Adapted to changes below.

	* includes/odin/odinsmr_501_absorption.arts: Created. To have an include
	file just specifying absorption. Needed for Bengts calculations.

	* includes/odin/odinsmr_544_absorption.arts: As above.
	
2008-10-09  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-3

	* NetCDF reading and writing of Vector, Matrix, and Tensor3 types
	should be stable now.

	* src/nc_io.{h,cc}:

	Add function nc_read_var. It also checks for the right number of
	dimenstions and that the variable name matches the type.

	* src/nc_io_basic_types.cc: Use nc_read_var. Add Tensor3 support.

	* src/nc_io_compound_types.cc, src/nc_io_array_types.cc:

	Added. Only dummy functions.

	* src/Makefile.am:

	Added nc_io_compound_types.cc and nc_io_array_types.cc to
	libarts_a_SOURCES and EXTRA_DIST.

	* src/matpackIII.{h,cc}: Add get_c_array function for const objects.

	* src/m_nc.h: Remove debug spew.

	* configure.in:

	Add AM_PROG_CC_C_O. Required because we're compiling getopt.c with
	per-target flags.

2008-10-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-2

	* src/m_extract.h: Include matpackV.h to pass checks.

2008-10-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-1

	* Increased minor version number because the following Workspace
	methods have been merged into one:

	ArrayOfGField3ExtractFromArrayOfArrayOfGField3
	ArrayOfIndexExtractFromArrayOfArrayOfIndex
	GField4ExtractFromArrayOfGField4
	MatrixExtractFromArrayOfMatrix
	MatrixExtractFromTensor3
	NumericExtractFromVector
	Tensor3ExtractFromTensor4
	Tensor4ExtractFromTensor5
	Tensor4ExtractFromArrayOfTensor4

	all merged into supergeneric method 'Extract'

	* src/methods.cc:

	Removed the methods mentioned above and added Extract.

	* src/methods.h, src/methods_aux.cc:

	Changed MdRecord.ActualGroup from an Index to a String. The String
	contains for each implementation of a supergeneric method the list of
	groups passed to this instantiation of the method.

	Before, one group was enough because supergeneric WSMs always had the
	same input and output type. Now we have to make sure that the getaway
	function names are unique even if a WSM has several implementations
	with the same output type but different input types and vice versa.

	More tweaking of the online docs formatting.

	* src/src/make_auto_md_h.cc, src/make_auto_md_cc.cc:

	Changed ActualGroup to ActualGroups.

	* src/m_extract.h: Added.

	Collect all Extract method implementations here.

	* src/parser.cc:

	Tweak the generic input and output parsing to take into account that
	supergeneric inputs and outputs can have different types now.

	* src/m_batch.cc: Moved Extract method implementations to m_extract.

	* src/Makefile.am: Add m_extract.h to libarts_a_SOURCES.

	* src/make_auto_md_cc.cc: Include m_extract.h in auto_md.cc.

	* tests/AMSU/TestAMSU_generic.arts, tests/HIRS/TestHIRS.arts,
	tests/OdinSMR/TestOdinSMR.arts, tests/OdinSMR/TestOdinSMR_119ghz.arts,
	tests/OdinSMR/TestOdinSMR_1D.arts, tests/ClearSky/TestClearSky.arts:

	Renamed Extract methods.

2008-10-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-10-7

	* src/m_append.h, src/m_select.h:

	Remove obsolete catchall template functions.

	* src/methods.cc:

	Define Select and nelemGet for ArrayOf* and Vector only.

2008-10-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-10-6

	* src/methods_aux.cc (operator<<):

	Show either Any or a list of the valid types in the online
	documentation for supergeneric methods.

	Finetune the automatic line breaking.

	* src/methods.cc:

	Define a constant string ARRAY_GROUPS which contains all array types.
	It is quite common that a WSM takes all kinds of arrays as an input.

	WSM Append: Use ARRAY_GROUPS for GOUT_TYPE/GIN_TYPE.

	Include wsv_aux.h.

	* src/wsv_aux.h, src/group.cc (get_array_groups_as_string):

	Added function to return a string containing a comma-separated list of
	all array types.

	* src/Makefile.am:

	Move groups.cc and wsv_aux.h from libarts to libmethods.

	Add groups.cc to make_auto_md_h_SOURCES and make_auto_md_cc_SOURCES.

	* src/main.cc:

	Only output supergeneric methods that really can generate or use
	variables of the given group for 'arts -m|-i'.

2008-10-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-10-5

	* New feature: Supergeneric input / output can now be limited to
	certain variable groups. See nrowsGet, ncolsGet as an example.
	
	For WSMs that have Supergeneric input AND output, the number of types
	specified in GIN_TYPE and GOUT_TYPE for the supergeneric variable MUST
	be the same.

	* src/methods.cc:

	Limit supergeneric input for nrowsGet, ncolsGet.... to types that
	actually have these attributes.

	* src/methods.h:

	Added two ArrayOfArrayOfIndex to MdRecord that hold the valid variables
	groups if the WSM is not completely supergeneric but only defined for
	these types.

	* src/methods_aux.cc:

	Add support for specifying several types for GIN_TYPE and GOUT_TYPE.

	(subst_any_with_specific_group): Added.

	(expand_md_data_raw_to_md_data): Only partially expand supergeneric
	methods that are limited to certain types.

	* parser.cc (ArtsParser::parse_generic_input):

	Throw a runtime error if a supergeneric method is called with an
	unsupported type.

	* src/arts.h, src/wsv_aux.h:

	Moved function declarations for get_wsv_group_id from arts.h to
	wsv_aux.h.

	Added new function get_wsv_group_ids which parses a String with a list
	of wsv group names and returns an ArrayOfIndex with the group ids.

2008-10-03  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-10-4

	* src/m_sensor.cc (f_gridFromSensorHIRS): Made more tests to verify
	that the problem reported by Stefan is caused by numerical problems.
	Set the delta to 1 MHz.

	(f_gridFromSensorAMSU): Scaled value above and set delta here to 5 kHz.

2008-10-03  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-10-3

	* src/m_sensor.cc (f_gridFromSensorHIRS): Tested with delta = 0.0.
	Failed due to numerical problems. Changed to delta = 0.1 (that
	works for me).

	* includes/hirs/hirs_reference.arts: Removed definition of
	surface_prop_agenda.

	* tests/HIRS/TestHIRS.arts: Added definition of
	surface_prop_agenda, but is commented out. This to use the more
	efficient definition for blackbody surface in general.arts, and to
	have everything in one place of you want to use non-blackbody surface.

2008-10-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-10-2

	* configure.in: Forgot to change the version number in previous
	commit.

2008-10-02  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-10-1

	* Incremented minor version number because the following WSMs where
	renamed:

	ArrayOfGriddedField1Create -> ArrayOfGField1Create

	ArrayOfGriddedField3ExtractFromArrayOfArrayOfGriddedField3 ->
	  ArrayOfGField3ExtractFromArrayOfArrayOfGField3

	GriddedField4ExtractFromArrayOfGriddedField4 ->
	  GField4ExtractFromArrayOfGField4

	* src/methods.cc, src/constants.cc, src/m_batch.cc, src/m_create.cc,
	tests/AMSU/TestAMSUB_generic.arts, tests/HIRS/TestHIRS.arts,
	doc/uguide/clouds.tex, doc/uguide/atmosphere.tex:

	Replace all occurences of GriddedField by GField.

	* include/hirs/hirs_{fast,reference}.arts:

	WSM ArrayOfGriddedField1Create was renamed to ArrayOfGField1Create.

2008-10-02  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-9-38

	* src/special_interp.cc (interp_gfield3): Fixed several
	errors. Wrong storage order of grids was assumed.

	* src/methods.cc: Impreved description for
	InterpSurfaceEmissivityFieldIncLatLon.

2008-10-02  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-37

	* src/xml_io_compound_types.cc:

	Add dimension check to GField reading routines.

2008-10-01  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-9-36

	* src/m_surface.cc (InterpGriddedField3ToRteLosAndRtePos): Created.

	*src/m_create.cc (GField1Create) (GField2Create) (GField3Create) 
	(GField4Create): Created.

	* src/special_interp.cc (interp_gfield3): Created.

	* src/workspace.cc: Renamed surface_emissivity_field to
	surface_emissivity_DISORT. This as the variable is not flexible
	enough to merit the old name, and it is only used by DISORT.

	* tests/XXX/TestXXX.arts: Removed definition of
	surface_prop_agenda and iy_space_agenda where general.arts is used
	and settings same as in general.arts. Elsewhere added
	Ignore(rte_pos) in definition of surface_prop_agenda.

	* src/m_montecarlo.cc (MCGeneral): As below.
	(MCIPA): As below.

	* src/scatrte.cc (cloud_RT_surface): As below.

	* src/rte.cc (get_radiative_background): Adapted call of
	surface_prop_agenda.

	* src/agendas.cc: Added rte_pos as input to surface_prop_agenda. 

2008-10-01  Oliver Lemke  <olemke@core-dump.info>

	* configure.in: Added AM_PROG_CC_C_O as recommended by automake.

	* src/nc_io_array_types.cc, src/nc_io_compound_types.cc:

	Added.

	* src/Makefile.am:

	Added nc_io_array_types.cc and nc_io_compound_types.cc.

	* src/nc_io_basic_types.cc:

	Moved macros for compound and array dummy functions to the
	corresponding files.

	Implement Tensor3 reading/writing.

	* src/matpackIII.{h,cc}: Added get_c_array for const Tensor3.

2008-10-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-35

	* src/methods.cc:

	Added ReadNetCDF.

	Updated docs of Read/Write functions.

	* src/nc_io_basic_types.cc: Added reading routines for Vector/Matrix.

	* src/nc_io_types.h, src/nc_io_instantiation.h:

	Generate nc_read_from_file prototypes.

	* src/m_nc.h: Added ReadNetCDF functions.

	* src/nc_io.cc: Implement nc_read_from_file.

	* src/Makefile.am:

	Added netcdf sources to EXTRA_DIST. Otherwise the sources are missing
	in the distribution file if the computer which was used to build it
	didn't have NetCDF available.

2008-10-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-34

	* src/check-code-headers.sh:

	Add exception for nc_io_instantiation.h. Fixes make check in src.

2008-10-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-33

	* src/nc_io_instantiation.h: Added.

	* src/nc_io.{h,cc}: Moved templates from header to cc file.

	* src/m_nc.h: Include config.h.

	* src/matpackI.{h,cc}:

	Implement the get_c_array functions also for const objects.

	* src/nc_io_types.h: Fixes.

	* src/nc_io_basic_types.cc:

	Added first version of storing matrices in NetCDF.

2008-09-29  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-32

	* src/xml_io_types.h:

	Merged xml_io_basic_types.h, xml_io_compound_types.h, and
	xml_io_array_types.h into this file.

	* src/xml_io_basic_types.h, src/xml_io_compound_types.h,
	src/xml_io_array_types.h: Removed.

	* src/xml_io_basic_types.h, src/xml_io_compound_types.h,
	src/xml_io_array_types.h, src/xml_io_instantiation.h, src/xml_io.cc:

	Include new xml_io_types.h.

	* src/Makefile.am:

	Conditionally add NetCDF sources and libraries if available.

	* src/nc_io.{h,cc}, src/nc_io_types.h, src/nc_io_basic_types.cc:

	Added framework for NetCDF support.

	* src/make_auto_md_cc.cc

	Include m_nc.h.

	* src/main.cc:  Added NetCDF status to arts -v.

	* src/file.h: Cosmetics.

2008-09-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-31

	* src/methods_aux.cc (operator<<):

	Fix the order of GOUT / IN in the variable description list.

2008-09-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-30

	* tests/Makefile.am:

	Add a check-fast target for tests which should be checked before
	committing.

	Change order of dependency between TestAMSUB and TestAMSUB_fast.

	Move all tests except TestAMSUB from check to check-fast.

	* tests/testall.py:

	Move comparison between the results from TestAMSUB_fast to TestAMSUB.
	This way TestAMSUB_fast doesn't depend on TestAMSUB and we can run
	only TestAMSUB_fast in check-fast.

	* ChangeLog: Fix typo in previous log.

2008-09-25  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-9-29

	* includes/hirs/hirs_fast.arts: Added. Will be the standard HIRS
	setup for end users, with optimized frequency grid.
	
	* includes/hirs/hirs_reference.arts: Renamed from
	hirs.arts. Updated to file and variable name change
	(backend_channel_response). Added channels variable for channel
	selection. Added documentation at file start.

	* tests/HIRS/TestHIRS.arts: Updated to changed file and variable
	names. 

2008-09-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-28

	* tests/MonteCarlo/TestRteCalcMC.arts:

	Use a fixed number of photons instead of 4 sec calculation time. As
	the runtime is measured in real time, it could mean that only a few
	photons are calculated if the computer is under high load which leads
	to results being way off (and the test fails).

2008-09-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-27

	* includes/hirs/*sideband*.xml:

	Renamed to *backend_channel*. Also replace Sideband inside file with
	Backend channel.

2008-09-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-26

	* src/methods.h, src/methods_aux.cc:

	Instead of finding out the input only and input/output variables
	everytime they are needed, calculate them once in the constructor of
	MdRecord and cache them.

	* src/make_auto_md_{h,cc}.cc, src/agenda_class.cc, src/parser.cc:

	Adapt for changes in MdRecord.

2008-09-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-25

	* src/agenda_class.cc (Agenda::execute):

	Fix serious bug discovered by Patrick. Make sure variables used both
	as input and output are initialized.

	* src/parser.cc (ArtsParser::parse_generic_input):

	Instead of crashing, throw an error and tell the user to use Copy if
	a variable instead of a constant is passed to a Set method.

	* src/methods.h, src/methods_aux.cc:

	Added function to get a list of variables that are used both as input
	and output.

2008-09-23  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-24

	* src/methods.cc:

	Replace empty gin and gout names with generic names (gin1, gin2...).

	* src/methods.{h,cc}, src/methods_aux.cc:

	Add new two new fields (GIN_DESC and GOUT_DESC) to MdRecord. They
	contain a short description for each GIN and GOUT variable.

	* src/methods_aux.cc:

	Output GIN and GOUT descriptions in online help.

2008-09-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-23

	* doc/examples: Removed cruft.

	* configure.in: Removed doc/examples/{Makefile,data/Makefile}

	* doc/Makefile.am: Removed examples.

	* src/workspace.cc: Cosmetics.

2008-09-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-22

	* src/methods_aux.cc:

	Part One of the online help parameter documentation beautification.

	Pull the short description for each WSM's input/output variable from
	the WSV documentation and display it in the WSM's online help.

	Also change the way the variables' documentation is formatted in the
	WSM online help.

	Documentation for GIN/GOUT will follow in Part 2.

2008-09-22  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-9-21

	* tests/AMSU/TestAMSU_generic.arts: Removed lookup table accuracy
	test, to increase speed.

	* includes/hirs/hirs.arts: Cosmetics.

2008-09-22  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-9-20

	* includes/amsu/amsub_fast.arts: Missed to fix this test case.

2008-09-21  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-9-19

	* src/m_surface.cc: Forgot to make add on the file.

2008-09-21  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-9-18

	* src/m_surface.cc: Added this file and moved surface stuff from
	m_atmosphere to this file.
	(surfaceFlatRefractiveIndex): Replaces surfaceFlat. Using complex_n. 
	Dielectric models kicked out.
	(surfaceFlatSingleEmissivity): Replaces surfaceSimple. 
	surface_emissivity now generic input.
	(surfaceFlatVaryingEmissivity): New method.

	* src/workspace.cc: Introduced complex_n and t_surface. 
	Removed surface_emissivity. 

	* src/m_atmosphere.cc: Several methods moved to m_surface.

	* src/m_physics.cc (complex_nWaterLiebe93): Created this WSM (most
	code taken from old version of surfaceFlat). 

	* src_methods.cc: Suggestion to new header template.
	
2008-09-16  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-17

	* configure.in:

	Added netcdf check. (Lame commit mainly to test the new automated
	build server)

2008-09-16  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-16

	* tests/testall.py: 
	
	Fix assertion for MCGeneral test. Replace <4Q with <4dQ.

2008-09-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-9-15

	* tests/OdinSMR/TestOdinSMR_119ghz.arts: Missed to change back a
	setting after a test run.

2008-09-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-9-14

	* tests/OdinSMR/TestOdinSMR_119ghz.arts: Now including an antenna
	pattern response. A complete version. Aimimg at flexibility and
	accuracy. Not very fast.

2008-09-11  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-13

	* tests/testall.py: 
	
	Fix assertion for MCGeneralGaussian test. Replace <4Q with <4dQ.

2008-09-10  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-9-12

	* includes/odin/linefile.119ghz.xml: Created.

	* includes/odin/filterbank_response.xml: Created.

	* tests/OdinSMR/TestOdinSMR_119ghz.arts: Started. Antenna response is
	lacking.

2008-09-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-11
	
	* src/mystring.h, src/methods_aux.cc: Remove unused functions.

	* src/scatrte.cc, src/rte.cc, src/sensor.cc, src/gridded_fields.cc,
	src/xml_io_array_types.cc:

	Cleanup parameter lists in doxygen docs.

	* src/gas_abs_lookup.h, src/m_abs_lookup.cc:

	Renamed parameter al to abs_lookup.

	* doc/doxygen/Makefile.am: Send stdout cruft of doxytag to /dev/null.

2008-09-04  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-10
	
	* src/make_auto_md_h.cc:

	Make parameter documentation consistent with function declarations.

	If parameter names for GIn and GOut are defined in methods.cc, use
	them instead of generic names like genericinput1 or genericoutput2 for
	the WSM function parameters.

	* src/agenda_record.cc, src/disort.cc, src/montecarlo.cc,
	src/ppath.cc, src/refraction.cc, src/rte.cc, src/scatrte.cc,
	src/agenda_class.cc:

	Clean up doxygen docs.

	* doc/doxygen/Makefile.am:

	Don't send stdout of doxygen to /dev/null for now.

2008-09-04  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-9
	
	* configure.in, doc/doxygen/Doxyfile.in, doc/doxygen/latex,
	doc/doxygen/Makefile.am:

	Don't generate latex version of Doxygen docs anymore.

	* configure.in, doc/Makefile.am, doc/reference:

	Don't generate latex version of online docs anymore.

2008-09-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-8
	
	* src/methods_aux.cc (operator<<): Reduce line length to 68.

2008-09-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-7
	
	* src/methods_aux.cc (operator<<):

	Rework the online documentation formatting.

	(limit_line_length): Added helper function.

	* src/agenda_class.cc (Agenda::execute):

	Output method names for auto-generated Set and Delete methods to out3
	instead of out1.

	* tests/HIRS/TestHIRS.arts:

	Append .generated to output files so they get removed by make clean.

2008-09-03  Viju Oommen John  <viju.john@metoffice.gov.uk>

	* arts-1-9-6
	
        * tests/HIRS/TestHIRS.arts: Fine tuned.

        * tests/HIRS/garand_profiles.xml.gz: Added.

        * includes/hirs/hirs.arts: Tuned.

        * includes/continua.arts: Tuned.

2008-09-03  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-9-5

	* includes/amsu/amsub_fast.arts: Added. This is an AMSU-B setup
	with only two frequencies to represent each channel. The accuracy
	is 0.3 K in Channel 18, all others are better. This is intended
	for calculations with scattering, where we cannot afford to use
	many frequencies.

	* includes/amsu/amsub.f_grid_fast.xml: Input file for amsub_fast.arts.

	* includes/amsu/amsub.sensor_response_fast.xml: Input file for
	amsub_fast.arts. 

	* tests/AMSU/TestAMSUB_fast.arts: Added. Test for the new fast
	AMSUB setup file.

	* tests/testall.py (TestAMSUB_fast): Added test for the new fast
	AMSUB setup file.

	* tests/Makefile.am (TestAMSUB_fast): Added.

2008-09-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-4

	* src/exceptions.h: Remove UnexpectedKeyword exception.

	* src/parser.{cc,h}:

	Updated doxygen documentation.

	Rename parse_output_and_input to parse_method_args.

	Rename parse_input to parse_specific_input.

	Rename parse_output to parse_specific_output.
	
	(parse_generic_output): Split into method to make the code cleaner.

	(parse_generic_input): Split into method to make the code cleaner.

	(parse_method): Remove UnexpectedKeyword exception.

	(parse_method_args): Code cleanup.

2008-08-28  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-3

	* src/methods.cc, src/m_create.cc:

	Added ArrayOfGriddedField1Create.

2008-08-28  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-2

	* src/methods.cc, src/m_create.cc:

	Added ArrayOfVectorCreate.

2008-08-27  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-1
	
	* doc/reference/arts_methods_to_latex.sh:

	Fix for changes in arts online documentation output.

2008-08-27  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-0
	
	* ATTENTION: Backward-compatibility to the old controlfile syntax
	has been removed in this version!!!!!

	* Added a new supergeneric method Select which can be used to extract
	elements from a Vector or any Array by indexes:

	ArrayOfIndexCreate( aoi )
	ArrayOfIndexSet( aoi, [ 0, 2, 4 ] )
	ArrayOfStringCreate( s1 )
	ArrayOfStringSet( s1, [ "String1", "String2", "String3",
	                        "String4", "String5" ] )
	ArrayOfStringCreate( s2 )
	Select( s2, s1, aoi)

	s2 then contains [ "String1", "String3", "String5" ].

	* doc/uguide/agendas.tex:

	Change documentation for new controlfile format.

	* doc/uguide/clouds.tex, doc/uguide/ppath.tex,
	doc/uguide/scattering.tex, doc/uguide/sensor.tex,
	doc/uguide/concept.tex, doc/uguide/fm_definitions.tex,
	doc/uguide/absorption.tex, doc/uguide/batch.tex,
	doc/uguide/surface.tex, doc/uguide/clouds.tex

	Change keywords to generic inputs.

	Change examples to new controlfile style.

	* doc/uguide/montecarlo.tex:

	Rotate the flowchart by 90 degrees to make it fit on the page.

	* src/methods.{h,cc}, src/methods_aux.cc, src/make_auto_md_cc.cc,
	src/make_auto_md_h.cc

	Merge keywords with generic input.
	
	* src/parser.cc:

	Use the former keyword parsing code now for all generic inputs.

	All skipping of generic inputs at the end of the parameter list that
	have defaults defined.

	* src/agenda_class.cc (MRecord::print):

	Remove block for printing keywords.

	* src/m_xml.h:

	Adapt functions for changed number of arguments.

	* src/methods_aux.cc (operator<<):

	Removed unused variable separate_lines.

	* src/m_abs.cc (AbsInputFromRteScalars),
	src/m_jacobian.cc (jacobianUnit)

	Removed unused runtime_error variable.

	* src/methods.cc:

	Added new supergeneric WSM Select.

	Added new WSM ArrayOfIndexCreate.

	* src/m_create: Added ArrayOfIndexCreate.

	* src/m_select.h: Added implementation of WSM Select.

	* src/Makefile.am: Added m_select.h to libarts_a_SOURCES.

	* src/make_auto_md_cc.cc: Include m_select.h in auto_md.cc.

	* src/m_basic_types.cc: Added ArrayOfIndexSet.

2008-08-26  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-8-11
	
	* src/methods.cc (abs_lookupSetupWide): Added.

	* src/m_abs_lookup.cc (abs_lookupSetupBatch): Output also global
	min/max values for p, T, and H2O. This is handy as input for
	abs_lookupSetupWide.
	(abs_lookupSetupWide): Added first implementation of this. Does
	not yet work satisfactorily.
	(abs_lookupTestAccuracy): Continued work on this method. Fixed
	diverse bugs. Added test for total accuracy.

2008-08-25  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-8-10
	
	* src/m_abs_lookup.cc (calc_lookup_error): Added this new
	function. It does most of the work for abs_lookupTestAccuracy, in
	that it calls both lookup table extraction and LBL calculation for
	local atmospheric conditions.
	(abs_lookupTestAccuracy): Now simply loops over calc_lookup_error
	for different atmospheric conditions.

	* src/methods.cc (abs_lookupTestAccuracy): Updated. 

	* src/gas_abs_lookup.h (class GasAbsLookup): Declare both
	calc_lookup_error and abs_lookupTestAccuracy as friends.

	* src/interpolation_poly.cc (gridpos_poly): Parallelized main
	loop. 

	* src/workspace.cc (abs_cont_models): Fixed missing line break in
	documentation. 
	
2008-08-22  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-8-9
	
	* src/m_sensor.cc (f_gridFromSensorAMSU): Renamed this
	function. (Used to be just f_gridFromSensor). After Patrick's fix
	of the sideband grid, the margin can now be zero here.
	(f_gridFromSensorHIRS): Added this function, which does the same
	for a HIRS type instrument. There still is a problem with the
	width of the grid for sensor_responseBackend. I have to add a big
	margin to make it work.

	* includes/hirs/NOAA*_HIRS.sideband_response.xml: Corrected file format.

	* includes/hirs/NOAA*_HIRS.f_backend.xml: Corrected file format.

	* includes/hirs/TIROSN_HIRS.*: Ditto.

	* includes/hirs/hirs.arts: Added. Will contain standard sensor
	setup for HIRS when finished. Still requires adaption, some
	obvious ones marked by FIXME.

	* tests/HIRS/TestHIRS.arts: Added this directory and file, which
	contains a batch test for HIRS, similar to the one for AMSU. This
	is work in progress, not yet suitable for general use!
	
	* includes/amsu/amsub.arts: Adapted to name change of
	f_gridFromSensorAMSU. 

	* src/m_abs.cc (abs_scalar_gasCalcLBL): Removed unused parameter
	f_grid from AbsInputFromRteScalars call.

	* src/m_abs_lookup.cc (abs_lookupTestAccuracy): Removed unused
	variable n_species.

	* src/methods.cc (AbsInputFromRteScalars): Removed unused f_grid.
	(f_gridFromSensorAMSU): Renamed from f_gridFromSensor.
	(f_gridFromSensorHIRS): Added.

        * src/matpackI.{h,cc}: Commented in again assignment operators for
	Vector with parameter type Array<Numeric>. We commented this out a
	long time ago, because we wanted to split matpack from
	ARTS. However, that has never happened, and the function is handy.

2008-08-21  Viju Oommen John  <viju.john@metoffice.gov.uk>

	* arts-1-8-8
	
	* includes/hirs: Added this directory. Also, added frequency and 
	  spectral response functions for all HIRS instruments.

2008-08-20  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-8-7

	* Work on lookup table cleanup is still ongoing. This commit is
	mainly to have a backup of the state of my work. However,
	everything is working fine, so no problem to use this version for
	operational applications.

	* src/m_abs_lookup.cc (abs_lookupTestAccuracy): Added a first
	crude implementation of this. Will be refined in next commit. 

	* tests/AMSU/TestAMSU_generic.arts: Added the new
	abs_lookupTestAccuracy method.

	* src/m_abs.cc (AbsInputFromRteScalars): The reduction of the
	frequency grid was moved from this method to the new method
	f_gridSelectFIndex. 
	(f_gridSelectFIndex): Added.
	(abs_coefCalc, abs_coefCalcSaveMemory): Downgraded some output
	from out2 to out3.
	(abs_scalar_gasCalcLBL): Added this new method, which is a
	shortcut for:
	   f_gridSelectFIndex
  	   AbsInputFromRteScalars
  	   abs_h2oSet
  	   abs_coefCalc
  	   abs_scalar_gasFromAbsCoef

	* includes/general.arts (abs_scalar_gas_agenda): Replace the
	explicit list of methods in the agenda body by a call of
	abs_scalar_gasCalcLBL. 

	* src/gas_abs_lookup.cc (Extract): Update of doxygen
	documentation. 

	* src/methods.cc (AbsInputFromRteScalars, abs_lookupTestAccuracy):
	Modified.  
	(abs_scalar_gasCalcLBL, f_gridSelectFIndex): Added.
	
	* src/gas_abs_lookup.h (class GasAbsLookup): Added
	abs_lookupTestAccuracy as friend. (This will probably be modified
	again in my next commit.)

2008-08-20  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-8-6

	* includes/amsu/amsub.sideband_response.xml: Recreated this file. It 
	had been corrupted (some characters were missing)!

	* src/m_rte.cc (RteCalc): Added handling of y_pos and y_los.
	(RteCalcNoJacobian): As above.
	(RteCalcMC): As above.

	* src/m_jacobian.cc: Adapted call of RteCalcNoJacobian.

	* tests/OdinSMR/TestOdinSMR.arts: Replaced saving of y_za and y_aa with
	saving of y_pos and y_los.
	* tests/OdinSMR/TestOdinSMR_1D.arts: As above.

	* src/methods.cc: Replaced y_za and y_aa with y_pos and y_los. 
	Added that pnd field file shall have GField3 format.

	* src/workspace.cc: Replaced y_za and y_aa with y_pos and y_los.
	Replaced GriddedField with GField in variable descriptions.

2008-08-19  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-8-5

	* src/m_sensor.cc (f_gridFromSensor): Changed the size of margin
	to 0.001*spacing. I got it to work with no extra margin, but could
	maybe be safer to keep some margin. Will be discussed with Stefan
	through email.

	* includes/amsu/setup_input.m: Removed storage of f_grid. Now
	created dynamically again.

	Backend channel response now described to be perfectly
	rectangular.  The response outside covaered range is treated to be
	0 and in fact it has been possible all time to have a response >0
	at the end points. Adjusted range for sideband response definition
	correspondingly.

	All channels are now specified individually (e.g. lo frequency
	repeated for channels 18-20). This on request from Stefan. You now 
	select channels by standard numbering (that is, channels 16-20).
	
	* includes/amsu/amsub.f_grid.xml: Removed.
	
2008-08-14  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-8-4

	* src/m_scatrte.cc (ScatteringDoit): Parallelized this function. I
	have no good test case, unfortunately. Hope it is ok. 

	* src/m_abs_lookup.cc (abs_lookupSetupBatch): Fixed bug reported
	by Mathias. If all input profiles had zero H2O at some altitude,
	the reference profile was zero, leading to numerical problems. Now
	instead assign an ad-hoc value of 1-9 to the mean profile.

	* src/m_batch.cc (ybatchCalc_implementation): Cosmetics.

	* tests/DOIT/TestDOIT.arts: Cosmetics.

2008-08-13  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-8-3

	* The absorption lookup table should be again safe to use now. Let
	me know if you encounter any problems. With the new settings,
	accuracy is better than before, but lookup table size should be
	only a few percent of the original size.
	
	* includes/general.arts: Modified the default absorption
	interpolation settings. The new settings are:
	IndexSet( abs_p_interp_order,   5 )
	IndexSet( abs_t_interp_order,   7 )
	IndexSet( abs_nls_interp_order, 5 )

	* src/m_abs_lookup.cc (choose_abs_t_pert): Rewritten. Adjusts
	abs_t_pert to interpolation order.
	(choose_abs_nls_pert): Rewritten. Adjusts abs_nls_pert to
	interpolation order.
	(abs_lookupSetup): Added abs_p_interp_order.
	(abs_lookupSetupBatch): Added abs_p_interp_order. Do some
	smoothing of the reference profiles, according to the
	interpolation order in pressure. (Otherwise, sharp jumps in the
	reference profiles lead to numerical problems.)

	* src/methods.cc (abs_lookupSetup, abs_lookupSetupBatch): Added
	input variable *abs_p_interp_order*. Changed
	default values for grid steps. Defaults are now such that the
	pressure grid spacing is about 1 km. T and NLS spacing are set to
	very large values (100), so that in practice the interpolation
	order determines the spacing.
	(abs_lookupTestAccuracy): Added this new method, which will
	calculate and print out	the lookup table accuracy. The
	implementation of this method still has to be done, so far it is
	just an empty shell.

2008-08-13  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-8-2

	* src/methods.h, src/methods_aux.cc, src/agenda_class.{h,cc},
	src/make_auto_md_cc.cc, src/make_auto_md_h.cc,
	src/agenda_record.{h,cc}, src/m_agenda.cc, src/main.cc, src/parser.cc:

	Rename Output and Input to Out and In for consistency.

2008-08-12  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-8-1

	* Rearranged lots of stuff in methods.cc and dependent files to
	prepare for the merge of keywords with generic inputs.

	* src/methods.{h,cc}, src/methods_aux.cc:

	Rename GOUTPUT to GOUT_TYPE.

	Rename GINPUT to GIN_TYPE.

	Rename DEFAULTS to GIN_DEFAULT.

	Rename OUTPUT to OUT.

	Rename INPUT to IN.

	Change goutput to gouttype.

	Change ginput to gintype.

	Introduce gout which contains the generic output names.

	Introduce gin which contains the generic input names.

	* src/agenda_class.cc, src/parser.cc, src/make_auto_md_cc.cc,
	src/make_auto_md_h.cc, src/main.cc:

	Change GOutput to GOutType.
	Change GInput to GInType.

2008-08-12  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-8-0

	* Increased minor version number because this commit breaks
	controlfile compatibility. All Set methods behave consistently now.

	You have to make the following changes to your controlfiles:

	Replace VectorSet           by VectorSetConstant.
	Replace MatrixSet           by MatrixSetConstant.
	Replace Tensor[34567]Set    by Tensor[34567]SetConstant.
	Replace VectorSetExplicitly by VectorSet.

	* src/methods.cc, src/m_basic_types.cc:

	Rename VectorSet to VectorSetConstant and VectorSetExplicitly to
	VectorSet.

	MatrixSet -> MatrixSetConstant
	Tensor[34567]Set -> Tensor[34567]SetConstant

	* src/parser.cc:

	Remove special case where the SetExplicitly method was called for
	Vector instead of just the Set method like for other types.

	* includes/general.arts, includes/odin/odinsmr_544.arts,
	includes/odin/odinsmr_501.arts, includes/amsu/amsub.arts,
	includes/odin/odinsmr_501_1D.arts,
	tests/MonteCarlo/TestMonteCarloDataPrepare.arts,
	tests/MonteCarlo/TestRteCalcMC.arts,
	tests/OdinSMR/TestOdinSMR_1D.arts, tests/OdinSMR/TestOdinSMR.arts,
	tests/DOIT/TestDOIT.arts, tests/DISORT/TestDISORT.arts,
	tests/ClearSky/TestClearSky.arts, tests/Abs/TestAbs.arts,
	tests/AMSU/TestAMSU_generic.arts,

	VectorSet -> VectorSetConstant
	VectorSetExplicitly -> VectorSet
	MatrixSet -> MatrixSetConstant

2008-08-12  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-29

	* src/methods.{h,cc}, src/methods_aux.cc:

	For consistency, change order of output, input, goutput, ginput
	to output, goutput, input, ginput.

2008-08-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-28

	* src/xml_io_basic_types.h, src/xml_io_array_types.h,
	src/xml_io_compound_types.h:

	Use macros for function declarations.

2008-08-04  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-27

	* doc/reference/Makefile.am: Increase texcapacity to 25000.

	* src/m_append.h

	Include workspace_ng.h
	
	* src/m_copy.h, src/m_ignore.h, src/m_basic_types.h, src/xml.h:

	Include workspace_ng.h and agenda_class.h.

	* src/xml_io_array_types.h, src/xml_io_basic_types.h:

	Include xml_io_private.h for ArtsXMLTag.

2008-07-31  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-26

	* src/xml_io_instantiation.h: Fix typo in macro name.

	* ChangeLog: Fix typo in my previous commit.

2008-07-31  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-25

	* src/messages.cc:

	Fix compilation with icc. First define in_main_agenda and then include
	messages.h. i_m_a has to be initialized before being referenced
	anywhere else. As in_main_agenda is declared extern in messages.h, icc
	will otherwise throw the error: Threadprivate directive must
	lexically precede all references to any variables in its list.

2008-07-31  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-24

	* src/xml_io_instantiation.h:

	Use a macro to define the instantiations. Makes the file a lot more
	readable and shorter.

2008-07-31  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-23

	* src/make_auto_md_cc.cc, src/agenda_class.{h,cc} (Agenda::execute)

	Remove the agenda silent flag. It obsolete since arts-1-7-21.

	* src/agenda_record.{h,cc} (write_agenda_wrapper_header):

	Remove write_default_args and silent flag.

	* src/make_auto_md_h.cc:

	Adapt call of write_agenda_wrapper_header.

	* src/disort.cc, src/m_abs_lookup.cc, src/m_batch.cc,
	src/m_jacobian.cc, src/m_montecarlo.cc, src/m_scatrte.cc,
	src/montecarlo.cc, src/scatrte.cc:

	Remove silent flag from agendaExecute calls.

	* src/m_cloudbox.cc, src/m_atmosphere.cc, src/m_ppath.cc,
	src/ppath.cc, src/refraction.{h,cc}, src/rte.{h,cc},
	src/m_refraction.cc, src/m_rte.cc:

	Remove the agenda_verb and silent flags.

2008-07-30  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-22

	* The Workspace is no longer stored along with each agenda. Instead, a
	Workspace reference is passed to functions which need it (basically
	all functions that call agendas). This reference is then passed to
	each agendaExecute call because we only need one workspace per thread,
	not per agenda.

	* The parallized loops have been adapted to use OpenMP to create
	copies of the agendas and workspace were necessary. This saves some
	amount of copying. Before, we made a copy of each agenda for each
	iteration in parallized loops. Now, OpenMP will take care that only
	one copy per thread is made. And one thread is reused for several
	iterations inside the loop. E.g. if you have 4 CPUs and make a batch
	calculation over 1000 jobs, OpenMP will start 4 threads and each
	thread will calculate 250 iterations. If 4 agendas are called inside
	the loops we had to make 4000 agenda copies plus the workspace
	structure. Resulting in 8000 object copies.
	Now it is only 4 agenda copies + 1 workspace copy in front of the
	OpenMP loop (needed because OpenMP cannot make private thread copies
	of reference objects), and N*4 agenda copies + N Workspace copies
	(N=number of threads/CPUs) inside the loop. So, for a 4 CPU system
	this is 25 copies instead of 8000.
	Ok, this sounds much and will definitely save some memory and
	calculation time. But running 'make check' doesn't give any indication
	of a performance gain. Most likely because the jobs are rather short.
	Your mileage may vary with larger jobs.
	Note: When I speak of 'workspace copies' above I don't mean deep copies
	including all the variables. Only the book-keeping part of it is
	duplicated.

	* src/agenda_class.{h,cc}:

	Remove the workspace from the Agenda class. Instead pass it to
	Agenda::execute.

	Remove workspace get and set methods from Agenda class.

	* src/m_agenda.cc (Arts): Add workspace reference to parameters.

	* src/agenda_record.cc (write_agenda_wrapper_header):

	Add Workspace reference to agendaExecute methods.
	
	Remove safe_workspace flag.

	* src/make_auto_md_cc.cc (main):

	No local copy of input agenda in agendaExecute methods anymore.

	Pass the newly added workspace reference on to Agenda::Execute.

	* src/make_auto_md_cc.cc (main), src/make_auto_md_h.cc (main): 

	Pass Workspace to WSMs that have agendas as input or generic input.

	* src/main.cc: Pass workspace to Arts().

	* src/m_append.cc, src/m_copy.h, src/m_abs_lookup.cc, src/m_ignore.h,
	src/m_basic_types.h, src/m_general.{h,cc}, src/m_xml.h, src/m_disort.cc,
	src/disort.cc, src/m_batch.cc, src/m_rte.cc, src/m_montecarlo.cc,
	src/rte.{h,cc}, src/ppath.cc, src/m_cloudbox.cc, src/m_scatrte.cc,
	src/scatrte.{h,cc}, src/m_jacobian.cc, src/montecarlo.{h,cc},
	src/ppath.{h,cc}, src/m_ppath.cc, src/refraction.{h,cc},
	src/m_refraction.cc:

	Add Workspace reference as first argument to all WSMs and functions
	that have an agenda as an input parameter.

	Instead of making local copies of agendas inside parallel loops use
	the OMP firstprivate mechanism.

2008-07-29  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-7-21

	* src/messages{.h,.cc}: Complete redesign of the verbosity control
	mechanism. The -r command line flag now takes a 3-digit integer,
	where the first digit controls the verbosity of agenda
	output. Default is 010, i.e., all sub-agenda output is
	suppressed. (You will still see output from the main agenda,
	though.) This makes the silent flag to agenda_execute obsolete. At
	the moment the flag is still there, in order to avoid SVN
	conflicts with other ongoing work. When that is complete, the flag
	should be removed.

	* src/parameters.cc (get_parameters): Updated online help text to
	describe the new verbosity options.

	* src/main.cc: Adapted to redesign of the verbosity control
	mechanism.

	* src/agenda_class.cc (execute): Adapted to redesign of the
	verbosity control mechanism.

	* src/m_abs_lookup.cc,
	  src/m_rte.cc,
	  src/m_batch.cc: 
	We no longer need any special code to handle messages for parallel
	loop with agendas!

	* src/agenda_class.h: Added member main_agenda, plus associated
	member functions set_main_agenda() and get_main_agenda(). This can
	be used to decide whether the current agenda is the program main
	agenda, or a sub-agenda.

	* src/test_geomag_calc.cc (main): Commented out code dealing with
	message levels.

	* doc/uguide/concept.tex (section{Practical hints}): Restructured
	this section, and added a part about the verbosity settings.

2008-07-29  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-7-20

	* WARNING: This version does not compile with g++, due to a
	compiler bug. (It works fine with icc.) I am now working on a fix
	and will commit it today. I have to commit this version, even
	though it does not compile on all compilers, because I need a
	record of my work so far, before making further changes.

	* src/messages.cc: Adapted to changes in message
	level implementation.

	* src/main.cc (set_reporting_level): Adapted to changes in message
	level implementation.

	* src/m_rte.cc (RteCalc, RteCalcMC): Added artsmessages
	as copyin variable to parallel loop. 

	* src/m_batch.cc (ybatchCalc_implementation): Added artsmessages
	as copyin variable to parallel loop.

	* src/m_abs_lookup.cc (abs_fieldCalc): Added artsmessages as
	copyin variable to parallel loop.

	* src/agenda_class.cc (execute): Message level adjustment in
	agenda calls now uses threadprivate and copyin declarations for
	the global artsmessages variable. Eliminates the bug of lost
	output for parallel ARTS runs.

2008-07-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-19

	* It is now possible to pass WSVs as keywords!
	
	E.g.: StringCreate( outfile )
	      StringSet( outfile, "myoutputfile.xml" )
	      WriteXML( "ascii", ybatch, outfile )

	* src/methods.{h,cc}, src/methods_aux.cc:

	Add flag set_method to MdRecord. For Set methods the keyword is not
	stored as a workspace variable.

	* src/agenda_class.{h,cc}:

	Change mvalues to ArrayOfIndex. It no longer contains the keyword
	value but the Index to the WSV containing the keyword's value.

	Add msetvalue to MRecord. Contains the keyword value for Set methods.

	(append): Adapt for changes in keyword handling.

	* src/parser.{cc,h}:

	Use auto_vars for keywords.

	Change type of values from Array<TokVal> to ArrayOfIndex.

	Use ParseError instead of runtime_error in several places.

	(tasklist_insert_set_delete): Also pass mdd as argument.

	* make_auto_md_cd.cc:

	Adapt getaway functions to take the different handling of keywords
	into account.

2008-07-28  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-18

	* src/sensor.cc (antenna1d_matrix):

	Only define n_ar_aa in DEBUG mode to avoid warning in non-debug
	compiles.

	Add _U_ for antenna_dim parameter for same reason.

	(mixer_matrix): Only define nrp in DEBUG mode to avoid warning in
	non-debug compiles.

2008-07-28  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-17

	* src/arts_omp.cc (arts_omp_set_nested):

	Use _U_ to avoid unused parameter warning when compiling without
	OpenMP.

	Include config.h for _U_.

2008-07-25  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-7-16

	* src/gas_abs_lookup.h: (Re)introduced the lookup table member
	variable log_p_grid. It is not stored with the lookup table, but
	set by abs_lookupAdapt.

	* src/gas_abs_lookup.cc (Adapt): Also set log_p_grid.
	(Extract): Added runtime error check to make sure that log_p_grid
	is set. Do the pressure interpolation with log_p_grid and log(p),
	instead of p_grid and p.

	* src/m_abs_lookup.cc (abs_lookupCreate): Also set log_p_grid. 

	* tests/testall.py (TestAMSUB.test2): Relax the condition for
	agreement from .01 K to .02 K.

	* src: Set ignore property for auto_workspace.h and
	make_auto_workspace.
	
2008-07-25  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-7-15

	* src/gas_abs_lookup.cc (Extract): No longer interpolate the
	reference T and H2O profiles. That approach is not compatible with
	higher order p interpolation. We use the true T_ref and H2O_ref
	for the level now for interpolation at all involved pressure
	levels.

2008-07-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-14

	* src/parser.cc (tasklist_insert_set_delete):

	Add support for Vector constants.

	Use SetVectorExplicitly to set the auto variable instead of SetVector.

	(read_name_or_value):

	Fix if statements.

	Throw runtime_error for unsupported parameter types instead of cerr +
	arts_exit.

2008-07-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-13

	* src/methods_aux.cc (operator<<):

	Output correct type for keywords in online help.

2008-07-23  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-7-12

	* src/absorption.cc (xsec_species): Parallelized the loop over
	pressure. This speeds things up in case that abs_lookupCreate does
	not do temperature perturbations. Also should help for on-the-fly
	simulations, of course.

	* src/m_abs_lookup.cc (abs_lookupCreate): 

	1. Clarified documentation about use of a private statement in omp
	parallel regions. Private variables are not initialized inside the
	parallel region, so they should be initialized at the beginning.

	2. Enable nested parallel execution, in case there are no
	temperature perturbations. This is necessary in order to benefit
	from the now parallelized line-by-line code in xsec_species.
	
	* src/arts_omp{h,.cc} (arts_omp_get_nested): Added.
	(arts_omp_set_nested): Added.
	
	* src/gas_abs_lookup.h: Only cosmetics.

2008-07-23  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-11

	* src/groups.cc:
	
	(define_valid_keyword_groups):

	Define a list of valid groups for keywords.

	(is_valid_keyword_group): Check if given group is a keyword group.

	* src/methods_aux.cc:

	Check if the groups for keywords are valid.

	* arts.h: Temporarely add declaration of is_valid_keyword_group.

2008-07-23  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-10

	* src/methods.cc: Changes TYPES to String array.

	* src/methods.h, src/methods_aux.cc

	Change mtypes from Array<TokVal> to ArrayOfIndex. In preparation of
	treating keywords like generic inputs.

	* src/make_auto_md_h.cc:
	
	Don't include token.h.

	Use wsv_group_names instead of TokValTypeName.

	* src/make_auto_md_cc.cc: Don't include token.h.

	* src/parser.cc:

	Use group ids for keyword types instead of TokValType.

2008-07-23  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-9

	* src/make_auto_wsv_groups_h.cc: Renamed to make_auto_workspace_h.cc

	* src/make_auto_workspace_h.cc: Don't generate WsvP anymore.

	* src/Makefile.am, src/workspace_ng.cc:
	
	auto_wsv_groups -> auto_workspace.

2008-07-23  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-8

	* Continuing migration from enums to Strings. Now replacing all enum
	values for WSVs in methods.cc by Strings.

	* src/methods.cc: Make OUTPUT and INPUT String arrays.

	* src/methods.h, src/methods_aux.cc:

	Change output and input to string arrays in constructor of MdRecord.

	* src/make_auto_md_h.cc, src/make_auto_md_cc.cc, src/main.cc (main):

	Call define_wsv_data before define_md_data_raw.

	* src/agendas.cc, src/agenda_class.cc, src/globals2.cc, src/methods.cc:

	Remove auto_wsv.h from includes.

	* src/Makefile.am, src/make_auto_wsv_h.cc:

	Bye Bye auto_wsv.h. Not needed anymore.

	Added make_auto_wsv_h to CLEANFILES for now.

	* src/make_auto_md_h.cc, src/make_auto_md_cc.cc:

	Remove auto_wsv.h from includes.

	Add include files to generated source that were previously pulled in
	by auto_wsv.h.

	* src/montecarlo.cc: Include mc_interp.h.

	* src/workspace_ng.h: Fix typo in doc.

	* src/workspace.cc (get_wsv_id):

	Use WsvMap instead of a while loop to find the WSV indexes.

	* src/groups.cc (get_wsv_group_id):

	Add a WsvGroupMap along with define_wsv_group_map.

	Use WsvGroupMap instead of a while loop to find the group indexes.

	* src/parser_old.{h,cc}: Removed.

2008-07-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-7

	* Continuing migration from enums to Strings. Now replacing all enum
	values for WSVs in agendas.cc by Strings.

	* src/agendas.cc: Make OUTPUT and INPUT String arrays.

	* src/workspace.cc, src/arts.h: Added get_wsv_id.

	* src/agenda_record.{cc,h}:

	Replace output and input with String array in constructor and map WSV
	names to ids.

	* src/methods_aux.cc (MdRecord::MdRecord): Remove spurious spaces.

2008-07-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-6

	* Replacing the enum values for groups in methods.cc by Strings.

	* methods.{h,cc}, methods_aux.cc:

	Change GINPUT and GOUTPUT to String arrays.

	Map the strings to group index in the MdRecord constructor.

	(define_md_data_raw):

	Call define_wsv_group_names here because we have a strict dependency
	on the group names now.

	* src/workspace.cc:

	Change GROUP to String.

	Don't include auto_wsv_groups.h anymore.

	* src/wsv_aux.h:

	Added constructor that takes the Group name as a String and maps it to
	the group index.

	Don't include auto_wsv_groups.h anymore.

	Include exceptions.h

	* src/groups.cc (get_wsv_group_id): Added. Finds group id by name.

	* src/main.cc, src/parser.cc, src/methods_aux.cc,
	src/agenda_record.cc, src/make_auto_md_cc.cc:

	Use new function get_wsv_group_id.

	* src/agenda_record.cc, src/m_agenda.cc: Include messages.h.

	* src/methods.cc, src/globals2.cc:

	Don't include auto_wsv_groups.h anymore.

	* src/methods_aux.cc: Don't include auto_wsv.h anymore.

	* src/make_auto_md_cc.cc:

	Don't include auto_wsv_groups.h in generated source anymore.

	* src/make_auto_wsv_h.cc (main):

	Call define_wsv_group_names before Workspace::define_wsv_data.
	
	* src/make_auto_wsv_groups_h.cc (main):

	Remove N_WSV_GROUPS and WsvGroup from generated source.

	* src/main.cc (main):

	Call define_wsv_group_names before define_md_data_raw.

	* src/make_auto_md_{h,cc}.cc:

	Call define_wsv_group_names before define_md_data_raw.

	Catch runtime_error instead of exception to get proper error message
	output.

	* src/main.cc (check_built_headers): Removed unused function.

	* src/arts.h: Add prototype for get_wsv_group_id.

2008-07-22  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-7-5

	* src/gas_abs_lookup{.cc,h} (Extract): Added input variable
	p_interp_order for pressure interpolation order. Rearranged order
	of input variables.

	* src/m_abs_lookup.cc: Adapted to new p_interp_order WSV and to new
	order of interpolation order parameters in some method calls.

	* src/methods.cc: Adapted to new p_interp_order WSV and to new
	order of interpolation order parameters in some method calls.
	(ForLoop): Added this new method, which can be used to implement
	simple control file loops.

	* includes/general.arts: Added default for abs_p_interp_order.

	* src/workspace.cc (abs_p_interp_order): Added.
	(for_loop_agenda): Added.
	(for_loop_index): Added.

	* src/agendas.cc (forloop_agenda): Added this new agenda. It can
	hold the loop body for the ForLoop method.

	* src/m_batch.cc (ForLoop): Added this new method.

	* src/m_abs.cc: Removed unnecessary include of auto_wsv.h.

2008-07-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-4

	* src/m_abs_lookup.cc (abs_lookupSetup):

	Quick fix to make arts compile again. Renamed keyword argument
	p_step->p_step10.

2008-07-21  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-7-3

	* Warning: I am working on the absorption lookup table. Stay away
	from the 1-7-x versions for operational use, since numerical
	values for absorption calculation may change slightly between
	subversions.

	* src/methods.cc(abs_lookupSetup, abs_lookupSetupBatch): Keyword
	p_step now has to be given in log10([Pa]), instead of the natural
	log. This was requested by Patrick. Adjusted default value accordingly.

	* src/m_abs_lookup.cc (abs_lookupSetup, abs_lookupSetupBatch):
	Adjusted to the new input unit. Internally still uses the natural
	log. 

2008-07-18  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-7-2

	* src/m_abs_lookup.cc (choose_abs_nls_pert): Fixed bug in
	preliminary implementation here.

2008-07-18  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-7-1

	* src/m_sensor.cc (f_gridFromSensor): Add some margin around the
	actual band frequency borders, in order to avoid numerical problem
	in sensor WSMs. The margin added is 1% of the requested frequency
	grid spacing.

	* includes/amsu/amsub.arts: Now uses f_gridFromSensor.

2008-07-18  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-0

	* Increase minor version number because the previous change breaks
	controlfile compatibility.

2008-07-18  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-46

	* src/parser.cc:

	Don't create unknown output variables implicitly anymore. This can
	create serious headaches if typos in WSV names occur. Instead, the
	user has to create the variable before using it.

	* src/m_create.cc: Added.

	* src/src/m_basic_types.cc: Move TYPECreate WSMs to m_create.cc.

	* src/Makefile.am: Added m_create.cc to libarts_a_SOURCES.

	* src/methods.cc:

	Added ArrayOfLineRecordCreate and ArrayOfLineshapeSpecCreate.

	* tests/DOIT/TestDOIT.arts, tests/OdinSMR/TestOdinSMR.arts
	includes/amsu/amsub.arts, includes/odin/odinsmr_501_1D.arts:

	Insert Create WSMs where needed.

2008-07-17  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-6-45

	* src/methods.cc (f_gridFromSensor): Reintroduced this method.

	* src/m_sensor.cc (f_gridFromSensor): Adapted to new sensor
	variables. There still is a strange numerical problem, the
	auto-generated grid does not work, even though it is practically
	identical to the previous one.

	* includes/amsu/amsub.arts: Playing with f_gridFromSensor.

2008-07-17  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-6-44

	* src/methods.cc (abs_lookupSetup, abs_lookupSetupBatch): Added
	the new WSVs abs_nls_interp_order and abs_t_interp_order. Setup
	functions now make sure that there are enough grid points for the
	chosen interpolation order.

	* src/m_abs_lookup.cc (choose_abs_t_pert, choose_abs_nls_pert)
	(abs_lookupSetup, abs_lookupSetupBatch): Adapted to the new WSVs
	abs_nls_interp_order and abs_t_interp_order. Main changes are in
	the choose functions. This is likely to be adapted further after
	thorough testing with Chevallier data.

	* tests/ClearSky/TestClearSky.arts: Only comment changes.

	* tests/AMSU/TestAMSU_generic.arts: Only comment changes.

2008-07-17  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-43

	* tests/MonteCarlo/TestMonteCarloGeneralGaussian.arts,
	tests/DOIT/TestDOIT.arts:

	Converted to Arts2 syntax.

	* tests/DOIT/TestDOIT2.arts: Removed.

	* tests/MonteCarlo/TestRteCalcMC.arts: general -> general.arts

2008-07-16  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-42

	* tests/MonteCarlo/TestMonteCarloDataPrepare.arts,
	tests/MonteCarlo/TestMonteCarloGeneral.arts:

	Converted to Arts2 syntax.

	* tests/Abs/TestAbs.arts:

	Replace "general" by "general.arts".

	* tests/ClearSky/TestClearSky.arts:

	Remove arguments from abs_lookupSetup (uses only defaults).

	Replace "general" by "general.arts".

2008-07-16  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-41

	* src/parser.{cc,h}: 

	Fix a regression in the parser for Arts2 syntax. With the old syntax
	it was possible to skip all arguments of a WSM even if it had keywords
	(if all keywords had default values defined). This was not working with
	the new syntax.

	* tests/AMSU/TestAMSU_generic.arts:

	Take fix into account.

2008-07-16  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-6-40

	* You can now choose the interpolation orders for the absorption
	lookup table. For now, the recommended (and default) value is 4
	for both interpolations (T and H2O).
	
	* src/methods.cc (abs_scalar_gasExtractFromLookup): Added new
	input variables abs_nls_interp_order and abs_t_interp_order.

	* src/m_abs_lookup.cc (abs_scalar_gasExtractFromLookup): Added new
	input variables abs_nls_interp_order and abs_t_interp_order.

	* src/gas_abs_lookup{.cc,h} (Extract): Added new input variables
	for the H2O and temperature interpolation order.

	* includes/general.arts: Added default values of 4 for the new
	input variables abs_nls_interp_order and abs_t_interp_order.

	* tests/DOIT/TestDOIT.arts: Replace "general" by
	"general.arts". Works also without extension, but kept it for
	consistency. 

2008-07-16  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-39

	* includes/amsub.arts, tests/AMSU/TestAMSUA.arts,
	tests/AMSU/TestAMSUB.arts, tests/AMSU/TestAMSU_generic.arts:

	Converted to Arts2 syntax.

2008-07-16  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-38

	* includes/continua.arts, includes/general.arts:

	Converted to Arts2 syntax.

2008-07-15  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-6-37

	* src/workspace.cc (abs_nls_interp_order, abs_t_interp_order):
	Introduced these new WSVs.

	* includes/general.arts: Set default values of 4 for
	abs_nls_interp_order and abs_t_interp_order.

2008-07-04  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-6-36

	* Missed to compile all test files. test_sensor.cc did not compile
	as variables used been removed. The complete test removed. 

	* src/test_sensor.cc: Removed. Obsolete. Sensor parts now better checked
	with Odin and other similar tests.
	
	* src/Makefile.am: Removed test_sensor parts.  

2008-07-04  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-6-35

	* includes/amsu/amsub.arts: Removed _NEW from variable and method
	names in all control files.

	* tests/OdinSMR: Removed _NEW from variable and method names in all
	control files.

	* includes/odin: Removed _NEW from variable and method names in all
	control files.

	* tests/MonteCarlo: Updated control files to changes below. 

	* tests/MonteCarlo/antenna.SM_AC2ab.875ms.xml: Copied from Odin
	include folder. Set the frequency to 230e9. There must now be a
	perfect match if the arts run involves a single frequency and the
	antenna pattern is only given for a single frequency.

	* src/m_montecarlo.cc (MCGeneral): std_err, max_time, max_iter and
	z_field_is_1D are now WSVs, not keyword arguments.  This to avoid
	very long argument lists for MC methods (in arts2 control file
	format).
	(MCIPA): As above.

	* src/m_sensor.cc: File removed from now obselete functions. _NEW
	removed from new methods.
	
	* src/sensor.cc: File removed from now obselete functions. _NEW
	removed from new methods.

	* src/check_input.cc (chk_y_with_sensor): Removed. 

	* src/m_physics.cc
	(VectorToPlanckBT, VectorToRJBT, MatrixToPlanckBT, MatrixToRJBT):
	Removed.
	The task of these functions can be performed by yUnit, ybatchUnit
	and jacobianUnit.

	* src/m_jacobian.cc (jacobianUnit): Now calling ybatchUnit instead 
	of MatrixToPlanck etc.
	(yCalc): Fixed call of RteCalcNoJacobian.
	
	* src/m_batch.cc (ybatchUnit): Created. Matches yUnit.

	* src/m_rte.cc (yUnit): Now only using sensor_response_f as sensor
	aux input. 
	(RteCalcNoJacobian): Now using new version of RteCalc.
	(RteCalc): Replaced by temporary _NEW version. 
	(RteCalcMC): Updated following new WSV.
	
	* src/workspace.cc: Old sensor variables removed. _NEW removed
	from new variables. Introduced: 
	   mc_std_err
	   mc_max_time,
	   mc_max_iter 
	   mc_z_field_is_1D

2008-07-03  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-6-34

	* AMSU-B test case updated to new sensor part. Difference to when
	old methods used is below 6e-6 K.
	
	* includes/amsu/amsub.arts: Now uses new sensor implementation.
	All input created by a matlab function: setup_input.m. f_grid
	not created on-the-fly. Old grid hard coded in setup_input.m.
	Will be fixed.

	* src/m_sensor.cc (sensor_responseBackend_NEW): One check was
	incorrectly implemented.
	(sensor_responseMultiMixerBackend_NEW): Created. Totally new
	implementation of this method.
 
2008-07-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-33

	* src/gridded_fields.h, src/xml_io_instantiation.h,
	src/xml_io_array_types.{cc,h}:
	
	Added ArrayOfArrayOfGField1.

2008-07-03  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-6-32

	* Odin test cases updated to new data formats. All test cases
	run (after some small bug fixes) with results that look OK. The
	standard 501 case compared to older version with results inside
	0.01 K (new version probably better).

2008-07-02  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-6-31

	* src/m_sensor.cc (sensor_responseBackend_NEW): backend_channel_response
	now an ArrayOfGField1.
	(sensor_responseMixer_NEW): sideband_response now a GField1.
	These functions run with the Odin test case with result that look OK.
	
	* src/sensor.cc (spectrometer_matrix_NEW): ch_response now an
	ArrayOfGField1.
	(mixer_matrix_NEW): filter now a GField1.

	* src/workspace.cc: Changed type for backend_channel_response and
	sideband_response, and changed description accordingly. Had to
	introduce backend_channel_response_NEW.

	* includes/odin/setup_input.m: Sideband filter and backend channel
	responses now stored as (ArrayOf)GriddedField1.

	* src/constants.cc: Added GFIELD1_F_GRID (though value is obvious).

	* src/groups.cc (define_wsv_group_names): Added GField1, GField2,
	ArrayOfGField1 and ArrayOfGField2.

2008-07-02  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-30

	* src/xml_io_instantiation.h:

	Add prototypes for xml_read_from_file and xml_write_to_file for
	GField1 and GField2.

2008-07-02  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-6-29

	* src/sensor.cc (antenna1d_matrix_NEW): Function created. Complete
	and compiles, but not tested.
	Some polishing of other "new" functions.

	* src/m_general.cc: Removed #include "sensor.h".

	* src/m_sensor.cc (sensor_responseAntenna_NEW): Added even more checks.
	Calls now antenna1d_matrix_NEW. 

	* src/workspace.cc: Corrected description of dimension order of
	antenna_response_NEW.

2008-07-02  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-28

	* src/gridded_fields.h: Added ArrayOfGField1 and ArrayOfGField2.

	* src/xml_io_instantiation.h, src/xml_io_array_types.{cc,h}:

	Added read/write support for ArrayOfGField1 and ArrayOfGField2.

	* src/xml_io_instantiation.h, src/xml_io_compound_types.{cc,h}:

	Added read/write support for GField1 and GField2.

2008-07-01  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-6-27

	* src/constants.cc: Added constants for GField4 frequency, pol, za
	and aa grids.

	* src/m_sensor.cc (sensor_responseAntenna_NEW): Created. The function
	consists mainly of lengthy input checks. Core function is lacking.

	Some polishing of other functions.

	* src/workspace.cc: sensor_pol_NEW was set to be a vector, instead of
	matrix. Defined (in detail) antenna_response_NEW.

2008-07-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-26

	* src/gridded_fields.cc:

	(GField::get_string_grid,GField::get_numeric_grid):

	Output the field name if present in the runtime error message.

2008-06-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-25

	* Removing the last remainders of the old GriddedFields.

	* src/gridded_fields.{h,cc}:

	Remove implementation of the old GriddedFields.

	* src/m_basic_types.h:

	Remove NGET_GENERIC for ArrayOfGriddedField3 and ArrayOfGriddedField4.

	* src/m_sensor.cc (sensor_responseAntenna_NEW):

	Change aresponse to ArrayOfGField3.

	* src/gridded_fields.{cc,h}:

	Add non-const version for get_numeric_grid.

2008-06-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-24

	* src/workspace.cc

	Change antenna_response_NEW to ArrayOfGField3.

	* src/groups.cc:

	Remove ArrayOfGriddedField3, ArrayOfArrayOfGriddedField3, and
	ArrayOfGriddedField4.

	* src/xml_io_instantiation.h, src/xml_io_compound_types.{cc,h}

	Remove read/write routines for GriddedField3 and GriddedField4.

	* src/xml_io_instantiation.h, src/xml_io_array_types.{cc,h}

	Remove read/write routines for ArrayOfArrayOfGriddedField3,
	ArrayOfGriddedField3, and ArrayOfGriddedField4.

2008-06-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-23

	* src/methods.cc, src/m_batch.cc

	Change ArrayOfGriddedField3ExtractFromArrayOfArrayOfGriddedField3 to
	use GField3.

	* src/groups.cc:

	Added ArrayOfArrayOfGField3.

2008-06-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-22

	* src/workspace.cc, src/methods.cc, src/m_atmosphere.cc

	Change atm_fields_compact to GField4 and batch_atm_fields_compact to
	ArrayOfGField4.

	* src/methods.cc, src/m_batch.cc
	(GriddedField4ExtractFromArrayOfGriddedField4):

	Change m to GField4.

	* src/m_abs_lookup.cc (abs_lookupSetupBatch):

	Change batch_fields to ArrayOfGField4.

	* src/groups.cc: Add GField4 and ArrayOfGField4.

	* src/constants.cc, src/cloudbox.cc, src/m_batch.cc,
	src/m_cloudbox.cc:

	Rename P_GRID, LAT_GRID, LON_GRID constants for backwards
	compatibility to GFIELD3_P_GRID, GFIELD3_LAT_GRID, GFIELD3_LON_GRID.

	Added constants GFIELD4_FIELD_NAMES, GFIELD4_P_GRID, GFIELD4_LAT_GRID,
	GFIELD4_LON_GRID.

	In the future, the grid names should be used to find the correct grid.

	* src/gridded_fields.{cc,h}:

	Add non-const version of get_string_grid.

	Make the original resize functions visible again.

2008-06-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-21

	* src/m_basic_types.h: Added NGET_GENERIC for ArrayOfGField4.

	* src/xml_io_compound_types.{h,cc}, src/xml_instantiation.h:

	Added read/write support for GField4.

	Added a common function to write the grids for all GFieldX types.

	* src/xml_io_array_types.{h,cc}, src/xml_instantiation.h:

	Added read/write support for ArrayOfGField4 and ArrayOfArrayOfGField3.

2008-06-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-20

	* Changed t_field_raw, z_field_raw, and vmr_field_raw to GField3 and
	ArrayOfGField3.

	* Confirmations that I didn't break anything would be highly
	appreciated. (Bug reports also ;-) )

	* src/workspace.cc, src/m_batch.cc

	Changed t_field_raw and vmr_field_raw to GField3 and ArrayOfGField3.

	* src/m_batch.cc, src/m_atmosphere.cc:

	Change vmr_field_raw_h2o to GField3.

	* src/gridded_fields.{cc,h}:

	Add function copy_grids to copy grids from one GField to another.

	Add function resize(GFieldX).

	* src/gridded_fields.h, src/xml_io_compound_types.cc:

	Make naming more consistent: get_gridname->get_grid_name,
	get_gridsize->get_grid_size.

	* src/constants.cc:

	Add constants for the index of the p_grid, lat_grid, and lon_grid in
	gridded fields.

	* src/cloudbox.cc, src/m_cloudbox.cc, src/m_batch.cc:

	Use the new grid index constants.

2008-06-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-19

	* First real life test for the new gridded fields. Changing type of
	pnd_field_raw to GField3. Seems to work....

	* src/cloudbox.{cc,h}, src/m_cloudbox.cc, src/m_batch.cc,
	src/workspace.cc:

	Change pnd_field_raw from GriddedField3 to GField3.

	* src/groups.cc:

	Add group ArrayOfGField3.

	* src/m_basic_types.h: Add NGET_GENERIC for ArrayOfGField3.

	* src/xml_io_array_types.{cc,h}, src/xml_io_instantiation.h:

	Add read/write support for ArrayOfGField3.

	* src/gridded_fields.h:

	Add typedefs for ArrayOfArrayOfGField3, ArrayOfGField3, and
	ArrayOfGField4.

2008-06-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-18

	* src/gridded_fields.{cc,h}:

	Add doxygen documentation.

	Changed several asserts into runtime errors.

2008-06-23  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-17

	* Now that the snow is gone, it's time for some C++-code spring
	cleaning. ;-)

	* src/matpack*.h: 

	Add missing initialization for all member variables in default
	constructors of the View types.

	* src/token.h (TokVal), src/agenda_class.h (Agenda, MRecord):

	Move initialization of member variables from the constructors'
	function bodies to the member initialization lists.

	Add missing members to initialization lists as well.

	* src/absorption.h (SpeciesRecord, LineshapeRecord, IsotopeRecord,
	LineshapeNormRecord, LineshapeSpec), src/abs_species_tag.h
	(SpeciesTag), src/gridded_fields.h (GField), jacobian.h
	(RetrievalQuantity), src/methods.h (MdRecord), src/gas_abs_lookup.h
	(GasAbsLookup), mc_antenna.h (MCAntenna), wsv_aux.h (WsvRecord):

	Initialize all members in constructors.

	* src/matpackI.{cc,h} (VectorView::operator=):

	The assignment operators didn't return a reference.

        * src/methods.h (MdRecord::operator=):
	
	Same as above. In this case the program exits anyway, but for the sake
	of consistency....

	* src/gridded_fields.cc: Add virtual destructor to GField.

	* src/parameters.h (Parameters):

	Add missing members to initialization list.

	Change from struct to class and make members public.

	* src/array.h:

	Remove spurious semikolons after function bodies.

2008-06-23  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-16

	* src/xml_io_array_types.{cc,h}, src/xml_io_basic_types.{cc,h}:

	Split xml_read_from_stream for Vectors and ArrayOfString into two
	functions. Needed to be able to re-use the parsing code for reading
	the gridded field grids.

	* src/xml_io_compound_types.{h,cc}:

	Add GField3 reading and writing routines.

	(xml_parse_grid_from_stream): Added.

	* src/xml_io_instantiation.h:

	Add GField3 reading and writing routines.

	* src/xml_io.cc (ArtsXMLTag::get_attribute_value):

	Return empty string instead of *N/A* for empty attributes.

	(ArtsXMLTag::read_from_stream): Don't crash if attribute is an empty
	string.

	Fix reading of attribute values containing spaces.

	* src/gridded_fields.h:

	Add member functions get_dim, get_gridtype, and set_name.

	Fix checksize.

	mgridtype->mgridtypes.

	* src/gridded_fields.cc:

	mgridtype->mgridtypes.

	Cast to GField reference in output operators.

	* src/groups.cc: Temporarely add GField3 for testing.

	* src/workspace.cc: Temporarely add gfield3 for testing.

	* src/Makefile.am:

	Added gridded_fields.cc to make_auto_wsv_h_SOURCES,
	make_auto_md_h_SOURCES, and make_auto_md_cc_SOURCES.

2008-06-18  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-15

	* src/gridded_fields.{cc,h}:

	Getting started with the new GriddedFields implementation.

	GField is an abstract base class maintaining the grids. GField1,
	GField2 etc. are using multiple inheritance to combine either a
	Vector, Matrix or Tensor with the grids. This way, everything that can
	be done with Vectors, Matrices or Tensors is also possible with
	GFields. E.g. it is possible to multiply a Matrix with a GField2.
	Not finished yet.

	* src/sensor.h:

	Unbreak compilation by adding declaration of
	sensor_summation_vector_NEW to sensor.h. It was used before being
	defined in sensor.cc.

2008-06-18  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-6-14

	* Basic parts of new version for mixer and backend finished. So far
	only tested through the Odin test case.
	
	conversion is now handled when creating the sensor reponse matrix.
	Much neater solution.
	(sensor_responseInit_NEW): It is now checked that grids are
	sorted. Decreasing grids allowed for mblock_za_grid and
	mblock_aa_grid.
	(sensor_responseMixer_NEW): It is now checked that frequency grid of
	sideband_response is strictly increasing.
	
	* src/workspace.cc: Introduced sideband_mode_NEW. Allowed options
	are now only "lower" and "upper".	

2008-06-11  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-8

	* configure.in:

	Fix bug in setting -Wno-unknown-pragmas for non-OpenMP compilers.

	* src/methods.cc: Small fix in docs for Test method.

2008-06-10  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-6-7

	* src/m_sensor.cc (sensor_responseBackend_NEW): Created.

	* src/sensor.cc (spectrometer_matrix_NEW): Created.

	* includes/odin/odinsmr_501.arts: Adopted to new sensor part.

	* tests/OdinSMR/plot_result.m: Now using y-aux variables. 

	* includes/odin/setup_input.m: Moved from test directory. Backend
	now stored as matrix ('backend_channel_response).

	* tests/testall.py: Deactivated assert in Odin test
	temporarily. This as Odin case will be used for testing new sensor
	part.

2008-06-09  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-6-6

	* src/m_rte.cc (RteCalc_NEW): Created.

	* src/make_array.h: Added template and functions for WSM with up
	to 35 arguments (RteCalc_NEW sets a new record!).

	* src/workspace.cc: Introduced y_f, y_pol, y_za and y_aa. Much improved
	description of backend_channel_response.

	* src/sensor.cc (sensor_aux_vectors): Created. 

	* src/m_sensor.cc (sensor_responseInit_NEW): Removed consistency
	check of sensor_pos and sensor_los as these variables normally are
	set further down in the control file, and check anyhow done in RteCalc.
	(sensorOff_NEW): Removed input sensor_pos and sensor_los.

	(sensor_responseMixer_NEW): Created.

2008-06-06  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-6-5

	* Started on modified version of the sensor part. New or modified
	variables and methods include _NEW, and old version is left until
	new version has been finished.

	* includes/amsu/amsub.arts: Now using AntennaOff.

	* src/m_sensor.cc: Created AntennaOff, sensorOff_NEW and
	sensor_responseInit_NEW. sensorOff consists now of call of the
	other two methods. Check of sensor_pos and sensor_los moved to
	sensor_responseInit, and is thus now always performed.

	* src/sensor.cc (scale_antenna_diagram): Commented out. Function 
	presently not used.

	* src/workspace.cc: Added 
	sensor_response_aa_NEW, sensor_response_f_NEW, 
	sensor_response_pol_NEW, sensor_response_za_NEW,
	sensor_response_aa_grid_NEW, sensor_response_f_grid_NEW,
	sensor_response_pol_grid_NEW, sensor_response_za_grid_NEW,
	sideband_response_NEW, sensor_pol_NEW

	Somewhat improved description of some other sensor variables.
	
2008-06-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-4

	* src/parser.cc (ArtsParser::parse_method):

	Ignore whitespace between ) and {. Fixes ticket #7.

2008-06-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-3

	* src/parser.cc (ArtsParser::read_name_or_value):

	For some data types the values where not added to the auto_vars_values
	array.

2008-05-29  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-6-2

	* src/scatrte.cc: Added f_index in calls of opt_prop_gas_agenda.
	* src/montecarlo.cc: As above. 

	* src/agendas.cc (opt_prop_gas_agenda): f_index now specified as
	agenda input. This in order to make this dependency explicit, and
	fix that this agenda works as abs_scalar_gas_agenda.

	* tests/MonteCarlo/TestMonteCarloGeneral.arts: Removed definition of
	spt_calc_agenda. Not used.
	* tests/MonteCarlo/TestMonteCarloGeneralGaussian.arts: As above. 

	* tests/MonteCarlo/TestRteCalcMC.arts: As above. Removed setting
	of f_index. Now not needed with change in opt_prop_gas_agenda.
	
2008-05-29  Cory Davis <corzneffect@gmail.com>

        * tests/testall.py: Made all the assert message lines nicer by
	using format strings

	* arts-1-6-1

	* src/workspace.cc: Added batch_pnd_fields and batch_cloudbox_lims.

	* src/methods.cc: Added Tensor4ExtractFromArrayOfTensor4 and
	ArrayOfIndexExtractFromArrayOfArrayOfIndex. Nasty. If only we
	could use a=b[i].
	
	* src/m_batch.cc: Added the above two methods.

2008-05-20  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-6-0

	* Fixed a bug in the amsub setup in the includes
	directory. Emissivity was set, but the surface_prop_agenda was not
	redefined, so that in fact the calculation was always for a
	blackbody surface. The bug affected the AMSU-B setup in all ARTS
	versions since 1.3.27, where the surface model in general.arts was
	changed.
	
	* Again rearranged the include files for AMSU (hence the new
	version number). Reverted back to having only a single include file
	"amsub.arts". You have to also include general.arts and
	continua.arts. There will be a similar file "amsua.arts" soon.

	* includes/general.arts: Removed the line that set
	surface_emissivity. That line was misleading, since in fact the
	value is not used as long as surface_prop_agenda contains
	surfaceBlackbody.

	* includes/amsu/amsub.arts: Reintroduced this. Fixed surface
	emissivity bug.

	* tests/testall.py (TestAMSUB.test2): Adapted to new surface
	emissivity value.

	* tests/AMSU/TestAMSUB.arts: Adapted to new include file. 

	* tests/ClearSky/TestClearSky.arts: This file also contained the
	surface emissivity bug! Removed the line where the emissivity is
	set and put instead a comment there, that explains how to turn on
	surface modeling.

	* includes/amsu/amsub.f_grid.xml: Removed, since f_grid is now
	generated on the fly with f_gridFromSensor. Verified that the
	difference introduced by this is negligible.

	* includes/amsu/amsu_spectroscopy_with_O3.arts: Removed.
	* includes/amsu/amsu_spectroscopy_no_O3.arts: Removed.
        * includes/amsu/amsua_sensor.arts: Removed.
        * includes/amsu/amsub_sensor.arts: Removed.

	* includes/amsu/amsub.backend.xml: The AMSU bands where a bit too
	narrow, for technical reasons related to the old f_grid. Adjusted
	them to fit the KLM user guide description. Verified that the
	difference introduced by this is negligible.

2008-05-09  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-5-4

	* AMSU-B Test works again.

2008-05-09  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-5-3

	* I'm working on rearranging AMSU setup files. For now they will
	not work. Unfortunately, I am forced to commit anyway, due to the
	restrictions of SVN (modifying and renaming things at the same
	time is not possible). If you are working with AMSU, do not update
	right now! Everything should be stable again early next week.
	
2008-05-09  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-5-2

	* Ups, I should have started with 1-5-0 for the last
	commit. Anyway now I'll just keep counting.

	* Svn added missing Makefile.am files. Adjusted paths in several
	Makefiles. 

	* test/AMSU/: Renamed this directory from AMSUB to AMSU, since it
	will hold also an AMSU-A test case.

2008-05-09  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-5-1

	* Moved sensor specific include files to subdirectories "amsu" and
	"odin" of includes directory. A new second digit version number
	for this, since some control files may break. To fix, replace:
	INCLUDE "amsub.arts" by
	INCLUDE "amsu/amsub.arts"
	likewise:
	INCLUDE "odinsmr_501_1D.arts" by
	INCLUDE "odin/odinsmr_501_1D.arts"

	* includes/odin/: Contains now all Odin specific include files. I
	have moved here also many files (f_grid, backend, antenna, etc.)
	that were in tests/OdinSMR, but should actually be with the
	include files, because the include files will not work without them.

	* includes/amsu/: Contains now all AMSU specific include files.

	* tests/: Adapted all tests to work with the include files in the
	new locations. All tests run through.

2008-05-09  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-4-18

	* Adapted all parallel for loops to correctly handle runtime
	errors. These changes were necessary, because exceptions must be
	handled inside the same parallel region in an OpenMP
	environment. With OpenMP, the program now simply terminates with
	the error message when a runtime error is encountered. Without
	OpenMP, the exception is re-thrown. The consequence of this is
	that the robust option for ybatchCalc will not work with OpenMP,
	but at least without OpenMP.

	* src/m_batch.cc (ybatchCalc_implementation): Use new function
	exit_or_rethrow, instead of arts_exit_with_error_message.

	* src/arts.{cc,h} (arts_exit_with_error_message): Added.
	(exit_or_rethrow): Added.

	* src/m_rte.cc (RteCalc): Added try/catch block for correct
	runtime error handling. 
	(RteCalcMC): Added try/catch block for correct runtime error
	handling. 

	* src/main.cc (main): Use new function
	arts_exit_with_error_message to exit upon runtime error.

	* src/m_abs_lookup.cc (abs_lookupCreate): Added try/catch block
	for correct runtime error handling.
	(abs_fieldCalc): Added try/catch block for correct runtime error
	handling.

	* src/methods.cc (ybatchCalc): Pointed out in documentation that
	robust will only work without OpenMP.

	* src/m_atmosphere.cc (batch_atm_fields_compactFromArrayOfMatrix):
	Added try/catch block for correct runtime error handling.

2008-05-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-4-17

	* configure.in:

	Disable unknown pragma warning when compiling without OpenMP.

	* src/m_abs_lookup.cc, src/m_batch.cc, src/m_rte.cc,
	src/m_atmosphere.cc:

	Remove ifdefs around pragma omp directives. Fixes ticket #4.

2008-05-09  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-4-16

	* A small change of control files including a description of
	ppath_step_agenda is needed. You need to define ppath_lmax.

	The keyword arguments lmax and lraytrace are now WSV, denoted as
	ppath_lmax and ppath_lraytrace.  This in order to allow that
	"lmax" can be changed, without needing to specify the complete
	agenda (including a selection if refraction shall be
	considered or not). This allows also a much nicer definition of
	ppath_step_agenda in the ARTS2 format (no need to list all input
	variables).

	* includes/general.arts: Introduced ppath_lmax (value still 10 km).
	* tests/DOIT/TestDOIT.arts: Introduced ppath_lmax (value still -1).
	
	* includes/odinsmr.arts: ppath_lmax set to 20 km to mimic Qsmr.
	
	
	* src/m_ppath.cc (ppath_stepRefractionEuler): Now using ppath_lmax
	and ppath_lraytrace.
	
	(ppath_stepGeometric): Now using ppath_lmax.

	* src/workspace.cc: Introduced ppath_lmax and ppath_lraytrace. To 
	replace the corresponding keyword arguments in ppath_step WSMs.

2008-05-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-4-15

	* src/methods_aux.cc (operator<<): 

	Reformat for-loop for better readability.

	* src/scatrte.cc:
	
	Put parenthesis around && when used in proximity of ||.
	(b || c && d) -> (b || (c && d))
	Better readability: http://bytes.com/forum/thread602250.html

	* src/parser.cc (ArtsParser::read_numeric), src/binio.cc:

	Add braces in several places to avoid ambiguous else.

2008-05-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-4-14

	* tests/Makefile.am:

	Make TestRteCalcMC depend on TestMonteCarloDataPrepare because the
	former depends on the fgrid generated by the latter. Fixes ticket #3.

2008-05-08  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-4-13

	* src/m_abs_lookup.cc (abs_lookupCreate): Check that dimensions of
	abs_species and abs_lines_per_species match. This as a safeguard
	in case somebody modifies abs_species after abs_lines_per_species
	has been generated.
	(abs_lookupCreate): Put a try/catch block around the entire
	content of the parallelized for loop. This is necessary to avoid a
	core dump if an exception is thrown inside the parallel
	region. The plan is that this will eventually be fixed for all
	parallel for loops by Oliver, using Macros.

	* src/m_abs.cc (abs_xsec_per_speciesAddLines): Check that the
	first line of the line list for each species matches the species
	tag. This as a safeguard in case somebody modifies abs_species
	after abs_lines_per_species has been generated.

	* src/methods.cc (f_gridFromSensor): Added this method.

	* src/m_sensor.cc (f_gridFromSensor): Added this method.

	* includes/{amsu,odin}: Created these directories. Includes is
	getting messy, so I plan split its content into subdirectories for
	the different instruments.
	
	* includes/amsub.arts: Rearranged to use f_gridFromSensor. But not
	yet activated. Needs major rearrangement to be more idiot-proof,
	after two bad bugs.

	* includes/amsua.arts: Started. 

	* src/main.cc (main): Just added a comment concerning arts_exit.

2008-05-08  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-4-12

	* tests/testall.py: Added TestRteCalcMC. Added check of radiance
	produced by OdinSMR test.

	* tests/Makefile.am: Added TestRteCalcMC. 

	* src/rte.cc (iy_calc): Removed private copy flag for rte_agenda.

	(get_radiative_background): As above for all call of agendas.

	* src/ppath.cc: Removed copying of agenda. Now handled in RteCalc. 

	* src/m_rte.cc (RteCalcMC): Polished code and added some comments. The 
	threading appears to work.

	(RteCalc): Local copy of workspace for threading now handled as
	introduced by Oliver in RteCalcMC.

	* tests/MonteCarlo/TestRteCalcMC.arts: Changed from using multiple 
	mblocks, to use an antenna diagram (taken from Odin-SMR). This in
	order to test usage of threads in RteCalcMC.

2008-05-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-4-11

	* src/arts_omp.cc (arts_omp_in_parallel):

	omp_in_parallel behaves differently in gcc and icc. omp_in_parallel
	in the intel compiler returns true even if the maximum number of
	threads is set to 1, but false in gcc. On the other hand,
	omp_get_max_threads in gcc always returns 1 instead of the correct
	number of max threads when called inside a parallelized region. So,
	we have to use to use omp_get_max_threads with the intel compiler and
	omp_in_parallel with gcc to determine if we're running multiple threads
	or not. Bummer.

2008-05-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-4-10

	* src/m_rte.cc (RteCalcMC): Parallelized za loop.

2008-05-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-4-9

	* src/arts_omp.{cc,h} (arts_omp_in_parallel):

	Added. Returns true if current region runs parallelized.

	* src/m_batch.cc (ybatchCalc_implementation),
	src/ppath.cc (ppath_calc), m_abs_lookup.cc (abs_fieldCalc):

	Use arts_omp_in_parallel to determine if the current region is running
	parallelized and only copy the agenda workspace if it does.

	* src/xml_io.cc (xml_write_to_file):

	Make ftype const. Was supposed to be in arts-1-4-6.

2008-05-06  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-4-8

	* tests/MonteCarlo/TestMonteCarloDataPrepare.arts: Added saving of
	scat_data_raw.

	* tests/MonteCarlo/TestRteCalcMC.arts: Created.

	* src/m_ppath.cc (sensor_posAddGeoidWGS84): Indexing when extracting 
	data from matrix r was wrong.

	* src/m_rte.cc (RteCalcMC): Removed f_index as output. Made some 
	work in order to introduce threads. Most importantly, ibdone now
	calculated instead of calculated in += fashion.

	* src/m_rte.cc (RteStdWithTransmissions): Removed *emission* 
	and *abs_scalar_gas* as output.

	              (RteStd): As above. 
	* src/rte.cc (rte_std): As above.

	* src/methods.cc: A quick revision of description for methods with
	me as author, beside sensor and jacobian methods. Fixed spelling and
	som eupdates. Set Claudia as author for some methods.

	* tests/OdinSMR/plot_result.m: Name of files to load had to be changed
	(.generated added).

	* tests/OdinSMR/TestOdinSMR.arts: Changed number of spectra calculated
	to 4 (was set to 31 for test of speed improvement with threads). 
	Removed timer output.

2008-05-06  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-4-7

	* src/methods_aux.cc (operator<<):

	Fix bug in synopsis output. Variables which are specific in- and output
	should not be displayed twice.
	
	* tests/Abs/TestAbs.arts, tests/ClearSky/TestClearSky.arts:

	Changed to new format.

	* tests/Abs/TestAbs2.arts: Removed.

2008-05-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-4-6

	* src/xml_io.{cc,h} (xml_write_to_file): Make ftype const.

	(xml_read_arts_catalogue_from_file): Added.

	* src/xml_io_array_types.{cc,h}:

	Added xml_read_from_stream function which reads lines within a certain
	frequency range from an ARTS catalogue.

	* src/m_abs.cc:

	Rename old abs_linesReadFromArts function to
	abs_linesReadFromArtsObsolete and change abs_linesReadFromArts
	to read XML catalogue files.

	* src/methods.cc: Add WSM abs_linesReadFromArtsObsolete.

	* tests/Abs/lines.ac, tests/OdinSMR/linefile.SM_AC2ab.al,
	tests/OdinSMR/linefile.SM_AC1e.al: Removed after conversion to xml.

	* tests/Abs/lines.xml: Added.

	* includes/linefile.SM_AC2ab.xml, includes/linefile.SM_AC1e.xml:

	Added. Moved from the tests directory to here because the linefiles
	are read by the Odin include files.

	* includes/odinsmr_544.arts, includes/odinsmr_501_1D.arts,
	includes/odinsmr_501.arts:

	Read lines from XML file.

2008-05-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-4-5

	* tests/testall.py, tests/Makefile.am: Run OdinSMR testcase.

	* tests/OdinSMR/TestOdinSMR.arts, tests/OdinSMR/TestOdinSMR_1D.arts:

	Add .generated to output filenames.

	* tests/OdinSMR/: Update ignores.

2008-05-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-4-4

	* src/methods_aux.cc (operator<<):

	Print method's synopsis in online help for easy copy'n'paste.
	
	Refine author list in online help.

2008-05-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-4-3

	* Compilation fixes for gcc 4.3

	* configure.in:

	Don't enable -Werror flag for gcc 4.3. Reason: The new gcc is _VERY_
	picky about unsigned->signed conversions and down casting from larger
	to smaller data types (long -> int) which could lead to overflows.
	Fixing those warnings would need substantial code changes (if possible
	at all). Needs further research.

	* src/array.h:

	Include <climits> for LONG_MAX and <iostream> for ostream.operator<<.

	* src/xml_io.cc (xml_read_header_from_stream):

	Use C++ string comparison instead of C function.

	* src/agenda_class.cc:

	Include <algorithm> for set_intersection and set_difference.

	* src/gzstream.cc: Include <cstring> instead of <string> for memcpy.

2008-04-30  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-4-2

	* RteCalc now using threads. The threading added around the zenith
	angle loop. This means that threads are only activated if the
	calculations involve more than one zenith angle (always the case
	if an antenna pattern is used). Tested succesfully with Odin 501
	example.
 	
	* src/ppath.cc (ppath_calc): Added private copy flag for call of
	ppath_step_agenda. Introduced a local copy of ppath_step_agenda
	to avoid conflicts between threads (solution provided by Oliver).

	* src/rte.cc (get_radiative_background): Added private copy flag for
	all called agendas.
	(iy_calc): As above for call of rte_agenda.

	* src/m_rte.cc (RteCalc): Included OpenMP thread around za loop.

	* includes/odinsmr_501_1D.arts: As below.
	* includes/odinsmr_544.arts: As below.

	* includes/odinsmr_501.arts: A (temporary) fix to aviod Stefan's 
	introduction of backend_channel_response (I had selected exactly
	the same name when defining a variable.)

2008-04-30  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-4-1

	* tests/Abs/TestAbs.arts: Removed stuff that is already set in
	general.arts. In particular, the lineshape setting were not only a
	duplicate, but also unreasonable!

	* tests/Abs/TestAbs2.arts: Removed stuff that is already set in
	general.arts. In particular, the lineshape setting were not only a
	duplicate, but also unreasonable!

2008-04-30  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-4-0

	* Changes to arguments of *sensor_responseMultiMixerBackend*,
	hence new version number. Also corrected documentation in old
	absorption part, an error discovered by Claudia.

	* src/workspace.cc (backend_channel_response): Added. The
	documentation is copied from *sensor_responseMultiMixerBackend*. It
	is unclear and should be improved.

	* src/m_sensor.cc (sensor_responseMultiMixerBackend): Made
	*backend_channel_response* a specific input. (Was generic input of
	type Matrix.)

	* src/methods.cc (abs_coefCalc): Fixed documentation.
	(abs_coefCalcFromXsec): Fixed documentation.
	(sensor_responseMultiMixerBackend): Made
	*backend_channel_response* a specific input. (Was generic input of
	type Matrix.)

	* includes/amsua.arts: Added. Not yet finished.

	* includes/amsub.arts: Adapted to change in
	*sensor_responseMultiMixerBackend*. 

	* tests/AMSUB/TestAMSUA.arts: Added. Not yet finished.

	* tests/AMSUB/TestAMSUB.arts: Moved most content to
	TestAMSU_generic.arts. 

	* tests/AMSUB/TestAMSU_generic.arts: Added. This contains the
	general AMSU test, those parts that are the same for AMSU A and
	B. 

2008-04-29  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-3-40

	* src/m_cloudbox.cc (CloudboxGetIncoming): Removed *iy* and *ppath* as
	output variables.
	(CloudboxGetIncoming1DAtm): As above.

	* src/ppath.cc (ppath_calc): Removed *ppath_step* as input.

	* Removed Removed *ppath_step* from these functions:
	* src/m_ppath.cc (ppathCalc): 
	*                (rte_pos_and_losFromTangentPressure): 
	*                (ZaSatOccultation): 
	* src/rte.cc (get_radiative_background): 
	*            (iy_calc): 
	*            (iy_calc_no_jacobian): 
	* src/montecarlo.cc (montecarloGetIncoming):
	*                   (iwp_cloud_opt_pathCalc): 
	* src/m_cloudbox.cc (CloudboxGetIncoming): 
	                    (CloudboxGetIncoming1DAtm): 

	* src/m_montecarlo.cc (MCIPA): Removed *ppath_step* from the function.
	Information now taken from ppath: ppath_step.np replaced by ppath.np
	etc.

	* src/montecarlo.cc (mcPathTraceIPA): Removed *ppath_step* as input.
	
	* src/m_jacobian.cc (yCalc): Adapted to changes in RteCalcNoJacobian.

	* src/m_rte.cc (RteCalc): Output is now only *y* and *jacobians*.
	(RteCalcNoJacobian): Output is now only *y*.

2008-04-29  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-3-39

	* src/m_rte.cc (RteCalc): Changed treatment of some variables as a first
	step to use OpenMP. Clean up of some agendas needed to finish this.

2008-04-29  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-3-38

	* Odin test control files updated to ARTS2 format. Test cases run.
	
	* includes/odinsmr.arts: 
	* includes/odinsmr_501_1D.arts: 
	* tests/OdinSMR/TestOdinSMR_1D.arts: 
	* includes/odinsmr_544.arts: 
	* includes/odinsmr_501.arts: 
	* tests/OdinSMR/TestOdinSMR.arts: 

2008-04-29  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-37

	* doc/uguide/main.tex, configure.in, src/*.{cc,h}:

	Update copyright info for 2008.

	* tests/Abs/TestAbs2.arts: Use short call for abs_lookupCreate.

	* tests/AMSUB/: Ignore *.generated* .

2008-04-28  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-36

	* Fix 'make distcheck'

	* tests/Makefile.am:

	Add artsXML.py to EXTRA_DIST.

	Also clean files that contain ".generated." somewhere in the filename.

	* test/AMSUB/TestAMSUB.arts:

	Change output filename of jacobians to contain ".generated.".

	* src/xml_io.cc (xml_open_output_file):

	Remove superfluous ".gz" from filename in error message.

2008-04-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-35

	* src/agenda_class.cc (Agenda::set_outputs_to_push_and_dup):

	Added special treatment for the Delete method. Add its input variable
	to the output variable list. This makes sure that the variable which
	will be deleted is duplicated and restricts the effect of the Delete
	method to the agenda's scope.

	(Agenda::execute):

	Remove code to check if specific inputs are initialized. Not needed
	anymore because all variables are now treated as generic inputs.

	* src/workspace_ng.{cc,h}:

	Add new method 'del' to free a WSV's memory.

	* src/m_delete.h (Delete): Use ws.del instead of ws.pop_free.

	* src/parser.cc (tasklist_insert_set_delete): Remove debug output.

2008-04-23  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-34

	* tests/AMSUB/TestAMSUB.arts:

	Copy the ybatch_index to file_index to safe the jacobians to indexed
	files.

	* tests/AMSUB/: Add jacobian output files to svn ignore.

2008-04-22  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-3-33

	* src/m_abs_lookup.cc (choose_abs_nls_pert): Chose always at least
	2 points below and above the reference profile, as for
	temperature. The old strategy led to problems in batch jobs with
	only one profile, together with Jacobian calculation.

2008-04-20  Cory  <corzneffect@gmail.com>

	* arts-1-3-32

	* tests/testall.py (TestMonteCarloSimple):removed this and the
	other test involving ScatteringMonteCArlo (which is broken and
	wont be fixed in the near future). All tests pass.
	
2008-04-17  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-31

	* src/getopt.h: Fix compilation on Mac OS X Tiger.

	* src/getopt.cc: Fix 64-bit compilation on Mac OS X Leopard.

2008-04-17  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-30

	* autogen.sh:

	Raise requirement for automake to 1.7. 1.6 does not support conditional
	variables. Also add 1.10 to the compatibility list. (Reported by
	Carlos Jimenez).

2008-04-14  Mattias Ekstrom  <mattias.ekstrom@chalmers.se>

	* arts-1-3-29

	* src/methods.cc: Method ArrayOfMatrixSet is now named 
	ArrayOfMatrixInsert. An output array has now to be declared when
	calling the method.

	* src/m_basic_types.cc: Implemented the changes described above.

2008-04-10  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-28

	* test/testall.py:

	Update the comparison values for the AMSU-B test case. Because the
	surface is now treated as a blackbody, the BTs have changed
	significantly esp. for the two surface channels which made the test
	fail.

2008-04-10  Mattias Ekstrom  <mattias.ekstrom@chalmers.se>

	* arts-1-3-27

	* test/general.arts: Now treats the surface as a blackbody. 

	* test/odinsmr.arts: Reset the userparameter for N2-SelfContMPM93
	to 1.

2008-04-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-26

	* test/testall.py: Update values for AMSUB test case.

2008-03-25  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-3-25

	* src/gas_abs_lookup.cc (Extract): Switched to 4th order
	interpolation for T and H2O. 

	* src/m_abs_lookup.cc (choose_abs_nls_pert): Make sure that there
	are at least five points.
	(choose_abs_t_pert): Choose at least two points below and above
	the reference point.

	* src/interpolation_poly.cc: Some minor polishing.

	* src/interpolation_poly.h: Updated.

	* src/parameters.cc (get_parameters): Removed forgotten debug
	output. 

2008-03-19  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-24

	* configure.in:

	Disable OpenMP if the user compiles without optimizations and uses the
	Intel compiler. The resulting application is not properly parallelized
	and will execute the same iteration multiple times on different
	threads.

2008-03-18  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-23

	* IMPORTANT: In rare cases, the changes in this commit might break your
	controlfiles. This only happens if you have used one of the following
	variables as a supergeneric output:

	arrayofarrayofgriddedfield3_1
	arrayofmatrix_[12]
	arrayofstring_1
	index_1
	matrix_[12]
	numeric_[12]
	sparse_1,
	tensor[3456]_[123]
	vector_[123]

	If this is the case for you, please read on.

	* Continued work on the automatic creation of output WSVs. For
	supergeneric methods we don't know which type the output variable
	should have if it doesn't already exist. For this purpose, Create
	functions for the most commonly used types have been added.

	All workspace variables ending in _[1-3] like vector_1, matrix_1 etc.
	have been removed. They are not needed anymore because they can be
	created at runtime.

	If you have used these variables in your controlfiles as an output
	variable of a supergeneric method, you have to add a call to TYPECreate
	before calling the supergeneric method. Example taken from
	tests/AMSUB/TestAMSUB.arts:

	Before:

	ReadXML(arrayofmatrix_1){"chevallierl91_clear_q_extract.xml"}

	Now:

	ArrayOfMatrixCreate(arrayofmatrix_1)
	ReadXML(arrayofmatrix_1){"chevallierl91_clear_q_extract.xml"}

	* src/parser.{cc,h}:

	(parse_method), (parse_input), (parse_output_and_input):

	Add two parameters: auto_vars and auto_vars_values. They handle
	parameters for which the user passed constant values in the
	controlfile. One holds the indexes of the automatically allocated
	variables and the other one their values.

	(read_name_or_value):

	New function that parses WSV names and values.

	(read_name):

	Throw exception if first character of the WSV name is not a letter.

	(parse_main):

	In case of a runtime_error also output the column number to out0, not
	just to out3.

	(parse_agenda):

	Use tasklist_insert_set_delete.

	(tasklist_insert_set_delete):

	Insert Set and Delete methods for the automatically allocated
	variables into the agenda.

	* src/workspace.cc:

	Remove arrayofarrayofgriddedfield3_1, arrayofmatrix_[12],
	arrayofstring_1, index_1, matrix_[12], numeric_[12], sparse_1,
	tensor[3456]_[123], vector_[123]. Not needed anymore because output
	variables can now be created at runtime.

	* src/methods.cc, src/m_basic_types.cc:

	New methods ArrayOfMatrixCreate, ArrayOfStringCreate, IndexCreate,
	MatrixCreate, NumericCreate, SparseCreate, StringCreate,
	Tensor[34567]Create, VectorCreate.

	* tests/AMSUB/TestAMSUB.arts:

	Use new method ArrayOfMatrixCreate to create arrayofmatrix_1.

	* includes/amsub.arts:

	Use MatrixCreate for matrix_2.

	* src/m_xml.h (WriteXML):

	Better runtime error message.

	* src/m_general.cc (PrintWorkspace):

	When displaying the whole Workspace, mark allocated variables with a
	plus sign.

2008-03-10  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-22

	* src/make_auto_md_cc.cc:

	Fix offset in indexing when passing Input workspace variable names.

2008-03-06  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-3-21

	* doc/uguide/interpolation.tex (section{Higher order
	interpolation}): Added this section, describing the new
	interpolation routines.

2008-03-06  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-3-20

	* src/interpolation_poly.{cc,h}: Finished first draft of higher order
	polynomial interpolation routines. It seems to work!

	* src/test_interpolation.cc (test08): A very simple test case for
	the new interpolation routines.

2008-03-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-19

	* New feature: Creating new workspace variables at runtime.
	If the user specifies an output variable that does not exist, arts
	automatically creates the variable instead of throwing an error. E.g.:

	IndexSet( nelem, 10 )
	VectorNLogSpace( myfancyvector, nelem, 10, 20 )

	In this case a new workspace variable 'myfancyvector' is created and
	initialized.

	This works for outputs as well as generic outputs.

	* src/workspace_ng.{cc,h}:

	Add new function add_wsv to extend the workspace at runtime.

	* src/parser.cc:

	When a output or generic output variable doesn't exist, create it.

	* src/m_general.h (SWITCH_OUTPUT):

	Output a newline after printing the variable.

2008-03-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-18

	* src/parser.{cc,h}:

	(ArtsParser::parse_generic_keywords):

	Renamed to parse_keywords2 and added docs.

	(ArtsParser::parse_keywords): Added docs.

	(ArtsParser::parse_method): Cleanup and simplify code.

	(ArtsParser::parse_output_and_input): Add docs. Cleanup code.

2008-03-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-17

	* Continued work on the new controlfile features.

	WSM input and output variables are now treated the same as generic
	inputs and outputs.
	In practice, this means that also for non-generic inputs and outputs
	arbitrary workspace variables (of matching type) can be passed to the
	method in the controlfile.

	* src/parser.{cc,h}:

	(parse_input): Add input variable array to the parameter list.

	(parse_output): Add output variable array to the parameter list.

	Indexes for the actual variables passed as input and output are now
	added to the MRecord's moutput and minput arrays. Before, this was
	only done for generic variables.

	* src/make_auto_md_cc.cc:

	Handle input and output WSVs in the same way as generic variables.

	* src/agenda_class.h (MRecord): Updated docs for minput/moutput.

2008-03-04  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-3-16

	* src/interpolation.{cc,h}: Removed gridpos_extpol. Instead,
	gridpos has an optional argument extpolfac with a default value of
	0.5. Also changed \param for output parameters to \retval in
	doxygen comments.

	* src/special_interp.{cc,h} (p2gridpos): Added optional argument
	extpolfac with a default value of 0.5.
	(p2gridpos_extpol): Removed.

	* src/jacobian.cc: Replace calls to gridpos_extpol by calls to
	gridpos with extpolfac argument.

	* src/interpolation_poly.{cc,h}: Work in progress. Added all
	interpweights and interp functions from interpolation.cc. Adapting
	them to higher order polynomial interpolation.

2008-03-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-15

	* Started to get rid of the global variables. wsv_data and WsvMap are
	now part of the Workspace class.

	* src/workspace.cc:

	Don't define wsv_data as a global variable anymore. It is now part of
	the Workspace class.

	Make define_wsv_data also part of the Workspace class.

	* src/wsv_aux.h:

	Remove declarations of define_wsv_data and define_wsv_map.
	Moved PrintWsvName to workspace_ng.h.

	* src/workspace_ng.{cc,h}:

	Added wsv_data and WsvMap as static members to Workspace.

	Moved PrintWsvName and define_wsv_map here.

	* src/workspace_aux:

	Removed. define_wsv_map is now part of the Workspace class and
	implementation moved to workspace_ng.{cc,h}.

	* src/Makefile.am:

	Remove workspace_aux.cc.

	(make_auto_wsv_h_SOURCES):

	Remove agenda_class.h, add workspace_ng.{cc,h}.

	* src/m_agenda.cc, src/m_delete.h, src/make_auto_md_h.cc,
	src/make_auto_wsv_h.cc, src/agenda_class.cc, src/methods_aux.cc,
	src/main.cc, src/workspace_ng.cc, src/make_auto_md_cc.cc,
	src/parser.cc:

	Use wsv_data, WsvMap, define_wsv_data, and define_wsv_map from the
	Workspace class.

	* src/agenda_class.h, src/m_general.h:

	Don't include workspace_ng.h. Just declare Workspace.

2008-02-29  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-3-14

	* The AMSUB test now runs with jacobians. Though not checked result.
	But mechanism using
	file_index appears not to work with new agenda definitions.
	No time for me to fix this now.
	
	* tests/AMSUB/TestAMSUB.arts: Added following calls: 
	   IndexSet( file_index ){0}
	   jacobianClose 
	   IndexStep( file_index, file_index ){}

	* includes/amsub.arts: Added: StringSet( jacobian_unit ){ "RJBT" }

2008-02-29  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-3-13

	* src/interpolation_poly.h: Commit before rearranging
	interpolation again.

	* src/interpolation_poly.cc: Commit before rearranging
	interpolation again.

	* src/test_interpolation.cc (test07): First test of new
	polynomial interpolation. Seems to work.

2008-02-29  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-12

	* src/make_auto_wsv.h, src/make_auto_wsv_groups.h:

	Move definition of the workspace memory handler from auto_wsv.h to
	auto_wsv_groups.h because it only depends on the WSV groups not the
	WSVs anymore.

	Fix the size of the function pointer arrays. They should have as many
	elements as the WSV group names array, not the WSV array.

	* src/make_auto_wsv.h:

	Do not create the obsolete auto_wsv.txt file anymore.

	Don't include matpackI.h.

	* src/workspace_ng.cc:

	Include auto_wsv_groups.h instead of auto_wsv.h.

2008-02-29  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-11

	* configure.in: Add -Wshadow to icc compiler flags.

	* src/agenda_class.cc (Agenda::execute):

	Rename some index variables to avoid shadowing.

	* src/wsv_aux.h (WsvRecord):

	Add member mimplicit which is can be set to true if the variable was
	automatically created.

	* src/methods.cc, src/m_general.{cc,h}:

	Add keyword only_allocated to PrintWorkspace. Can be used to only
	print the allocated variables or the whole list of WSVs.

	* src/parser.cc:

	Make wsv_data non-const. The parser needs to change it in the future
	for creating new variables on the workspace.

	(parser_generic_keywords):

	Add parameter "first". Fixes WSMs which take only keywords.

	(parse_input), (parse_output): Make parameter "first" a reference.

	* src/workspace_ng.{cc,h}:

	Do not use the constant N_WSV to determine the number of WSVs in the
	workspace. We want to be able to add WSVs to the workspace, therefore
	we must rely on runtime information.

	* src/main.cc (main):

	Call Workspace::intitialize.

2008-02-29  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-10

	* Intermediate commit continuing work on the new controlfile
	structure. The parser is still backwards compatible with the old
	controlfiles. If this commit breaks anything it's a bug and you should
	let me know...

	* The testall.py script now depends on python-numpy.

	* tests/Abs/TestAbs2.arts, tests/DOIT/TestDOIT2 show how the new
	controlfile structure looks like.

	* src/abs_species_tags.cc, src/m_rte.cc, src/m_abs_lookup.cc,
	src/m_jacobian.cc, src/m_batch.cc, src/m_agenda.cc, src/m_sensor.cc,
	src/m_append.h, src/m_basic_types.{cc,h}, src/m_atmosphere, src/m_copy,
	src/m_ignore.h, src/m_physics.cc, src/m_general.{cc,h},
	src/check_input.cc, src/m_ppath.cc, src/m_refraction.cc,
	src/special_interp.(cc,h), src/montecarlo.cc, src/rte.cc

	Remove generic input/output names from WSMs.

	* src/methods.{cc,h}, src/methods_aux.cc:

	Add flag PASSWSVNAMES. Generic output/input variable names are not
	passed to WSMs anymore. But some functions, like WriteXML and ReadXML,
	must still have the WSV name to derive a default filename from it.
	For those functions this flag can be set to true.

	Set PASSWSVNAMES for ReadXML, WriteXML, WriteXMLIndexed and Delete.

	Implement helper function to retrieve a list of input only variables.

	* src/agenda_class.cc (Agenda::execute):

	Also output the method parameters to out1 in addition to the WSM name.
	(Currently commented out)

	* src/agenda_class.h (MRecord):

	Implement helper function to retrieve a list of generic input only
	variables.

	* src/make_auto_md_cc.cc, src/make_auto_md_h.cc:

	Remove the generic WSV input and output variable names from the
	getaway functions.

	Use new helper function MdRecord::input_only.

	* tests/testall.py:

	Use XML files for data exchange between arts and the python test
	script instead of parsing the arts output. The parsing was tedious and
	only possible with tweaked output formatting of the ARTS Print method.
	With the ongoing changes to the structure of the ARTS screen output
	this would have gotten even more unpractical.
	Using XML files is much more powerful and flexible. Only disadvantage
	is that we have to depend python-numpy as we need its 'array' type.

	* tests/artsXML.py:

	Added a stripped down version from pyarts to read arts XML files
	with the testall.py script.

	* tests/DOIT/TestDOIT.arts,
	tests/MonteCarlo/TestMonteCarloGeneralGaussian.arts,
	tests/MonteCarlo/TestMonteCarloGeneral.arts,
	tests/AMSUB/TestAMSUB.arts, tests/ClearSky/TestClearSky.arts:

	Instead of using the Print method to pass results to the python test
	script, write those variables to a file.

	* tests/AMSUB/TestAMSUB.arts:

	Do not include continua.arts. Already done in amsub.arts include file.

	* tests/: Ignore *.pyc.

	* src/parser.{cc,h}:

	Split up parse_method into several functions.

	Continued work on the new controlfile format. All parameters are now
	given in parenthesis. Curly braces are only used for Agendas.

	* src/m_cloudbox.cc, src/cloudbox.cc, src/m_scatrte.cc, src/m_abs.cc:

	Always indent out2 output by 2 spaces.

	* tests/Abs/TestAbs2.arts, tests/DOIT/TestDOIT2:

	Added to demo the new cfile structure.

2008-02-28  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-3-9

	* tests/AMSUB/TestAMSUB.arts: Tried to switch on Jacobians, but
	this leads to a core dump in RteCalc. I'm leaving this in for
	Patrick to have a case to check.

	* src/interpolation_poly.{cc,h}: New files, home of the higher
	order interpolation functions.

	* src/Makefile.am: Added interpolation_poly.{cc,h}.

	* src/interpolation.cc: Typo fix in comment.

2008-02-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-8

	* src/make_auto_wsv_h.cc:

	Change the allocation, deallocation, and duplication function pointer
	arrays to store pointers for each WSV group, not each WSV.

	* src/workspace_ng.cc:

	Adapted for the changes in auto_wsv.h. Use the wsv_data array to get
	the group type and pass it to allocate, deallocate, or duplicate.

2008-02-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-7

	* src/parser.cc:

	Doxygen macros start with a \ not a /...

	Replace also all remains of old doxygen style @ signs with \.

	Updated docs.

2008-02-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-6

	* src/scatrte.cc (cloud_ppath_update1D_planeparallel),
	src/lineshapes.cc:

	Use _U_ macro in several places to get rid of doxygen warnings.

	* src/agenda_record.cc (write_agenda_wrapper_header):

	Add missing docs for one parameter.

	* src/special_interp.cc (p2gridpos_extpol):

	Add missing docs (FIXME_DOCMISSING) for one parameter.

	* doc/doxygen/Doxyfile.in:

	Add m_abs_o2_models.cc to EXCLUDE list. It is not used ATM.

	Remove old_absorption.cc from EXCLUDE list. The file doesn't exist
	anymore.

	* src/mystring.h (insert_substr): Added helper function.

	* src/make_auto_md_h.cc:

	Escape < and > in WSM description field to fix appearance in doxygen
	documentation.

	* src/mc_antenna.h: Remove spurious . in doxygen comment.

	* src/species_data.cc:

	Remove nested C++ comments in doxygen docs and replace the with HTML
	comments.

	* src/arts_omp.{cc,h}, src/array.h: Mask # signs in doxygen comments.

2008-02-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-5

	* src/m_abs_lookup.cc:

	Fix doxygen comments. [in] and [out] must be placed after the /param
	keyword, not the variable name.

	* src/parser.cc: Doxygen fixes. Remove obsolete parameters.

	* src/species_data.cc: Doxygen fix. Mask < and > in text.

2008-02-20  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-4

	* src/parser.{cc,h}:

	Started to implement features for the new controlfile format.
	The parser is still backwards compatible with old controlfiles. Use
	Arts2 instead of Arts as the main agenda name to tell the parser that
	the controlfile uses the new syntax.

	Added parse_input and parse_output functions.

	Added mcfile_version which holds the controlfile version to
	distinguish between the old and the new format.

	(parse_method): Require the inputs and outputs to be specified with
	the new controlfile format.

2008-02-20  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-3

	* src/parser.{cc,h}, src/sourcetext.{cc,h}:

	Move the SourceText class into its own file.

	* src/globals_2.cc: Get rid of the global Workspace variable.

	* src/main.cc (main):

	Execute all controlfiles specified on the commandline.

	Use a local workspace object instead of the obsolete global one.

	* src/m_general.{cc,h} (PrintWorkspace), src/m_delete.h (Delete):

	Use the new passworkspace feature.

	* src/m_scatrte.cc (ScatteringDoit, DoitInit), src/workspace.cc,
	src/methods.cc:

	Add new WSV doit_is_initialized. This way ScatteringDoit can check if
	DoitInit was called before without accessing the workspace object
	directly.

	* src/methods.{cc,h} src/methods_aux.cc:

	Add new option pass_workspace to MdRecord. Since we don't have a global
	workspace anymore, some methods must have direct access to the
	workspace (like Delete). If pass_workspace is true, the getaway
	function will pass a reference to the current workspace to the WSM.

	Add PASSWORKSPACE to Delete and PrintWorkspace.

	* src/make_auto_md_{cc,h}.cc:

	If the PassWorkspace flag is true, pass a workspace reference to the
	WSM.

2008-02-19  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-2

	* src/parser.{cc,h}:

	Added.

	Created a new parser class. This is the first object-oriented version
	doing just the same as the old functional parser. This is a
	preparation which should ease the upcoming implementation of new
	features.

	* src/Makefile.am:
	
	Add new parser.{cc,h}, remove parser_old.{cc,h}.

	* src/main.cc: Remove parser_old.{cc,h} and include the new parser.

	* src/parser_old.{cc,h}, src/parser.{cc,h}:

	Move SourceText class from old to new parser.

	* src/parser_old.h: Include parser.h.

2008-02-19  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-1

	* src/parser.{cc,h}: Renamed to parser_old.{cc,h}.

	* src/main.cc, src/make_auto_md_h.cc, src/parser.cc:

	Include parser_old.h.

	* src/Makefile.am: Change parser.{cc,h} to parser_old.{cc.h}.

	* src/main.cc (main):

	Reword non-OpenMP error message for --numthreads.

	* tests/DOIT/TestDOIT.arts:

	Cosmetic changes to give nicer diff output for the changes I'm
	testing.

2008-02-15  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-3-0

	Some control files need to be changed !!!
	
	* New sub-version (on request from Stefan) as usage of
	VectorNLinSpace and VectorNLogSpace changed. The number of
	elements now specified by *nelem*.  This in order to be consistent
	with e.g. VectorSet and simplify to make control files where
	vector lengths must be matched.

	* Test case for Odin-SMR created. Data exist for both 501 and 544
	GHz bands. Settings for operational retrievals have been followed
	as closely as possibly. Antenna patterns provided for different
	integration times.

	* tests/DOIT/TestDOIT.arts: Adjusted call of VectorNLin/Log in these 
	* tests/DISORT/TestDISORT.arts: files.
	* tests/ClearSky/TestClearSky.arts: 
	* tests/Abs/TestAbs.arts: 
	* includes/amsub.arts: 

	* tests/OdinSMR/TestOdinSMR_1D.arts: Created.
	* includes/odinsmr_501_1D.arts: Created.
	
	* includes/odinsmr_501.arts: Improved and polished
	* includes/odinsmr_544.arts: Improved and polished
	* includes/odinsmr.arts: Improved and polished
	* tests/OdinSMR/TestOdinSMR.arts: Improved and polished.

	* tests/OdinSMR/plot_results.m: Now also handling 1D case.

	* tests/OdinSMR/setup_input.m: Now creating antenna patterns for
	different integration times.

	* src/m_batch.cc: Adjusted calls of VectorNlogSpace.

	* src/m_basic_types.cc 
	(VectorNLinSpace): Now using *nelem*.
	(VectorNLogSpace): As above.

	* src/workspace.cc: Added sideband_mode. 

	* src/m_sensor.cc (ConvertIFToRF): Now using sideband_mode. 

2008-02-14  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-2-12

	* tests/X/X.arts: Added INCLUDE "continua.arts" in
	test scripts, due to change below.

	* tests/OdinSMR/plot_result.m: Small Matlab help script.
	* tests/OdinSMR/setup_input.m: As above.

	* includes/odinsmr_544.arts: Created.
	* includes/odinsmr_501.arts: Created.

	* tests/OdinSMR/TestOdinSMR.arts: Created. Works, but needs some
	polishing.

	* src/m_ppath.cc (VectorZtanToZaRefr1D): Added 1D to name for
	clarity. Now proper error message if *atmosphere_dim* not equal 1.
	Before just an assert.
	(VectorZtanToZa1D): Now only working for 1D and takes geoid radius
	from WSV *r_geoid*. Added 1D to name.
	(rte_pos_and_losFromTangentPressure): Sorted in alphabetical order.

	* includes/general.arts: Somewhat more detailed description of
	settings around surface_prop_agenda. I first changed to a more
	efficient way to implement a blackbody surface, but noticed that
	some tests had to be changed.
	Removed inclusion of continua.arts. This to make the inclusion
	more transperant and modular.

2008-02-04  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-2-11

	* src/main.cc (main):
	
	Fix syntax error and messages bug in non-OpenMP compilation.

2008-02-04  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-2-10

	* src/parameters.cc (get_parameters), src/parameters.h:

	Sort options in help output alphabetically.

	Added option -n/--numthreads to set the maximum number of threads.

	* src/main.cc (main):

	If --numthreads was given on the commandline set the maximum number of
	threads accordingly.

2008-02-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-2-9

	* src/parameters.cc (get_parameters):

	If the environment variable ARTS_INCLUDE_PATH exists, add those paths
	to parameters.includepath as well.

	Update --help documentation.

	* src/methods.cc (INCLUDE): Update documentation.

2008-02-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-2-8

	* src/methods.cc (INCLUDE), src/m_general.cc (INCLUDE):

	Add this dummy WSM with documentation for the INCLUDE statement.

2008-02-01  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-2-7

	* src/abs_species_tags.cc (SpeciesTag): Fixed bug reported by
	Patrick. There was no runtime error if the user chose a
	non-existing absorption species, only an assertion failure. The
	reason was a bug in the constructor of SpeciesTag. The helper
	function find_first returns -1 if the search item is not found,
	not nelem(), as was assumed.

2008-01-31  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-2-6

	* src/methods.cc (AtmFieldsRefinePgrid): Added this new method. I
	needed it for absorption lookup table testing. See online
	documentation for details.

	* src/m_atmosphere.cc (AtmFieldsRefinePgrid): Added this method. 

2008-01-31  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-2-5
	
	* src/m_montecarlo.cc (MCGeneral): Now using f_index.

	* src/montecarlo.cc (cloudy_rt_vars_at_gp): Added f_index as input
	argument. Used in abs_scalar_gas_agendaExecute.
	(clear_rt_vars_at_gp): As above.

	(mcPathTraceGeneral): Added f_index as input argument, following
	change above.
	(mcPathTrace): As above.
	(mcPathTraceIPA): As above.

	* src/m_rte.cc (MCGeneral): Conversion to Tb was applied twice!
	f_index now input to MCGeneral and should work for calculations
	involving multiple frequencies.

2008-01-31  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-2-4

	* src/arts_omp.cc: Added. This file contains wrapper functions for
	standard OMP functions, that work with and without OMP
	support. This saves the use of #ifdef statements around omp
	functions in the ARTS main code.

	All functions start with arts_omp. Otherwise, names are the same
	as the standard OMP function names.

	* src/arts_omp.h: Added. Header file for arts_omp.cc

	* src/m_abs_lookup.cc: Adapted to use arts_omp functions.
	(abs_fieldCalc): Fixed the vectorization bug following advice from
	Oliver. I had forgotten to add the flag to clone the workspace.

	* src/messages.h: Adapted to use arts_omp functions.

	* src/m_batch.cc: Adapted to use arts_omp functions.

	* src/main.cc: Adapted to use arts_omp functions.

	* src/agenda_class.cc: Adapted to use arts_omp functions.

	* src/m_cloudbox.cc: Removed unnecessary include of omp.h.

	* src/Makefile.am (libarts_a_SOURCES): Added arts_omp.{cc,h}.

2008-01-31  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-2-3

	* src/messages.h: Set verbosity level independently for each
	OpenMP thread.

	* src/parameters.cc (get_parameters): Fixed online documentation
	to also mention the reporting level 4, which shows suppressed
	agenda output.

	* src/main.cc (set_reporting_level): Set verbosity level
	independently for each OpenMP thread.

	* src/agenda_class.cc: Set verbosity level independently for each
	OpenMP thread.

	* src/messages.cc: Set verbosity level independently for each
	OpenMP thread.

	* src/m_batch.cc (ybatchCalc_implementation): There used to be a
	fix here to manually reset the reporting level after the parallel
	region. Removed the fix, since this should work correctly
	now. Suppress all agenda output, even the first run, since
	simultaneous output from several threads would be confusing. Put
	instead in a message to out2, recommending reporting level 4 for
	those who want to see the agenda output.

	* src/test_geomag_calc.cc (main): Adjusted to still compile with
	the new definition of messages.

	* src/m_abs_lookup.cc (abs_fieldCalc): Tried to vectorize this
	method. Does not yet work correctly!

2008-01-29  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-2-2

	* src/methods.cc (VectorLogSpace): Added this method. Adapted from
	Patrick's VectorLinSpace method. I needed this for abs_lookup
	testing, where I want to prescribe a certain spacing of the log p
	grid, not the number of points as in VectorNLogSpace.

	* src/m_basic_types.cc (VectorLogSpace): Added this function.

2008-01-17  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-2-1

	* src/m_rte.cc (RteCalcMC):

	Revert change from arts-1-1-1209 r5612. Should not be needed anymore.

2008-01-17  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-2-0

	* Merged all changes up to revision r5615 from the
	arts2-controlfile-breakage branch back into trunk.

	* configure.in:

	Increased version number to 1.2.0 to reflect that major changes have
	been made to the controlfiles and the absorption part, and to indicate
	that we're moving closer to the release of arts 2.0.

2008-01-17  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1209-1

	* Merged revisions r5531:5614 from trunk. Last step before merging
	back all the branch changes into the trunk.

2008-01-10  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-1-1209

	* src/m_rte.cc (RteCalcMC): I missed a detail and it turned out that
	this function only works for single frequency calculations. 
	Problem will be fixed in the present branch. A runtime error was
	included in this version to avoid incorrect usage of the function.

